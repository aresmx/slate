
<!doctype html>
<html>
  <head>
    <meta charset="utf-8">

    <!-- Always force latest IE rendering engine or request Chrome Frame -->
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">

    <!-- Use title if it's in the page YAML frontmatter -->
    <title>API Reference</title>

    <link href="stylesheets/screen.css" media="screen" rel="stylesheet" type="text/css" />
    <link href="stylesheets/print.css" media="print" rel="stylesheet" type="text/css" />
    <script src="http://code.jquery.com/jquery-1.10.1.min.js"></script>
    <script src="javascripts/all.js" type="text/javascript"></script>
    
    <script>
      $(function() {
        var toc = $("#toc").tocify({
          selectors: "h1,h2",
          extendPage: false,
          theme: "none",
          smoothScroll: false,
          showEffectSpeed: 0,
          hideEffectSpeed: 180,
          ignoreSelector: ".toc-ignore",
          hashGenerator: 'pretty',
          highlightOffset: 60,
          scrollTo: -2,
          scrollHistory: true,
          hashGenerator: function(text, element) {
            return element[0].getAttribute('id');
          }
        }).data("toc-tocify");
        // Hack to make already open sections to start opened,
        // instead of displaying an ugly animation
        setTimeout(function() {
          toc.setOption("showEffectSpeed", 180);
        },50);
        setupLanguages([
          
            
              
                'shell',
              
            
              
                'php',
              
            
              
                'java',
              
            
              
                'csharp',
              
            
              
                'javascript',
              
            
              
                'ruby',
              
            
          
        ]);
      });
    </script>
  </head>

  <body class="index">
    <div class="tocify-wrapper">
      <img src="http://www.openpay.mx/img/logo.png" />
      <div id="toc">
      </div>
      
      <ul class="toc-footer">
        
          <li><a href='#'>Sign Up for a Developer Key</a></li>
        
          <li><a href='http://github.com/tripit/slate'>Documentation Powered by Slate</a></li>
        
      </ul>
      
    </div>
    <div class="page-wrapper">
      <div class="content">
        <h1 id="introducción">Introducción</h1>

<p>La API de Openpay está diseña sobre <a href="http://es.wikipedia.org/wiki/Representational_State_Transfer">REST</a>, por lo tanto encontrarás que las URL están orientadas a recursos y se usa códigos de respuesta HTTP para indicar los errores en la API.</p>

<p>Todas las respuestas de la API están en formato <a href="http://www.json.org/">JSON</a>, incluyendo errores.</p>

<h1 id="api-endpoints">API Endpoints</h1>

<blockquote>
<p>Recurso disponibles</p>
</blockquote>

<p><br/>
<br/></p>

<blockquote>
<p>a) Por Comercio</p>
</blockquote>
<pre class="highlight plaintext">/v1/{MERCHANT_ID}/...

/fees
/fees/{FEE_ID}
/charges
/charges/{TRANSACTION_ID}
/payouts
/payouts/{TRANSACTION_ID}
/cards
/cards/{CARD_ID}
/customers
/customers/{CUSTOMER_ID}
/plans
/plans/{PLAN_ID}
​/tokens
/tokens/{TOKEN_ID}
</pre>
<blockquote>
<p>b) Por Cliente</p>
</blockquote>
<pre class="highlight plaintext">/v1/{MERCHANT_ID}/customers/{CUSTOMER_ID}/...

/cards
/cards/{CARD_ID}
/bankaccounts
/bankaccounts/{BANKACCOUNT_ID}
/charges
/charges/{TRANSACTION_ID}
/payouts
/payouts/{TRANSACTION_ID}
/transfers
/transfers/{TRANSACTION_ID}
/subscriptions
/subscriptions/{SUBSCRIPTION_ID}
</pre>
<p>La API REST de Openpay tiene un ambiente de pruebas (sandbox) y un ambiente de producción. Usa las credenciales que se generaron al momento de tu registro para realizar la integración de tu sistema con Openpay. Una vez que estes listo para pasar a producción y tu solicitud sea aprobada, se generarán nuevas credenciales para acceder al ambiente de producción.</p>

<p>La siguientes URIs forman la base de los endpoints para los ambientes soportados:</p>

<ul>
<li><strong>Pruebas</strong>, URI base: <br/> <code class="prettyprint">https://sandbox-api.openpay.mx</code><br/><br/></li>
<li><strong>Producción</strong>, URI base: <br/><code class="prettyprint">https://api.openpay.mx</code><br/></li>
</ul>

<p>Un endpoint completo esta formado por la URI base del ambiente, el identificador del comercio y el recurso. </p>

<p>Por ejemplo, si queremos crear un nuevo cliente, el endpoint sería:</p>

<p><code>POST https://sandbox-api.openpay.mx/v1/mzdtln0bmtms6o3kck8f/customers</code></p>

<p>Para crear una petición completa es necesaria envíar las cabeceras HTTP correctas y la información en formato JSON.</p>

<p><aside class="notice">
Todos los ejemplos de está documentación están apuntados al ambiente de pruebas.
</aside></p>

<h1 id="autenticación">Autenticación</h1>

<blockquote>
<p>Ejemplo de autenticación</p>
</blockquote>
<pre class="highlight shell">curl https://sandbox-api.openpay.mx/v1/mzdtln0bmtms6o3kck8f/charges/ <span class="se">\</span>
   -u sk_e568c42a6c384b7ab02cd47d2e407cab:

El parámetro -u se ocupa para realizar la autenticación HTTP Basic <span class="o">(</span>al agregar dos puntos después de la llave privada se previene el uso de contraseña<span class="o">)</span>
</pre><pre class="highlight php"><span class="cp">&lt;?</span> 
<span class="c1">//Por default se usa el ambiente de sandbox
</span><span class="nv">$openpay</span> <span class="o">=</span> <span class="nx">Openpay</span><span class="o">::</span><span class="na">getInstance</span><span class="p">(</span><span class="s1">'moiep6umtcnanql3jrxp'</span><span class="p">,</span> <span class="s1">'sk_3433941e467c4875b178ce26348b0fac'</span><span class="p">);</span> 
<span class="cp">?&gt;</span>
</pre><pre class="highlight java"><span class="c1">//Sandbox</span>
<span class="kd">final</span> <span class="n">OpenpayAPI</span> <span class="n">api</span> <span class="o">=</span> <span class="k">new</span> <span class="n">OpenpayAPI</span><span class="o">(</span><span class="s">"https://sandbox-api.openpay.mx"</span><span class="o">,</span> <span class="s">"moiep6umtcnanql3jrxp"</span><span class="o">,</span> <span class="s">"sk_3433941e467c4875b178ce26348b0fac"</span><span class="o">);</span>

<span class="c1">//Produccion</span>
<span class="kd">final</span> <span class="n">OpenpayAPI</span> <span class="n">api</span> <span class="o">=</span> <span class="k">new</span> <span class="n">OpenpayAPI</span><span class="o">(</span><span class="s">"https://api.openpay.mx"</span><span class="o">,</span> <span class="s">"moiep6umtcnanql3jrxp"</span><span class="o">,</span> <span class="s">"sk_3433941e467c4875b178ce26348b0fac"</span><span class="o">);</span>
</pre><pre class="highlight javascript"><span class="kd">var</span> <span class="nx">Openpay</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'openpay'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">openpay</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Openpay</span><span class="p">(</span><span class="s1">'moiep6umtcnanql3jrxp'</span><span class="p">,</span><span class="s1">'sk_3433941e467c4875b178ce26348b0fac'</span><span class="p">);</span>
</pre><pre class="highlight csharp"><span class="c1">//Sandbox
</span><span class="n">OpenpayAPI</span> <span class="n">openpayAPI</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">OpenpayAPI</span><span class="p">(</span><span class="s">"sk_3433941e467c4875b178ce26348b0fac"</span><span class="p">,</span> <span class="s">"moiep6umtcnanql3jrxp"</span><span class="p">);</span>
<span class="n">openpayAPI</span><span class="p">.</span><span class="n">Production</span> <span class="p">=</span> <span class="k">false</span><span class="p">;</span> <span class="c1">// Default value = false
</span>
<span class="c1">//Produccion
</span><span class="n">OpenpayAPI</span> <span class="n">openpayAPI</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">OpenpayAPI</span><span class="p">(</span><span class="s">"sk_3433941e467c4875b178ce26348b0fac"</span><span class="p">,</span> <span class="s">"moiep6umtcnanql3jrxp"</span><span class="p">);</span>
<span class="n">openpayAPI</span><span class="p">.</span><span class="n">Production</span> <span class="p">=</span> <span class="k">true</span><span class="p">;</span>
</pre><pre class="highlight ruby"><span class="c1">#Sandbox</span>
<span class="n">openpay</span><span class="o">=</span><span class="no">OpenpayApi</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="s2">"moiep6umtcnanql3jrxp"</span><span class="p">,</span><span class="s2">"sk_3433941e467c4875b178ce26348b0fac"</span><span class="p">)</span>

<span class="c1">#Produccion</span>
<span class="n">openpay</span><span class="o">=</span><span class="no">OpenpayApi</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="s2">"moiep6umtcnanql3jrxp"</span><span class="p">,</span><span class="s2">"sk_3433941e467c4875b178ce26348b0fac"</span><span class="p">,</span> <span class="kp">true</span><span class="p">)</span>
</pre>
<blockquote>
<p>Producción </p>
</blockquote>
<pre class="highlight shell">Solo es necesario usar la URI base https://api.openpay.mx
</pre><pre class="highlight php"><span class="cp">&lt;?</span> 
<span class="nx">Openpay</span><span class="o">::</span><span class="na">setProductionMode</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span> 
<span class="cp">?&gt;</span>
</pre><pre class="highlight java"><span class="c1">//Solo es necesario usar la URI base https://api.openpay.mx</span>
</pre><pre class="highlight csharp"><span class="n">openpayAPI</span><span class="p">.</span><span class="n">Production</span> <span class="p">=</span> <span class="k">true</span><span class="p">;</span>
</pre><pre class="highlight javascript"><span class="nx">openpay</span><span class="p">.</span><span class="nx">setProductionReady</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>
</pre><pre class="highlight ruby"><span class="c1">#Solo es necesario pasar como tercer argumento un "true" cuando se crea el objeto OpenpayApi</span>
</pre>
<p>Para realizar peticiones a la API de Openpay, es necesario enviar la llave de API (API Key) en todas tus llamadas a nuestros  servidores. ​La llave la puedes obtener desde el <a href="https://sandbox-dashboard.openpay.mx">dashboard</a>.</p>

<p>Existen 2 tipos de llaves de API:</p>

<ul>
<li><strong>Privada.-</strong> 
Para llamadas entre servidores y con acceso total a todas las operaciones de la API (nunca debe ser  compartida).</li>
</ul>

<p><aside class="warning">
Manten está llave segura y nunca la compartas con nadie.
</aside></p>

<ul>
<li><strong>Pública.-</strong>
Sólo se debe utilizar en llamadas desde JavaScript. Esta llave sólo tiene permitido realizar crear tarjetas o crear tokens</li>
</ul>

<p><aside class="notice">
Para hacer llamadas con tu llave pública utiliza la librería <a href="#">Openpay.js</a>
</aside></p>

<p>Para la autenticación al API debes usar <a href="http://es.wikipedia.org/wiki/Autenticación_de_acceso_básica">autenticación de acceso básica</a>, donde la llave de API es el nombre de usuario. La contraseña no es requerida y debe dejarse en blanco por fines de simplicidad.</p>

<p><aside class="notice">
Por razones de seguridad todas las peticiones deben ser vía <strong>HTTPS</strong>.
</aside></p>

<h1 id="errores">Errores</h1>

<p>Openpay regresa objetos de JSON en las respuestas del servicio, incluso en caso de errores por lo que cuando exista un error.</p>

<h2 id="objeto-error">Objeto Error</h2>

<blockquote>
<p>Ejemplo de objeto</p>
</blockquote>
<pre class="highlight json"><span class="p">{</span><span class="w">
    </span><span class="s2">"category"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"request"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"description"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"The customer with id 'm4hqp35pswl02mmc567' does not exist"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"http_code"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">404</span><span class="p">,</span><span class="w">
    </span><span class="s2">"error_code"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">1005</span><span class="p">,</span><span class="w">
    </span><span class="s2">"request_id"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"1981cdb8-19cb-4bad-8256-e95d58bc035c"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></pre><pre class="highlight java"><span class="c1">//Para el caso de java, toda operación regresara una instancia de la clase "OpenpayServiceException" la cual contendrá esta información del error.</span>
</pre><pre class="highlight csharp"><span class="c1">//Para el caso de C Sharp, toda operación regresara una instancia de la clase "OpenpayException" la cual contendrá esta información del error.
</span></pre><pre class="highlight ruby"><span class="c1">#Para el caso de Ruby, toda operación puede regresar cualquiera de las siguientes excepciones:</span>

<span class="c1"># =&gt; OpenpayException: Para errores genericos, como acceso a recursos invalidos, etc.</span>
<span class="c1"># =&gt; OpenpayConnectionException: Para errores relacionados con problemas en la conexión al servidor.</span>
<span class="c1"># =&gt; OpenpayTransactionException: Para errores relacionados durante la ejecución de las operaciones.</span>
</pre>
<table><thead>
<tr>
<th>Propiedad</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>category</td>
<td><strong><em>string</em></strong> <br/><strong>request:</strong> Indica un error causado por datos enviados por el cliente. Por ejemplo, una petición inválida, un intento de una transacción sin fondos, o una transferencia a una cuenta que no existe. <br/><br/><strong>internal:</strong> Indica un error del lado de Openpay, y ocurrira muy raramente. <br/><br/><strong>gateway:</strong> Indica un error durante la transacción de los fondos de una tarjeta a la cuenta de Openpay o de la cuenta hacia un banco o tarjeta.</td>
</tr>
<tr>
<td>error_code</td>
<td><strong><em>numeric</em></strong> <br/>El código del error de Openpay indicando el problema que ocurrió.</td>
</tr>
<tr>
<td>description</td>
<td><strong><em>string</em></strong> <br/>Descripción del error.</td>
</tr>
<tr>
<td>http_code</td>
<td><strong><em>string</em></strong> <br/>Código de error HTTP de la respuesta.</td>
</tr>
<tr>
<td>request_id</td>
<td><strong><em>string</em></strong> <br/>Identificador de la petición.</td>
</tr>
</tbody></table>

<h2 id="códigos-de-error">Códigos de error</h2>

<h3 id="generales">Generales</h3>

<table><thead>
<tr>
<th>Código</th>
<th>Error HTTP</th>
<th>Causa</th>
</tr>
</thead><tbody>
<tr>
<td>1000</td>
<td>500 Internal Server Error</td>
<td>Ocurrió un error interno en el servidor de Openpay</td>
</tr>
<tr>
<td>1001</td>
<td>400 Bad Request</td>
<td>El formato de la petición no es JSON, los campos no tienen el formato correcto, o la petición no tiene campos que son requeridos.</td>
</tr>
<tr>
<td>1002</td>
<td>401 Unauthorized</td>
<td>La llamada no esta autenticada o la autenticación es incorrecta.</td>
</tr>
<tr>
<td>1003</td>
<td>422 Unprocessable Entity</td>
<td>La operación no se pudo completar por que el valor de uno o más de los parametros no es correcto.</td>
</tr>
<tr>
<td>1004</td>
<td>503 Service Unavailable</td>
<td>Un servicio necesario para el procesamiento de la transacción no se encuentra disponible.</td>
</tr>
<tr>
<td>1005</td>
<td>404 Not Found</td>
<td>Uno de los recursos requeridos no existe.</td>
</tr>
<tr>
<td>1006</td>
<td>409 Conflict</td>
<td>Ya existe una transacción con el mismo ID de orden.</td>
</tr>
<tr>
<td>1007</td>
<td>402 Payment Required</td>
<td>La transferencia de fondos entre una cuenta de banco o tarjeta y la cuenta de Openpay no fue aceptada.</td>
</tr>
<tr>
<td>1008</td>
<td>423 Locked</td>
<td>Una de las cuentas requeridas en la petición se encuentra desactivada.</td>
</tr>
<tr>
<td>1009</td>
<td>413 Request Entity too large</td>
<td>El cuerpo de la petición es demasiado grande.</td>
</tr>
<tr>
<td>1010</td>
<td>403 Forbidden</td>
<td>Se esta utilizando la llave pública para hacer una llamada que requiere la llave privada, o bien, se esta usando la llave privada desde JavaScript.</td>
</tr>
</tbody></table>

<h3 id="almacenamiento">Almacenamiento</h3>

<table><thead>
<tr>
<th>Código</th>
<th>Error HTTP</th>
<th>Causa</th>
</tr>
</thead><tbody>
<tr>
<td>2001</td>
<td>409 Conflict</td>
<td>La cuenta de banco con esta CLABE ya se encuentra registrada en el cliente.</td>
</tr>
<tr>
<td>2002</td>
<td>409 Conflict</td>
<td>La tarjeta con este número ya se encuentra registrada en el cliente.</td>
</tr>
</tbody></table>

<h3 id="tarjetas">Tarjetas</h3>

<table><thead>
<tr>
<th>Código</th>
<th>Error HTTP</th>
<th>Causa</th>
</tr>
</thead><tbody>
<tr>
<td>3001</td>
<td>402 Payment Required</td>
<td>La tarjeta fue declinada.</td>
</tr>
<tr>
<td>3002</td>
<td>402 Payment Required</td>
<td>La tarjeta ha expirado.</td>
</tr>
<tr>
<td>3003</td>
<td>402 Payment Required</td>
<td>La tarjeta no tiene fondos suficientes.</td>
</tr>
<tr>
<td>3004</td>
<td>402 Payment Required</td>
<td>La tarjeta ha sido identificada como una tarjeta robada.</td>
</tr>
<tr>
<td>3005</td>
<td>402 Payment Required</td>
<td>La tarjeta ha sido identificada como una tarjeta fraudulenta.</td>
</tr>
</tbody></table>

<h3 id="cuentas">Cuentas</h3>

<table><thead>
<tr>
<th>Código</th>
<th>Error HTTP</th>
<th>Causa</th>
</tr>
</thead><tbody>
<tr>
<td>4001</td>
<td>412 Preconditon Failed</td>
<td>La cuenta de Openpay no tiene fondos suficientes.</td>
</tr>
</tbody></table>

<h1 id="cargos">Cargos</h1>

<p>Los cargos se pueden realizar cargos a tarjetas, tiendas y bancos. A cada cargo se le asigna un identificador único en el sistema.</p>

<p>En cargos a tarjeta puedes hacerlo a una tarjeta guardada usando el id de la tarjeta, usando un token o puedes enviar la información de la tarjeta al momento de la invocación.</p>

<h2 id="con-id-de-tarjeta-o-token">Con id de tarjeta o token</h2>

<blockquote>
<p>Definición</p>
</blockquote>
<pre class="highlight shell">Comercio
POST https://sandbox-api.openpay.mx/v1/<span class="o">{</span>MERCHANT_ID<span class="o">}</span>/charges

Cliente
POST https://sandbox-api.openpay.mx/v1/<span class="o">{</span>MERCHANT_ID<span class="o">}</span>/customers/<span class="o">{</span>CUSTOMER_ID<span class="o">}</span>/charges
</pre><pre class="highlight php"><span class="cp">&lt;?</span>
<span class="nx">Comercio</span>
<span class="nv">$openpay</span><span class="o">-&gt;</span><span class="na">charges</span><span class="o">-&gt;</span><span class="na">create</span><span class="p">(</span><span class="nx">chargeRequest</span><span class="p">);</span>

<span class="nx">Cliente</span>
<span class="nv">$customer</span> <span class="o">=</span> <span class="nv">$openpay</span><span class="o">-&gt;</span><span class="na">customers</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="nv">$customerId</span><span class="p">);</span>
<span class="nv">$customer</span><span class="o">-&gt;</span><span class="na">charges</span><span class="o">-&gt;</span><span class="na">create</span><span class="p">(</span><span class="nx">chargeRequest</span><span class="p">);</span>
<span class="cp">?&gt;</span>
</pre><pre class="highlight java"><span class="c1">//Cliente</span>
<span class="n">openpayAPI</span><span class="o">.</span><span class="na">charges</span><span class="o">().</span><span class="na">create</span><span class="o">(</span><span class="n">String</span> <span class="n">customerId</span><span class="o">,</span> <span class="n">CreateCardChargeParams</span> <span class="n">request</span><span class="o">);</span>

<span class="c1">//Comercio</span>
<span class="n">openpayAPI</span><span class="o">.</span><span class="na">charges</span><span class="o">().</span><span class="na">create</span><span class="o">(</span><span class="n">CreateCardChargeParams</span> <span class="n">request</span><span class="o">);</span>
</pre><pre class="highlight javascript"><span class="c1">// Comercio
</span><span class="nx">openpay</span><span class="p">.</span><span class="nx">charges</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="nx">chargeRequest</span><span class="p">,</span> <span class="nx">callback</span><span class="p">);</span>

<span class="c1">// Cliente
</span><span class="nx">openpay</span><span class="p">.</span><span class="nx">customers</span><span class="p">.</span><span class="nx">charges</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="nx">customerId</span><span class="p">,</span> <span class="nx">chargeRequest</span><span class="p">,</span> <span class="nx">callback</span><span class="p">);</span>
</pre><pre class="highlight csharp"><span class="c1">//Cliente
</span><span class="n">openpayAPI</span><span class="p">.</span><span class="n">ChargeService</span><span class="p">.</span><span class="nf">Create</span><span class="p">(</span><span class="kt">string</span> <span class="n">customer_id</span><span class="p">,</span> <span class="n">ChargeRequest</span> <span class="n">request</span><span class="p">);</span>

<span class="c1">//Comercio
</span><span class="n">openpayAPI</span><span class="p">.</span><span class="n">ChargeService</span><span class="p">.</span><span class="nf">Create</span><span class="p">(</span><span class="n">ChargeRequest</span> <span class="n">request</span><span class="p">);</span>
</pre><pre class="highlight ruby"><span class="c1">#Cliente</span>
<span class="vi">@charges</span><span class="o">=</span><span class="vi">@openpay</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span><span class="ss">:charges</span><span class="p">)</span>
<span class="vi">@charges</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span><span class="n">request_hash</span><span class="p">,</span> <span class="n">customer_id</span><span class="p">)</span>

<span class="c1">#Comercio</span>
<span class="vi">@charges</span><span class="o">=</span><span class="vi">@openpay</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span><span class="ss">:charges</span><span class="p">)</span>
<span class="vi">@charges</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span><span class="n">request_hash</span><span class="p">)</span>
</pre>
<blockquote>
<p>Ejemplo de petición con cliente</p>
</blockquote>
<pre class="highlight shell">curl https://sandbox-api.openpay.mx/v1/mzdtln0bmtms6o3kck8f/customers/ag4nktpdzebjiye1tlze/charges <span class="se">\</span>
   -u sk_e568c42a6c384b7ab02cd47d2e407cab: <span class="se">\</span>
   -H <span class="s2">"Content-type: application/json"</span> <span class="se">\</span>
   -X POST -d <span class="s1">'{
   "source_id" : "kqgykn96i7bcs1wwhvgw",
   "method" : "card",
   "amount" : 100,
   "description" : "Cargo inicial a mi cuenta",
   "order_id" : "oid-00051"
} '</span> 
</pre><pre class="highlight php"><span class="cp">&lt;?</span>
<span class="nv">$openpay</span> <span class="o">=</span> <span class="nx">Openpay</span><span class="o">::</span><span class="na">getInstance</span><span class="p">(</span><span class="s1">'mzdtln0bmtms6o3kck8f'</span><span class="p">,</span> <span class="s1">'sk_e568c42a6c384b7ab02cd47d2e407cab'</span><span class="p">);</span>

<span class="nv">$chargeRequest</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">'method'</span> <span class="o">=&gt;</span> <span class="s1">'card'</span><span class="p">,</span>
    <span class="s1">'source_id'</span> <span class="o">=&gt;</span> <span class="s1">'kqgykn96i7bcs1wwhvgw'</span><span class="p">,</span>
    <span class="s1">'amount'</span> <span class="o">=&gt;</span> <span class="mi">100</span><span class="p">,</span>
    <span class="s1">'description'</span> <span class="o">=&gt;</span> <span class="s1">'Cargo inicial a mi merchant'</span><span class="p">,</span>
    <span class="s1">'order_id'</span> <span class="o">=&gt;</span> <span class="s1">'oid-00051'</span><span class="p">);</span>

<span class="nv">$customer</span> <span class="o">=</span> <span class="nv">$openpay</span><span class="o">-&gt;</span><span class="na">customers</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">'ag4nktpdzebjiye1tlze'</span><span class="p">);</span>
<span class="nv">$charge</span> <span class="o">=</span> <span class="nv">$customer</span><span class="o">-&gt;</span><span class="na">charges</span><span class="o">-&gt;</span><span class="na">create</span><span class="p">(</span><span class="nv">$chargeRequest</span><span class="p">);</span>
<span class="cp">?&gt;</span>
</pre><pre class="highlight java"><span class="n">OpenpayAPI</span> <span class="n">api</span> <span class="o">=</span> <span class="k">new</span> <span class="n">OpenpayAPI</span><span class="o">(</span><span class="s">"https://sandbox-api.openpay.mx"</span><span class="o">,</span> <span class="s">"sk_b05586ec98454522ac7d4ccdcaec9128"</span><span class="o">,</span> <span class="s">"maonhzpqm8xp2ydssovf"</span><span class="o">);</span>
<span class="n">CreateCardChargeParams</span> <span class="n">request</span> <span class="o">=</span> <span class="k">new</span> <span class="n">CreateCardChargeParams</span><span class="o">();</span>
<span class="n">request</span><span class="o">.</span><span class="na">cardId</span><span class="o">(</span><span class="s">"kqgykn96i7bcs1wwhvgw"</span><span class="o">);</span> <span class="c1">// =source_id</span>
<span class="n">request</span><span class="o">.</span><span class="na">amount</span><span class="o">(</span><span class="k">new</span> <span class="n">BigDecimal</span><span class="o">(</span><span class="s">"100.00"</span><span class="o">));</span>
<span class="n">request</span><span class="o">.</span><span class="na">description</span><span class="o">(</span><span class="s">"Cargo inicial a mi merchant"</span><span class="o">);</span>
<span class="n">request</span><span class="o">.</span><span class="na">orderId</span><span class="o">(</span><span class="s">"oid-00051"</span><span class="o">);</span>
<span class="n">request</span><span class="o">.</span><span class="na">deviceSessionId</span><span class="o">(</span><span class="s">"kR1MiQhz2otdIuUlQkbEyitIqVMiI16f"</span><span class="o">);</span>
<span class="n">request</span><span class="o">.</span><span class="na">capture</span><span class="o">(</span><span class="n">Boolean</span><span class="o">.</span><span class="na">TRUE</span><span class="o">);</span>

<span class="n">Charge</span> <span class="kt">char</span><span class="n">ge</span> <span class="o">=</span> <span class="n">api</span><span class="o">.</span><span class="na">charges</span><span class="o">().</span><span class="na">create</span><span class="o">(</span><span class="s">"ag4nktpdzebjiye1tlze"</span><span class="o">,</span> <span class="n">request</span><span class="o">);</span>
</pre><pre class="highlight csharp"><span class="n">OpenpayAPI</span> <span class="n">api</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">OpenpayAPI</span><span class="p">(</span><span class="s">"sk_b05586ec98454522ac7d4ccdcaec9128"</span><span class="p">,</span> <span class="s">"maonhzpqm8xp2ydssovf"</span><span class="p">);</span>
<span class="n">ChargeRequest</span> <span class="n">request</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">ChargeRequest</span><span class="p">();</span>
<span class="n">request</span><span class="p">.</span><span class="n">Method</span> <span class="p">=</span> <span class="s">"card"</span><span class="p">;</span>
<span class="n">request</span><span class="p">.</span><span class="n">SourceId</span> <span class="p">=</span> <span class="s">"kwkoqpg6fcvfse8k8mg2"</span><span class="p">;</span>
<span class="n">request</span><span class="p">.</span><span class="n">Amount</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">Decimal</span><span class="p">(</span><span class="m">100.00</span><span class="p">);</span>
<span class="n">request</span><span class="p">.</span><span class="n">Description</span> <span class="p">=</span> <span class="s">"Cargo inicial a mi merchant"</span><span class="p">;</span>
<span class="n">request</span><span class="p">.</span><span class="n">OrderId</span> <span class="p">=</span> <span class="s">"oid-00051"</span><span class="p">;</span>
<span class="n">request</span><span class="p">.</span><span class="n">DeviceSessionId</span> <span class="p">=</span> <span class="s">"kR1MiQhz2otdIuUlQkbEyitIqVMiI16f"</span><span class="p">;</span>
<span class="n">request</span><span class="p">.</span><span class="n">Capture</span> <span class="p">=</span> <span class="k">true</span><span class="p">;</span>

<span class="n">Charge</span> <span class="n">charge</span> <span class="p">=</span> <span class="n">api</span><span class="p">.</span><span class="n">ChargeService</span><span class="p">.</span><span class="nf">Create</span><span class="p">(</span><span class="s">"ag4nktpdzebjiye1tlze"</span><span class="p">,</span> <span class="n">request</span><span class="p">);</span>
</pre><pre class="highlight javascript"><span class="kd">var</span> <span class="nx">chargeRequest</span> <span class="o">=</span> <span class="p">{</span>
   <span class="s1">'source_id'</span> <span class="err">:</span> <span class="s1">'kqgykn96i7bcs1wwhvgw'</span><span class="p">,</span>
   <span class="s1">'method'</span> <span class="err">:</span> <span class="s1">'card'</span><span class="p">,</span>
   <span class="s1">'amount'</span> <span class="err">:</span> <span class="mi">100</span><span class="p">,</span>
   <span class="s1">'description'</span> <span class="err">:</span> <span class="s1">'Cargo inicial a mi cuenta'</span><span class="p">,</span>
   <span class="s1">'order_id'</span> <span class="err">:</span> <span class="s1">'oid-00051'</span>
<span class="p">}</span>

<span class="nx">openpay</span><span class="p">.</span><span class="nx">customers</span><span class="p">.</span><span class="nx">charges</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="s1">'ag4nktpdzebjiye1tlze'</span><span class="p">,</span> <span class="nx">chargeRequest</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">charge</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// ...
</span><span class="p">});</span>
</pre><pre class="highlight ruby"><span class="vi">@openpay</span><span class="o">=</span><span class="no">OpenpayApi</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="s2">"moiep6umtcnanql3jrxp"</span><span class="p">,</span><span class="s2">"sk_3433941e467c4875b178ce26348b0fac"</span><span class="p">)</span>
<span class="vi">@charges</span><span class="o">=</span><span class="vi">@openpay</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span><span class="ss">:charges</span><span class="p">)</span>
<span class="n">request_hash</span><span class="o">=</span><span class="p">{</span>
    <span class="s2">"method"</span> <span class="o">=&gt;</span> <span class="s2">"card"</span><span class="p">,</span>
    <span class="s2">"source_id"</span> <span class="o">=&gt;</span> <span class="s2">"kqgykn96i7bcs1wwhvgw"</span><span class="p">,</span>
    <span class="s2">"amount"</span> <span class="o">=&gt;</span> <span class="mi">100</span><span class="o">.</span><span class="mo">00</span><span class="p">,</span>
    <span class="s2">"description"</span> <span class="o">=&gt;</span> <span class="s2">"Cargo inicial a mi merchant"</span><span class="p">,</span>
    <span class="s2">"order_id"</span> <span class="o">=&gt;</span> <span class="s2">"oid-00051"</span><span class="p">,</span>
    <span class="s2">"device_session_id"</span> <span class="o">=&gt;</span> <span class="s2">"kR1MiQhz2otdIuUlQkbEyitIqVMiI16f"</span>
  <span class="p">}</span>

<span class="n">response_hash</span><span class="o">=</span><span class="vi">@charges</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span><span class="n">request_hash</span><span class="p">.</span><span class="nf">to_hash</span><span class="p">,</span> <span class="s2">"ag4nktpdzebjiye1tlze"</span><span class="p">)</span>
</pre>
<blockquote>
<p>Ejemplo de respuesta</p>
</blockquote>
<pre class="highlight json"><span class="p">{</span><span class="w">
   </span><span class="s2">"id"</span><span class="p">:</span><span class="s2">"trzjaozcik8msyqshka4"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"amount"</span><span class="p">:</span><span class="mf">100.00</span><span class="p">,</span><span class="w">
   </span><span class="s2">"authorization"</span><span class="p">:</span><span class="s2">"801585"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"method"</span><span class="p">:</span><span class="s2">"card"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"operation_type"</span><span class="p">:</span><span class="s2">"in"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"transaction_type"</span><span class="p">:</span><span class="s2">"charge"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"card"</span><span class="p">:{</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="s2">"kqgykn96i7bcs1wwhvgw"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"type"</span><span class="p">:</span><span class="s2">"debit"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"brand"</span><span class="p">:</span><span class="s2">"visa"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"address"</span><span class="p">:</span><span class="err">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"card_number"</span><span class="p">:</span><span class="s2">"411111XXXXXX1111"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"holder_name"</span><span class="p">:</span><span class="s2">"Juan Perez Ramirez"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"expiration_year"</span><span class="p">:</span><span class="s2">"20"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"expiration_month"</span><span class="p">:</span><span class="s2">"12"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"allows_charges"</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="s2">"allows_payouts"</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="s2">"creation_date"</span><span class="p">:</span><span class="s2">"2014-05-26T11:02:16-05:00"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"bank_name"</span><span class="p">:</span><span class="s2">"Banamex"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"bank_code"</span><span class="p">:</span><span class="s2">"002"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"customer_id"</span><span class="p">:</span><span class="s2">"ag4nktpdzebjiye1tlze"</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="s2">"status"</span><span class="p">:</span><span class="s2">"completed"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"currency"</span><span class="p">:</span><span class="s2">"MXN"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"creation_date"</span><span class="p">:</span><span class="s2">"2014-05-26T11:02:45-05:00"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"operation_date"</span><span class="p">:</span><span class="s2">"2014-05-26T11:02:45-05:00"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"description"</span><span class="p">:</span><span class="s2">"Cargo inicial a mi cuenta"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"error_message"</span><span class="p">:</span><span class="err">null</span><span class="p">,</span><span class="w">
   </span><span class="s2">"order_id"</span><span class="p">:</span><span class="s2">"oid-00051"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"customer_id"</span><span class="p">:</span><span class="s2">"ag4nktpdzebjiye1tlze"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></pre>
<p>Este tipo de cargo requiere una tarjeta guardada o que hayas generado un token. Para guardar tarjetas consulta <a href="#crear-una-tarjeta">como crear una tarjeta</a> y para usar tokens consulta la sección <a href="#crear-un-nuevo-token">creación de tokens</a>. </p>

<p>Una vez que tengas una tarjeta guardada o un token usa la propiedad <code>source_id</code> para enviar el identificador.</p>

<p>La propiedad <code>device_session_id</code> deberá ser generada desde el API JavaScript, véase <a href="https://github.com/open-pay/openpay-js#fraud-detection-using-device-data">Fraud detection using device data</a>.</p>

<p><aside class="notice">
Puedes realizar el cargo a la cuenta del comercio o a la cuenta de un cliente.
</aside></p>

<h3 id="petición">Petición</h3>

<table><thead>
<tr>
<th>Propiedad</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>method</td>
<td><strong><em>string</em></strong> (requerido) <br/>Debe contener el valor <strong>card</strong> para hacer un cargo de una tarjeta registrada.</td>
</tr>
<tr>
<td>source_id</td>
<td><strong><em>string</em></strong> (requerido, longitud = 45) <br/>ID de la tarjeta guardada o el id del token creado de donde se retirarán los fondos.</td>
</tr>
<tr>
<td>amount</td>
<td><strong><em>numeric</em></strong> (requerido) <br/>Cantidad del cargo. Debe ser una cantidad mayor a cero, con hasta dos dígitos decimales.</td>
</tr>
<tr>
<td>description</td>
<td><strong><em>string</em></strong> (requerido, longitud = 250) <br/>Una descripción asociada al cargo.</td>
</tr>
<tr>
<td>order_id</td>
<td><strong><em>string</em></strong> (opcional, longitud = 100) <br/>Identificador único del cargo. Debe ser único entre todas las transacciones.</td>
</tr>
<tr>
<td>device_session_id</td>
<td><strong><em>string</em></strong> (opcional, longitud = 255) <br/>Identificador del dispositivo generado con la herramienta anti-fraudes</td>
</tr>
<tr>
<td>capture</td>
<td><strong><em>boolean</em></strong> (opcional, default = true) <br/>Indica si el cargo se hace o no inmediatamente, cuando el valor es false el cargo se maneja como una autorización (o pre-autorización) y solo se reserva el monto para ser confirmado o cancelado en una segunda llamada.</td>
</tr>
</tbody></table>

<h3 id="respuesta">Respuesta</h3>

<p>Regresa un <a href="#objeto-transacción">objeto de transacción</a> con la información del cargo o una <a href="#objeto-error">respuesta de error</a>.</p>

<h2 id="cargo-a-nueva-tarjeta">Cargo a nueva tarjeta</h2>

<blockquote>
<p>Definición</p>
</blockquote>
<pre class="highlight shell">Comercio
POST https://sandbox-api.openpay.mx/v1/<span class="o">{</span>MERCHANT_ID<span class="o">}</span>/charges

Cliente
POST https://sandbox-api.openpay.mx/v1/<span class="o">{</span>MERCHANT_ID<span class="o">}</span>/customers/<span class="o">{</span>CUSTOMER_ID<span class="o">}</span>/charges
</pre><pre class="highlight php"><span class="cp">&lt;?</span>
<span class="c1">//Comercio
</span><span class="nv">$openpay</span><span class="o">-&gt;</span><span class="na">charges</span><span class="o">-&gt;</span><span class="na">create</span><span class="p">(</span><span class="nx">chargeRequest</span><span class="p">);</span>

<span class="c1">//Cliente
</span><span class="nv">$customer</span> <span class="o">=</span> <span class="nv">$openpay</span><span class="o">-&gt;</span><span class="na">customers</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="nx">customerId</span><span class="p">);</span>
<span class="nv">$customer</span><span class="o">-&gt;</span><span class="na">charges</span><span class="o">-&gt;</span><span class="na">create</span><span class="p">(</span><span class="nx">chargeRequest</span><span class="p">);</span>
<span class="cp">?&gt;</span>
</pre><pre class="highlight java"><span class="c1">//Cliente</span>
<span class="n">openpayAPI</span><span class="o">.</span><span class="na">charges</span><span class="o">().</span><span class="na">create</span><span class="o">(</span><span class="n">String</span> <span class="n">customerId</span><span class="o">,</span> <span class="n">CreateCardChargeParams</span> <span class="n">request</span><span class="o">);</span>

<span class="c1">//Comercio</span>
<span class="n">openpayAPI</span><span class="o">.</span><span class="na">charges</span><span class="o">().</span><span class="na">create</span><span class="o">(</span><span class="n">CreateCardChargeParams</span> <span class="n">request</span><span class="o">);</span>
</pre><pre class="highlight csharp"><span class="c1">//Cliente
</span><span class="n">openpayAPI</span><span class="p">.</span><span class="n">ChargeService</span><span class="p">.</span><span class="nf">Create</span><span class="p">(</span><span class="kt">string</span> <span class="n">customer_id</span><span class="p">,</span> <span class="n">ChargeRequest</span> <span class="n">request</span><span class="p">);</span>

<span class="c1">//Comercio
</span><span class="n">openpayAPI</span><span class="p">.</span><span class="n">ChargeService</span><span class="p">.</span><span class="nf">Create</span><span class="p">(</span><span class="n">ChargeRequest</span> <span class="n">request</span><span class="p">);</span>
</pre><pre class="highlight javascript"><span class="c1">//Comercio
</span><span class="nx">openpay</span><span class="p">.</span><span class="nx">charges</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="nx">chargeRequest</span><span class="p">,</span> <span class="nx">callback</span><span class="p">);</span>

<span class="c1">//Cliente
</span><span class="nx">openpay</span><span class="p">.</span><span class="nx">customers</span><span class="p">.</span><span class="nx">charges</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="nx">customerId</span><span class="p">,</span> <span class="nx">chargeRequest</span><span class="p">,</span> <span class="nx">callback</span><span class="p">);</span>
</pre><pre class="highlight ruby"><span class="c1">#Cliente</span>
<span class="vi">@charges</span><span class="o">=</span><span class="vi">@openpay</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span><span class="ss">:charges</span><span class="p">)</span>
<span class="vi">@charges</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span><span class="n">request_hash</span><span class="p">,</span> <span class="n">customer_id</span><span class="p">)</span>

<span class="c1">#Comercio</span>
<span class="vi">@charges</span><span class="o">=</span><span class="vi">@openpay</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span><span class="ss">:charges</span><span class="p">)</span>
<span class="vi">@charges</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span><span class="n">request_hash</span><span class="p">)</span>
</pre>
<blockquote>
<p>Ejemplo de petición con cliente</p>
</blockquote>
<pre class="highlight shell">curl https://sandbox-api.openpay.mx/v1/mzdtln0bmtms6o3kck8f/customers/ag4nktpdzebjiye1tlze/charges <span class="se">\</span>
   -u sk_e568c42a6c384b7ab02cd47d2e407cab: <span class="se">\</span>
   -H <span class="s2">"Content-type: application/json"</span> <span class="se">\</span>
   -X POST -d <span class="s1">'{
   "card": {
      "card_number": "4111111111111111",
      "holder_name": "Juan Perez Ramirez",
      "expiration_year": "20",
      "expiration_month": "12",
      "cvv2": "110"
   },
   "method" : "card",
   "amount" : 100,
   "description" : "Cargo inicial a mi cuenta",
   "order_id" : "oid-00052"
} '</span> 
</pre><pre class="highlight php"><span class="cp">&lt;?</span>
<span class="nv">$openpay</span> <span class="o">=</span> <span class="nx">Openpay</span><span class="o">::</span><span class="na">getInstance</span><span class="p">(</span><span class="s1">'mzdtln0bmtms6o3kck8f'</span><span class="p">,</span> <span class="s1">'sk_e568c42a6c384b7ab02cd47d2e407cab'</span><span class="p">);</span>

<span class="nv">$card</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">'card_number'</span> <span class="o">=&gt;</span> <span class="s1">'4111111111111111'</span><span class="p">,</span>
    <span class="s1">'holder_name'</span> <span class="o">=&gt;</span> <span class="s1">'Juan Perez Ramirez'</span><span class="p">,</span>
    <span class="s1">'expiration_year'</span> <span class="o">=&gt;</span> <span class="s1">'20'</span><span class="p">,</span>
    <span class="s1">'expiration_month'</span> <span class="o">=&gt;</span> <span class="s1">'12'</span><span class="p">,</span>
    <span class="s1">'cvv2'</span> <span class="o">=&gt;</span> <span class="s1">'110'</span><span class="p">);</span>

<span class="nv">$chargeRequest</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">'method'</span> <span class="o">=&gt;</span> <span class="s1">'card'</span><span class="p">,</span>
    <span class="s1">'card'</span> <span class="o">=&gt;</span> <span class="nv">$card</span><span class="p">,</span>
    <span class="s1">'amount'</span> <span class="o">=&gt;</span> <span class="mi">100</span><span class="p">,</span>
    <span class="s1">'description'</span> <span class="o">=&gt;</span> <span class="s1">'Cargo inicial a mi cuenta'</span><span class="p">,</span>
    <span class="s1">'order_id'</span> <span class="o">=&gt;</span> <span class="s1">'oid-00052'</span><span class="p">);</span>

<span class="nv">$customer</span> <span class="o">=</span> <span class="nv">$openpay</span><span class="o">-&gt;</span><span class="na">customers</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">'ag4nktpdzebjiye1tlze'</span><span class="p">);</span>
<span class="nv">$charge</span> <span class="o">=</span> <span class="nv">$customer</span><span class="o">-&gt;</span><span class="na">charges</span><span class="o">-&gt;</span><span class="na">create</span><span class="p">(</span><span class="nv">$chargeRequest</span><span class="p">);</span>
<span class="cp">?&gt;</span>
</pre><pre class="highlight java"><span class="n">OpenpayAPI</span> <span class="n">api</span> <span class="o">=</span> <span class="k">new</span> <span class="n">OpenpayAPI</span><span class="o">(</span><span class="s">"https://sandbox-api.openpay.mx"</span><span class="o">,</span> <span class="s">"sk_b05586ec98454522ac7d4ccdcaec9128"</span><span class="o">,</span> <span class="s">"maonhzpqm8xp2ydssovf"</span><span class="o">);</span>
<span class="n">CreateCardChargeParams</span> <span class="n">request</span> <span class="o">=</span> <span class="k">new</span> <span class="n">CreateCardChargeParams</span><span class="o">();</span>
<span class="n">Card</span> <span class="n">card</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Card</span><span class="o">();</span>
<span class="n">card</span><span class="o">.</span><span class="na">holderName</span><span class="o">(</span><span class="s">"Juan Perez Ramirez"</span><span class="o">);</span>
<span class="n">card</span><span class="o">.</span><span class="na">cardNumber</span><span class="o">(</span><span class="s">"4111111111111111"</span><span class="o">);</span>
<span class="n">card</span><span class="o">.</span><span class="na">cvv2</span><span class="o">(</span><span class="s">"110"</span><span class="o">);</span>
<span class="n">card</span><span class="o">.</span><span class="na">expirationMonth</span><span class="o">(</span><span class="mi">12</span><span class="o">);</span>
<span class="n">card</span><span class="o">.</span><span class="na">expirationYear</span><span class="o">(</span><span class="mi">20</span><span class="o">);</span>
<span class="n">request</span><span class="o">.</span><span class="na">amount</span><span class="o">(</span><span class="k">new</span> <span class="n">BigDecimal</span><span class="o">(</span><span class="s">"100.00"</span><span class="o">));</span>
<span class="n">request</span><span class="o">.</span><span class="na">description</span><span class="o">(</span><span class="s">"Cargo inicial a mi cuenta"</span><span class="o">);</span>
<span class="n">request</span><span class="o">.</span><span class="na">card</span><span class="o">(</span><span class="n">card</span><span class="o">);</span>
<span class="n">request</span><span class="o">.</span><span class="na">orderId</span><span class="o">(</span><span class="s">"oid-00052"</span><span class="o">);</span>
<span class="n">request</span><span class="o">.</span><span class="na">deviceSessionId</span><span class="o">(</span><span class="s">"kR1MiQhz2otdIuUlQkbEyitIqVMiI16f"</span><span class="o">);</span>
<span class="n">request</span><span class="o">.</span><span class="na">capture</span><span class="o">(</span><span class="n">Boolean</span><span class="o">.</span><span class="na">TRUE</span><span class="o">);</span>

<span class="n">Charge</span> <span class="kt">char</span><span class="n">ge</span> <span class="o">=</span> <span class="n">api</span><span class="o">.</span><span class="na">charges</span><span class="o">().</span><span class="na">create</span><span class="o">(</span><span class="s">"ag4nktpdzebjiye1tlze"</span><span class="o">,</span> <span class="n">request</span><span class="o">);</span>
</pre><pre class="highlight csharp"><span class="n">OpenpayAPI</span> <span class="n">api</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">OpenpayAPI</span><span class="p">(</span><span class="s">"sk_b05586ec98454522ac7d4ccdcaec9128"</span><span class="p">,</span> <span class="s">"maonhzpqm8xp2ydssovf"</span><span class="p">);</span>
<span class="n">ChargeRequest</span> <span class="n">request</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">ChargeRequest</span><span class="p">();</span>
<span class="n">request</span><span class="p">.</span><span class="n">Method</span> <span class="p">=</span> <span class="s">"card"</span><span class="p">;</span>
<span class="n">Card</span> <span class="n">card</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">Card</span><span class="p">();</span>
<span class="n">card</span><span class="p">.</span><span class="n">HolderName</span> <span class="p">=</span> <span class="s">"Juan Perez Ramirez"</span><span class="p">;</span>
<span class="n">card</span><span class="p">.</span><span class="n">CardNumber</span> <span class="p">=</span> <span class="s">"4111111111111111"</span><span class="p">;</span>
<span class="n">card</span><span class="p">.</span><span class="n">Cvv2</span> <span class="p">=</span> <span class="s">"110"</span><span class="p">;</span>
<span class="n">card</span><span class="p">.</span><span class="n">ExpirationMonth</span> <span class="p">=</span> <span class="s">"12"</span><span class="p">;</span>
<span class="n">card</span><span class="p">.</span><span class="n">ExpirationYear</span> <span class="p">=</span> <span class="s">"20"</span><span class="p">;</span>
<span class="n">request</span><span class="p">.</span><span class="n">Card</span> <span class="p">=</span> <span class="n">card</span><span class="p">;</span>
<span class="n">request</span><span class="p">.</span><span class="n">Amount</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">Decimal</span><span class="p">(</span><span class="m">9.99</span><span class="p">);</span>
<span class="n">request</span><span class="p">.</span><span class="n">Description</span> <span class="p">=</span> <span class="s">"Cargo inicial a mi cuenta"</span><span class="p">;</span>
<span class="n">request</span><span class="p">.</span><span class="n">OrderId</span> <span class="p">=</span> <span class="s">"oid-00052"</span><span class="p">;</span>
<span class="n">request</span><span class="p">.</span><span class="n">DeviceSessionId</span> <span class="p">=</span> <span class="s">"kR1MiQhz2otdIuUlQkbEyitIqVMiI16f"</span><span class="p">;</span>
<span class="n">request</span><span class="p">.</span><span class="n">Capture</span> <span class="p">=</span> <span class="k">true</span><span class="p">;</span>

<span class="n">Charge</span> <span class="n">charge</span> <span class="p">=</span> <span class="n">api</span><span class="p">.</span><span class="n">ChargeService</span><span class="p">.</span><span class="nf">Create</span><span class="p">(</span><span class="s">"ag4nktpdzebjiye1tlze"</span><span class="p">,</span> <span class="n">request</span><span class="p">);</span>
</pre><pre class="highlight javascript"><span class="kd">var</span> <span class="nx">chargeRequest</span> <span class="o">=</span> <span class="p">{</span>
   <span class="s1">'card'</span><span class="err">:</span> <span class="p">{</span>
      <span class="s1">'card_number'</span><span class="err">:</span> <span class="s1">'4111111111111111'</span><span class="p">,</span>
      <span class="s1">'holder_name'</span><span class="err">:</span> <span class="s1">'Juan Perez Ramirez'</span><span class="p">,</span>
      <span class="s1">'expiration_year'</span><span class="err">:</span> <span class="s1">'20'</span><span class="p">,</span>
      <span class="s1">'expiration_month'</span><span class="err">:</span> <span class="s1">'12'</span><span class="p">,</span>
      <span class="s1">'cvv2'</span><span class="err">:</span> <span class="s1">'110'</span>
   <span class="p">},</span>
   <span class="s1">'method'</span> <span class="err">:</span> <span class="s1">'card'</span><span class="p">,</span>
   <span class="s1">'amount'</span> <span class="err">:</span> <span class="mi">100</span><span class="p">,</span>
   <span class="s1">'description'</span> <span class="err">:</span> <span class="s1">'Cargo inicial a mi cuenta'</span><span class="p">,</span>
   <span class="s1">'order_id'</span> <span class="err">:</span> <span class="s1">'oid-00052'</span>
<span class="p">};</span>

<span class="nx">openpay</span><span class="p">.</span><span class="nx">customers</span><span class="p">.</span><span class="nx">charges</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="s1">'ag4nktpdzebjiye1tlze'</span><span class="p">,</span> <span class="nx">chargeRequest</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">charge</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// ...
</span><span class="p">});</span>
</pre><pre class="highlight ruby"><span class="vi">@openpay</span><span class="o">=</span><span class="no">OpenpayApi</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="s2">"moiep6umtcnanql3jrxp"</span><span class="p">,</span><span class="s2">"sk_3433941e467c4875b178ce26348b0fac"</span><span class="p">)</span>
<span class="vi">@charges</span><span class="o">=</span><span class="vi">@openpay</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span><span class="ss">:charges</span><span class="p">)</span>
<span class="n">card_hash</span><span class="o">=</span><span class="p">{</span>
     <span class="s2">"holder_name"</span> <span class="o">=&gt;</span> <span class="s2">"Juan Perez Ramirez"</span><span class="p">,</span>
     <span class="s2">"card_number"</span> <span class="o">=&gt;</span> <span class="s2">"4111111111111111"</span><span class="p">,</span>
     <span class="s2">"cvv2"</span> <span class="o">=&gt;</span> <span class="s2">"110"</span><span class="p">,</span>
     <span class="s2">"expiration_month"</span> <span class="o">=&gt;</span> <span class="s2">"12"</span><span class="p">,</span>
     <span class="s2">"expiration_year"</span> <span class="o">=&gt;</span> <span class="s2">"20"</span>
   <span class="p">}</span>
<span class="n">request_hash</span><span class="o">=</span><span class="p">{</span>
     <span class="s2">"method"</span> <span class="o">=&gt;</span> <span class="s2">"card"</span><span class="p">,</span>
     <span class="s2">"card"</span> <span class="o">=&gt;</span> <span class="n">card_hash</span><span class="p">,</span>   
     <span class="s2">"amount"</span> <span class="o">=&gt;</span> <span class="mi">100</span><span class="o">.</span><span class="mo">00</span><span class="p">,</span>
     <span class="s2">"description"</span> <span class="o">=&gt;</span> <span class="s2">"Cargo inicial a mi cuenta"</span><span class="p">,</span>
     <span class="s2">"order_id"</span> <span class="o">=&gt;</span> <span class="s2">"oid-00052"</span><span class="p">,</span>
     <span class="s2">"device_session_id"</span> <span class="o">=&gt;</span> <span class="s2">"kR1MiQhz2otdIuUlQkbEyitIqVMiI16f"</span>
   <span class="p">}</span>

<span class="n">response_hash</span><span class="o">=</span><span class="vi">@charges</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span><span class="n">request_hash</span><span class="p">.</span><span class="nf">to_hash</span><span class="p">,</span> <span class="s2">"ag4nktpdzebjiye1tlze"</span><span class="p">)</span>
</pre>
<blockquote>
<p>Ejemplo de respuesta</p>
</blockquote>
<pre class="highlight json"><span class="p">{</span><span class="w">
   </span><span class="s2">"id"</span><span class="p">:</span><span class="s2">"tr6cxbcefzatd10guvvw"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"amount"</span><span class="p">:</span><span class="mf">100.00</span><span class="p">,</span><span class="w">
   </span><span class="s2">"authorization"</span><span class="p">:</span><span class="s2">"801585"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"method"</span><span class="p">:</span><span class="s2">"card"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"operation_type"</span><span class="p">:</span><span class="s2">"in"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"transaction_type"</span><span class="p">:</span><span class="s2">"charge"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"card"</span><span class="p">:{</span><span class="w">
      </span><span class="s2">"type"</span><span class="p">:</span><span class="s2">"debit"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"brand"</span><span class="p">:</span><span class="s2">"visa"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"address"</span><span class="p">:</span><span class="err">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"card_number"</span><span class="p">:</span><span class="s2">"411111XXXXXX1111"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"holder_name"</span><span class="p">:</span><span class="s2">"Juan Perez Ramirez"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"expiration_year"</span><span class="p">:</span><span class="s2">"20"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"expiration_month"</span><span class="p">:</span><span class="s2">"12"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"allows_charges"</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="s2">"allows_payouts"</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="s2">"bank_name"</span><span class="p">:</span><span class="s2">"Banamex"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"bank_code"</span><span class="p">:</span><span class="s2">"002"</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="s2">"status"</span><span class="p">:</span><span class="s2">"completed"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"currency"</span><span class="p">:</span><span class="s2">"MXN"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"creation_date"</span><span class="p">:</span><span class="s2">"2014-05-26T11:56:25-05:00"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"operation_date"</span><span class="p">:</span><span class="s2">"2014-05-26T11:56:25-05:00"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"description"</span><span class="p">:</span><span class="s2">"Cargo inicial a mi cuenta"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"error_message"</span><span class="p">:</span><span class="err">null</span><span class="p">,</span><span class="w">
   </span><span class="s2">"order_id"</span><span class="p">:</span><span class="s2">"oid-00052"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"customer_id"</span><span class="p">:</span><span class="s2">"ag4nktpdzebjiye1tlze"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></pre>
<p>En este tipo de invocación es necesario enviar toda la información de la tarjeta, la cual solo será usada para esta venta y no será almacenada en el sistema. Esto lo puedes usar para realizar ventas directas en donde no requieres la tarjeta para un uso futuro.</p>

<p>La propiedad <code>device_Session_Id</code> deberá ser generada desde el API JavaScript, véase <a href="https://github.com/open-pay/openpay-js#fraud-detection-using-device-data">Fraud detection using device data</a>.</p>

<h3 id="petición">Petición</h3>

<table><thead>
<tr>
<th>Propiedad</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>method</td>
<td><strong><em>string</em></strong> (requerido) <br/>Debe contener el valor <strong>card</strong> para hacer un cargo de una tarjeta registrada.</td>
</tr>
<tr>
<td>card</td>
<td><strong><em>objeto</em></strong> (requerido) <br/> Datos de la tarjeta de la cual se retirarán los fondos. Ver <a href="#crear-una-tarjeta">objeto tarjeta</a></td>
</tr>
<tr>
<td>amount</td>
<td><strong><em>numeric</em></strong> (requerido) <br/>Cantidad del cargo. Debe ser una cantidad mayor a cero, con hasta dos dígitos decimales.</td>
</tr>
<tr>
<td>description</td>
<td><strong><em>string</em></strong> (requerido, longitud = 250) <br/>Una descripción asociada al cargo.</td>
</tr>
<tr>
<td>order_id</td>
<td><strong><em>string</em></strong> (opcional, longitud = 100) <br/>Identificador único del cargo. Debe ser único entre todas las transacciones.</td>
</tr>
<tr>
<td>device_session_id</td>
<td><strong><em>string</em></strong> (opcional, longitud = 255) <br/>Identificador del dispositivo generado con la herramienta anti-fraudes</td>
</tr>
<tr>
<td>capture</td>
<td><strong><em>boolean</em></strong> (opcional, default = true) <br/>Indica si el cargo se hace o no inmediatamente, cuando el valor es false el cargo se maneja como una autorización (o pre-autorización) y solo se reserva el monto para ser confirmado o cancelado en una segunda llamada.</td>
</tr>
</tbody></table>

<h3 id="respuesta">Respuesta</h3>

<p>Regresa un <a href="#objeto-transacción">objeto de transacción</a> con la información del cargo o una <a href="#objeto-error">respuesta de error</a>.</p>

<h2 id="cargo-en-tienda">Cargo en tienda</h2>

<blockquote>
<p>Definición</p>
</blockquote>
<pre class="highlight shell">Comercio
POST https://sandbox-api.openpay.mx/v1/<span class="o">{</span>MERCHANT_ID<span class="o">}</span>/charges

Cliente
POST https://sandbox-api.openpay.mx/v1/<span class="o">{</span>MERCHANT_ID<span class="o">}</span>/customers/<span class="o">{</span>CUSTOMER_ID<span class="o">}</span>/charges
</pre><pre class="highlight php"><span class="cp">&lt;?</span>
<span class="nx">Comercio</span>
<span class="nv">$openpay</span><span class="o">-&gt;</span><span class="na">charges</span><span class="o">-&gt;</span><span class="na">create</span><span class="p">(</span><span class="nx">chargeRequest</span><span class="p">);</span>

<span class="nx">Cliente</span>
<span class="nv">$customer</span> <span class="o">=</span> <span class="nv">$openpay</span><span class="o">-&gt;</span><span class="na">customers</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="nx">customerId</span><span class="p">);</span>
<span class="nv">$customer</span><span class="o">-&gt;</span><span class="na">charges</span><span class="o">-&gt;</span><span class="na">create</span><span class="p">(</span><span class="nx">chargeRequest</span><span class="p">;</span>
<span class="cp">?&gt;</span>
</pre><pre class="highlight java"><span class="c1">//Cliente</span>
<span class="n">openpayAPI</span><span class="o">.</span><span class="na">charges</span><span class="o">().</span><span class="na">create</span><span class="o">(</span><span class="n">String</span> <span class="n">customerId</span><span class="o">,</span> <span class="n">CreateStoreChargeParams</span> <span class="n">request</span><span class="o">);</span>

<span class="c1">//Comercio</span>
<span class="n">openpayAPI</span><span class="o">.</span><span class="na">charges</span><span class="o">().</span><span class="na">create</span><span class="o">(</span><span class="n">CreateStoreChargeParams</span> <span class="n">request</span><span class="o">);</span>
</pre><pre class="highlight csharp"><span class="c1">//Cliente
</span><span class="n">openpayAPI</span><span class="p">.</span><span class="n">ChargeService</span><span class="p">.</span><span class="nf">Create</span><span class="p">(</span><span class="kt">string</span> <span class="n">customer_id</span><span class="p">,</span> <span class="n">ChargeRequest</span> <span class="n">request</span><span class="p">);</span>

<span class="c1">//Comercio
</span><span class="n">openpayAPI</span><span class="p">.</span><span class="n">ChargeService</span><span class="p">.</span><span class="nf">Create</span><span class="p">(</span><span class="n">ChargeRequest</span> <span class="n">request</span><span class="p">);</span>
</pre><pre class="highlight javascript"><span class="c1">//Comercio
</span><span class="nx">openpay</span><span class="p">.</span><span class="nx">charges</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="nx">chargeRequest</span><span class="p">,</span> <span class="nx">callback</span><span class="p">);</span>

<span class="c1">//Cliente
</span><span class="nx">openpay</span><span class="p">.</span><span class="nx">customers</span><span class="p">.</span><span class="nx">charges</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="nx">customerId</span><span class="p">,</span> <span class="nx">chargeRequest</span><span class="p">,</span> <span class="nx">callback</span><span class="p">);</span>
</pre><pre class="highlight ruby"><span class="c1">#Cliente</span>
<span class="vi">@charges</span><span class="o">=</span><span class="vi">@openpay</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span><span class="ss">:charges</span><span class="p">)</span>
<span class="vi">@charges</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span><span class="n">request_hash</span><span class="p">,</span> <span class="n">customer_id</span><span class="p">)</span>

<span class="c1">#Comercio</span>
<span class="vi">@charges</span><span class="o">=</span><span class="vi">@openpay</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span><span class="ss">:charges</span><span class="p">)</span>
<span class="vi">@charges</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span><span class="n">request_hash</span><span class="p">)</span>
</pre>
<blockquote>
<p>Ejemplo de petición con cliente</p>
</blockquote>
<pre class="highlight shell">curl https://sandbox-api.openpay.mx/v1/mzdtln0bmtms6o3kck8f/customers/ag4nktpdzebjiye1tlze/charges <span class="se">\</span>
   -u sk_e568c42a6c384b7ab02cd47d2e407cab: <span class="se">\</span>
   -H <span class="s2">"Content-type: application/json"</span> <span class="se">\</span>
   -X POST -d <span class="s1">'{
   "method" : "store",
   "amount" : 100,
   "description" : "Cargo con tienda",
   "order_id" : "oid-00053"
} '</span> 
</pre><pre class="highlight php"><span class="cp">&lt;?</span>
<span class="nv">$openpay</span> <span class="o">=</span> <span class="nx">Openpay</span><span class="o">::</span><span class="na">getInstance</span><span class="p">(</span><span class="s1">'mzdtln0bmtms6o3kck8f'</span><span class="p">,</span> <span class="s1">'sk_e568c42a6c384b7ab02cd47d2e407cab'</span><span class="p">);</span>

<span class="nv">$chargeRequest</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">'method'</span> <span class="o">=&gt;</span> <span class="s1">'store'</span><span class="p">,</span>
    <span class="s1">'amount'</span> <span class="o">=&gt;</span> <span class="mi">100</span><span class="p">,</span>
    <span class="s1">'description'</span> <span class="o">=&gt;</span> <span class="s1">'Cargo con tienda'</span><span class="p">,</span>
    <span class="s1">'order_id'</span> <span class="o">=&gt;</span> <span class="s1">'oid-00053'</span><span class="p">);</span>

<span class="nv">$customer</span> <span class="o">=</span> <span class="nv">$openpay</span><span class="o">-&gt;</span><span class="na">customers</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">'ag4nktpdzebjiye1tlze'</span><span class="p">);</span>
<span class="nv">$charge</span> <span class="o">=</span> <span class="nv">$customer</span><span class="o">-&gt;</span><span class="na">charges</span><span class="o">-&gt;</span><span class="na">create</span><span class="p">(</span><span class="nv">$chargeRequest</span><span class="p">);</span>
<span class="cp">?&gt;</span>
</pre><pre class="highlight java"><span class="n">OpenpayAPI</span> <span class="n">api</span> <span class="o">=</span> <span class="k">new</span> <span class="n">OpenpayAPI</span><span class="o">(</span><span class="s">"https://sandbox-api.openpay.mx"</span><span class="o">,</span> <span class="s">"sk_b05586ec98454522ac7d4ccdcaec9128"</span><span class="o">,</span> <span class="s">"maonhzpqm8xp2ydssovf"</span><span class="o">);</span>
<span class="n">CreateStoreChargeParams</span> <span class="n">request</span> <span class="o">=</span> <span class="k">new</span> <span class="n">CreateStoreChargeParams</span><span class="o">();</span>
<span class="n">request</span><span class="o">.</span><span class="na">amount</span><span class="o">(</span><span class="k">new</span> <span class="n">BigDecimal</span><span class="o">(</span><span class="s">"100.00"</span><span class="o">));</span>
<span class="n">request</span><span class="o">.</span><span class="na">description</span><span class="o">(</span><span class="s">"Cargo con tienda"</span><span class="o">);</span>
<span class="n">request</span><span class="o">.</span><span class="na">orderId</span><span class="o">(</span><span class="s">"oid-00053"</span><span class="o">);</span>

<span class="n">Charge</span> <span class="kt">char</span><span class="n">ge</span> <span class="o">=</span> <span class="n">api</span><span class="o">.</span><span class="na">charges</span><span class="o">().</span><span class="na">create</span><span class="o">(</span><span class="s">"ag4nktpdzebjiye1tlze"</span><span class="o">,</span> <span class="n">request</span><span class="o">);</span>
</pre><pre class="highlight csharp"><span class="n">OpenpayAPI</span> <span class="n">api</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">OpenpayAPI</span><span class="p">(</span><span class="s">"sk_b05586ec98454522ac7d4ccdcaec9128"</span><span class="p">,</span> <span class="s">"maonhzpqm8xp2ydssovf"</span><span class="p">);</span>
<span class="n">ChargeRequest</span> <span class="n">request</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">ChargeRequest</span><span class="p">();</span>
<span class="n">request</span><span class="p">.</span><span class="n">Method</span> <span class="p">=</span> <span class="s">"store"</span><span class="p">;</span>
<span class="n">request</span><span class="p">.</span><span class="n">Amount</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">Decimal</span><span class="p">(</span><span class="m">100.00</span><span class="p">);</span>
<span class="n">request</span><span class="p">.</span><span class="n">Description</span> <span class="p">=</span> <span class="s">"Cargo con tienda"</span><span class="p">;</span>
<span class="n">request</span><span class="p">.</span><span class="n">OrderId</span> <span class="p">=</span> <span class="s">"oid-00053"</span><span class="p">;</span>

<span class="n">Charge</span> <span class="n">charge</span> <span class="p">=</span> <span class="n">api</span><span class="p">.</span><span class="n">ChargeService</span><span class="p">.</span><span class="nf">Create</span><span class="p">(</span><span class="s">"ag4nktpdzebjiye1tlze"</span><span class="p">,</span> <span class="n">request</span><span class="p">);</span>
</pre><pre class="highlight javascript"><span class="kd">var</span> <span class="nx">storeChargeRequest</span> <span class="o">=</span> <span class="p">{</span>
   <span class="s1">'method'</span> <span class="err">:</span> <span class="s1">'store'</span><span class="p">,</span>
   <span class="s1">'amount'</span> <span class="err">:</span> <span class="mi">100</span><span class="p">,</span>
   <span class="s1">'description'</span> <span class="err">:</span> <span class="s1">'Cargo con tienda'</span><span class="p">,</span>
   <span class="s1">'order_id'</span> <span class="err">:</span> <span class="s1">'oid-00053'</span>
<span class="p">};</span>

<span class="nx">openpay</span><span class="p">.</span><span class="nx">customers</span><span class="p">.</span><span class="nx">charges</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="s1">'ag4nktpdzebjiye1tlze'</span><span class="p">,</span> <span class="nx">storeChargeRequest</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">charge</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// ...
</span><span class="p">});</span>
</pre><pre class="highlight ruby"><span class="vi">@openpay</span><span class="o">=</span><span class="no">OpenpayApi</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="s2">"moiep6umtcnanql3jrxp"</span><span class="p">,</span><span class="s2">"sk_3433941e467c4875b178ce26348b0fac"</span><span class="p">)</span>
<span class="vi">@charges</span><span class="o">=</span><span class="vi">@openpay</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span><span class="ss">:charges</span><span class="p">)</span>
<span class="n">request_hash</span><span class="o">=</span><span class="p">{</span>
     <span class="s2">"method"</span> <span class="o">=&gt;</span> <span class="s2">"store"</span><span class="p">,</span>
     <span class="s2">"amount"</span> <span class="o">=&gt;</span> <span class="mi">100</span><span class="o">.</span><span class="mo">00</span><span class="p">,</span>
     <span class="s2">"description"</span> <span class="o">=&gt;</span> <span class="s2">"Cargo con tienda"</span><span class="p">,</span>
     <span class="s2">"order_id"</span> <span class="o">=&gt;</span> <span class="s2">"oid-00053"</span>
   <span class="p">}</span>

<span class="n">response_hash</span><span class="o">=</span><span class="vi">@charges</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span><span class="n">request_hash</span><span class="p">.</span><span class="nf">to_hash</span><span class="p">,</span> <span class="s2">"ag4nktpdzebjiye1tlze"</span><span class="p">)</span>
</pre>
<blockquote>
<p>Ejemplo de respuesta</p>
</blockquote>
<pre class="highlight json"><span class="p">{</span><span class="w">
   </span><span class="s2">"id"</span><span class="p">:</span><span class="s2">"trnirkiyobo5qfex55ef"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"amount"</span><span class="p">:</span><span class="mf">100.00</span><span class="p">,</span><span class="w">
   </span><span class="s2">"authorization"</span><span class="p">:</span><span class="err">null</span><span class="p">,</span><span class="w">
   </span><span class="s2">"method"</span><span class="p">:</span><span class="s2">"store"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"operation_type"</span><span class="p">:</span><span class="s2">"in"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"transaction_type"</span><span class="p">:</span><span class="s2">"charge"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"status"</span><span class="p">:</span><span class="s2">"in_progress"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"currency"</span><span class="p">:</span><span class="s2">"MXN"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"creation_date"</span><span class="p">:</span><span class="s2">"2014-05-26T13:48:25-05:00"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"operation_date"</span><span class="p">:</span><span class="s2">"2014-05-26T13:48:25-05:00"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"description"</span><span class="p">:</span><span class="s2">"Cargo con tienda"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"error_message"</span><span class="p">:</span><span class="err">null</span><span class="p">,</span><span class="w">
   </span><span class="s2">"order_id"</span><span class="p">:</span><span class="s2">"oid-00053"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"customer_id"</span><span class="p">:</span><span class="s2">"ag4nktpdzebjiye1tlze"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"payment_method"</span><span class="p">:{</span><span class="w">
      </span><span class="s2">"type"</span><span class="p">:</span><span class="s2">"store"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"reference"</span><span class="p">:</span><span class="s2">"000020TRNIRKIYOBO5QFEX55EF0100009"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"barcode_url"</span><span class="p">:</span><span class="s2">"https://sandbox-api.openpay.mx/barcode/000020TRNIRKIYOBO5QFEX55EF0100009?width=1&amp;height=45&amp;text=false"</span><span class="w">
   </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></pre>
<p>Para un pago en una tienda de conveniencia se debe crear un petición de tipo cargo indicando como método <strong>store</strong>. Esto generará una respuesta con un número de referencia y una URL a un código de barras, los cuales debes de utilizar para crear un recibo a tu cliente y que con él pueda realizar el pago en una de las tienda de conveniencia aceptadas. El código de barras es de tipo Code 128.</p>

<h3 id="petición">Petición</h3>

<table><thead>
<tr>
<th>Propiedad</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>method</td>
<td><strong><em>string</em></strong> (requerido) <br/>Debe contener el valor <strong>store</strong> para hacer un cargo de una tarjeta registrada.</td>
</tr>
<tr>
<td>amount</td>
<td><strong><em>numeric</em></strong> (requerido) <br/>Cantidad del cargo. Debe ser una cantidad mayor a cero, con hasta dos dígitos decimales.</td>
</tr>
<tr>
<td>description</td>
<td><strong><em>string</em></strong> (requerido, longitud = 250) <br/>Una descripción asociada al cargo.</td>
</tr>
<tr>
<td>order_id</td>
<td><strong><em>string</em></strong> (opcional, longitud = 100) <br/>Identificador único del cargo. Debe ser único entre todas las transacciones.</td>
</tr>
</tbody></table>

<h3 id="respuesta">Respuesta</h3>

<p>Regresa un <a href="#objeto-transacción">objeto de transacción</a> con la información del cargo o una <a href="#objeto-error">respuesta de error</a>.</p>

<h2 id="cargo-en-banco">Cargo en banco</h2>

<blockquote>
<p>Definición</p>
</blockquote>
<pre class="highlight shell">Comercio
POST https://sandbox-api.openpay.mx/v1/<span class="o">{</span>MERCHANT_ID<span class="o">}</span>/charges

Cliente
POST https://sandbox-api.openpay.mx/v1/<span class="o">{</span>MERCHANT_ID<span class="o">}</span>/customers/<span class="o">{</span>CUSTOMER_ID<span class="o">}</span>/charges
</pre><pre class="highlight php"><span class="cp">&lt;?</span>
<span class="nx">Comercio</span>
<span class="nv">$openpay</span><span class="o">-&gt;</span><span class="na">charges</span><span class="o">-&gt;</span><span class="na">create</span><span class="p">(</span><span class="nx">chargeRequest</span><span class="p">);</span>

<span class="nx">Cliente</span>
<span class="nv">$customer</span> <span class="o">=</span> <span class="nv">$openpay</span><span class="o">-&gt;</span><span class="na">customers</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="nx">customerId</span><span class="p">);</span>
<span class="nv">$customer</span><span class="o">-&gt;</span><span class="na">charges</span><span class="o">-&gt;</span><span class="na">create</span><span class="p">(</span><span class="nx">chargeRequest</span><span class="p">);</span>
<span class="cp">?&gt;</span>
</pre><pre class="highlight java"><span class="c1">//Cliente</span>
<span class="n">openpayAPI</span><span class="o">.</span><span class="na">charges</span><span class="o">().</span><span class="na">create</span><span class="o">(</span><span class="n">String</span> <span class="n">customerId</span><span class="o">,</span> <span class="n">CreateBankChargeParams</span> <span class="n">request</span><span class="o">);</span>

<span class="c1">//Comercio</span>
<span class="n">openpayAPI</span><span class="o">.</span><span class="na">charges</span><span class="o">().</span><span class="na">create</span><span class="o">(</span><span class="n">CreateBankChargeParams</span> <span class="n">request</span><span class="o">);</span>
</pre><pre class="highlight csharp"><span class="c1">//Cliente
</span><span class="n">openpayAPI</span><span class="p">.</span><span class="n">ChargeService</span><span class="p">.</span><span class="nf">Create</span><span class="p">(</span><span class="kt">string</span> <span class="n">customer_id</span><span class="p">,</span> <span class="n">ChargeRequest</span> <span class="n">request</span><span class="p">);</span>

<span class="c1">//Comercio
</span><span class="n">openpayAPI</span><span class="p">.</span><span class="n">ChargeService</span><span class="p">.</span><span class="nf">Create</span><span class="p">(</span><span class="n">ChargeRequest</span> <span class="n">request</span><span class="p">);</span>
</pre><pre class="highlight javascript"><span class="c1">// Comercio
</span><span class="nx">openpay</span><span class="p">.</span><span class="nx">charges</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="nx">chargeRequest</span><span class="p">,</span> <span class="nx">callback</span><span class="p">);</span>

<span class="c1">// Cliente
</span><span class="nx">openpay</span><span class="p">.</span><span class="nx">customers</span><span class="p">.</span><span class="nx">charges</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="nx">customerId</span><span class="p">,</span> <span class="nx">chargeRequest</span><span class="p">,</span> <span class="nx">callback</span><span class="p">);</span>
</pre><pre class="highlight ruby"><span class="c1">#Cliente</span>
<span class="vi">@charges</span><span class="o">=</span><span class="vi">@openpay</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span><span class="ss">:charges</span><span class="p">)</span>
<span class="vi">@charges</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span><span class="n">request_hash</span><span class="p">,</span> <span class="n">customer_id</span><span class="p">)</span>

<span class="c1">#Comercio</span>
<span class="vi">@charges</span><span class="o">=</span><span class="vi">@openpay</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span><span class="ss">:charges</span><span class="p">)</span>
<span class="vi">@charges</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span><span class="n">request_hash</span><span class="p">)</span>
</pre>
<blockquote>
<p>Ejemplo de petición con cliente</p>
</blockquote>
<pre class="highlight shell">curl https://sandbox-api.openpay.mx/v1/mzdtln0bmtms6o3kck8f/customers/ag4nktpdzebjiye1tlze/charges <span class="se">\</span>
   -u sk_e568c42a6c384b7ab02cd47d2e407cab: <span class="se">\</span>
   -H <span class="s2">"Content-type: application/json"</span> <span class="se">\</span>
   -X POST -d <span class="s1">'{
   "method" : "bank_account",
   "amount" : 100,
   "description" : "Cargo con banco",
   "order_id" : "oid-00055"
} '</span> 
</pre><pre class="highlight php"><span class="cp">&lt;?</span>
<span class="nv">$openpay</span> <span class="o">=</span> <span class="nx">Openpay</span><span class="o">::</span><span class="na">getInstance</span><span class="p">(</span><span class="s1">'mzdtln0bmtms6o3kck8f'</span><span class="p">,</span> <span class="s1">'sk_e568c42a6c384b7ab02cd47d2e407cab'</span><span class="p">);</span>

<span class="nv">$chargeRequest</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">'method'</span> <span class="o">=&gt;</span> <span class="s1">'bank_account'</span><span class="p">,</span>
    <span class="s1">'amount'</span> <span class="o">=&gt;</span> <span class="mi">100</span><span class="p">,</span>
    <span class="s1">'description'</span> <span class="o">=&gt;</span> <span class="s1">'Cargo con banco'</span><span class="p">,</span>
    <span class="s1">'order_id'</span> <span class="o">=&gt;</span> <span class="s1">'oid-00055'</span><span class="p">);</span>

<span class="nv">$customer</span> <span class="o">=</span> <span class="nv">$openpay</span><span class="o">-&gt;</span><span class="na">customers</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">'ag4nktpdzebjiye1tlze'</span><span class="p">);</span>
<span class="nv">$charge</span> <span class="o">=</span> <span class="nv">$customer</span><span class="o">-&gt;</span><span class="na">charges</span><span class="o">-&gt;</span><span class="na">create</span><span class="p">(</span><span class="nv">$chargeRequest</span><span class="p">);</span>
<span class="cp">?&gt;</span>
</pre><pre class="highlight java"><span class="n">OpenpayAPI</span> <span class="n">api</span> <span class="o">=</span> <span class="k">new</span> <span class="n">OpenpayAPI</span><span class="o">(</span><span class="s">"https://sandbox-api.openpay.mx"</span><span class="o">,</span> <span class="s">"sk_b05586ec98454522ac7d4ccdcaec9128"</span><span class="o">,</span> <span class="s">"maonhzpqm8xp2ydssovf"</span><span class="o">);</span>
<span class="n">CreateBankChargeParams</span> <span class="n">request</span> <span class="o">=</span> <span class="k">new</span> <span class="n">CreateBankChargeParams</span><span class="o">();</span>
<span class="n">request</span><span class="o">.</span><span class="na">amount</span><span class="o">(</span><span class="k">new</span> <span class="n">BigDecimal</span><span class="o">(</span><span class="s">"100.00"</span><span class="o">));</span>
<span class="n">request</span><span class="o">.</span><span class="na">description</span><span class="o">(</span><span class="s">"Cargo con banco"</span><span class="o">);</span>
<span class="n">request</span><span class="o">.</span><span class="na">orderId</span><span class="o">(</span><span class="s">"oid-00053"</span><span class="o">);</span>

<span class="n">Charge</span> <span class="kt">char</span><span class="n">ge</span> <span class="o">=</span> <span class="n">api</span><span class="o">.</span><span class="na">charges</span><span class="o">().</span><span class="na">create</span><span class="o">(</span><span class="s">"ag4nktpdzebjiye1tlze"</span><span class="o">,</span> <span class="n">request</span><span class="o">);</span>
</pre><pre class="highlight csharp"><span class="n">OpenpayAPI</span> <span class="n">api</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">OpenpayAPI</span><span class="p">(</span><span class="s">"sk_b05586ec98454522ac7d4ccdcaec9128"</span><span class="p">,</span> <span class="s">"maonhzpqm8xp2ydssovf"</span><span class="p">);</span>
<span class="n">ChargeRequest</span> <span class="n">request</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">ChargeRequest</span><span class="p">();</span>
<span class="n">request</span><span class="p">.</span><span class="n">Method</span> <span class="p">=</span> <span class="s">"bank_account"</span><span class="p">;</span>
<span class="n">request</span><span class="p">.</span><span class="n">Amount</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">Decimal</span><span class="p">(</span><span class="m">100.00</span><span class="p">);</span>
<span class="n">request</span><span class="p">.</span><span class="n">Description</span> <span class="p">=</span> <span class="s">"Cargo con banco"</span><span class="p">;</span>
<span class="n">request</span><span class="p">.</span><span class="n">OrderId</span> <span class="p">=</span> <span class="s">"oid-00053"</span><span class="p">;</span>

<span class="n">Charge</span> <span class="n">charge</span> <span class="p">=</span> <span class="n">api</span><span class="p">.</span><span class="n">ChargeService</span><span class="p">.</span><span class="nf">Create</span><span class="p">(</span><span class="s">"ag4nktpdzebjiye1tlze"</span><span class="p">,</span> <span class="n">request</span><span class="p">);</span>
</pre><pre class="highlight javascript"><span class="kd">var</span> <span class="nx">bankChargeRequest</span> <span class="o">=</span> <span class="p">{</span>
   <span class="s1">'method'</span> <span class="err">:</span> <span class="s1">'bank_account'</span><span class="p">,</span>
   <span class="s1">'amount'</span> <span class="err">:</span> <span class="mi">100</span><span class="p">,</span>
   <span class="s1">'description'</span> <span class="err">:</span> <span class="s1">'Cargo con banco'</span><span class="p">,</span>
   <span class="s1">'order_id'</span> <span class="err">:</span> <span class="s1">'oid-00055'</span>
<span class="p">};</span>

<span class="nx">openpay</span><span class="p">.</span><span class="nx">customers</span><span class="p">.</span><span class="nx">charges</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="s1">'ag4nktpdzebjiye1tlze'</span><span class="p">,</span> <span class="nx">bankChargeRequest</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">charge</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// ...
</span><span class="p">});</span>

</pre><pre class="highlight ruby"><span class="vi">@openpay</span><span class="o">=</span><span class="no">OpenpayApi</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="s2">"moiep6umtcnanql3jrxp"</span><span class="p">,</span><span class="s2">"sk_3433941e467c4875b178ce26348b0fac"</span><span class="p">)</span>
<span class="vi">@charges</span><span class="o">=</span><span class="vi">@openpay</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span><span class="ss">:charges</span><span class="p">)</span>
<span class="n">request_hash</span><span class="o">=</span><span class="p">{</span>
     <span class="s2">"method"</span> <span class="o">=&gt;</span> <span class="s2">"bank_account"</span><span class="p">,</span>
     <span class="s2">"amount"</span> <span class="o">=&gt;</span> <span class="mi">100</span><span class="o">.</span><span class="mo">00</span><span class="p">,</span>
     <span class="s2">"description"</span> <span class="o">=&gt;</span> <span class="s2">"Cargo con banco"</span><span class="p">,</span>
     <span class="s2">"order_id"</span> <span class="o">=&gt;</span> <span class="s2">"oid-00053"</span>
   <span class="p">}</span>

<span class="n">response_hash</span><span class="o">=</span><span class="vi">@charges</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span><span class="n">request_hash</span><span class="p">.</span><span class="nf">to_hash</span><span class="p">,</span> <span class="s2">"ag4nktpdzebjiye1tlze"</span><span class="p">)</span>
</pre>
<blockquote>
<p>Ejemplo de respuesta</p>
</blockquote>
<pre class="highlight json"><span class="p">{</span><span class="w">
   </span><span class="s2">"id"</span><span class="p">:</span><span class="s2">"trnzf2xjwpupjfryyj23"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"amount"</span><span class="p">:</span><span class="mf">100.00</span><span class="p">,</span><span class="w">
   </span><span class="s2">"authorization"</span><span class="p">:</span><span class="err">null</span><span class="p">,</span><span class="w">
   </span><span class="s2">"method"</span><span class="p">:</span><span class="s2">"bank_account"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"operation_type"</span><span class="p">:</span><span class="s2">"in"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"transaction_type"</span><span class="p">:</span><span class="s2">"charge"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"status"</span><span class="p">:</span><span class="s2">"in_progress"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"currency"</span><span class="p">:</span><span class="s2">"MXN"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"creation_date"</span><span class="p">:</span><span class="s2">"2014-05-26T13:51:25-05:00"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"operation_date"</span><span class="p">:</span><span class="s2">"2014-05-26T13:51:25-05:00"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"description"</span><span class="p">:</span><span class="s2">"Cargo con banco"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"error_message"</span><span class="p">:</span><span class="err">null</span><span class="p">,</span><span class="w">
   </span><span class="s2">"order_id"</span><span class="p">:</span><span class="s2">"oid-00055"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"customer_id"</span><span class="p">:</span><span class="s2">"ag4nktpdzebjiye1tlze"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"payment_method"</span><span class="p">:{</span><span class="w">
      </span><span class="s2">"type"</span><span class="p">:</span><span class="s2">"bank_transfer"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"bank"</span><span class="p">:</span><span class="s2">"STP"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"clabe"</span><span class="p">:</span><span class="s2">"646180109400135624"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"name"</span><span class="p">:</span><span class="s2">"0021589"</span><span class="w">
   </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></pre>
<p>Para un cargo a banco se debe crear una petición de tipo cargo indicando como método <strong>bank_account</strong>. Esto te generará una respuesta con un número de CLABE bancaria y una descripción, estos datos los debes de indicar a tu cliente en un recibo para que realice la transferencia vía SPEI. </p>

<h3 id="petición">Petición</h3>

<table><thead>
<tr>
<th>Propiedad</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>method</td>
<td><strong><em>string</em></strong> (requerido) <br/>Debe contener el valor <strong>bank_account</strong> para hacer un cargo de una tarjeta registrada.</td>
</tr>
<tr>
<td>amount</td>
<td><strong><em>numeric</em></strong> (requerido) <br/>Cantidad del cargo. Debe ser una cantidad mayor a cero, con hasta dos dígitos decimales.</td>
</tr>
<tr>
<td>description</td>
<td><strong><em>string</em></strong> (requerido, longitud = 250) <br/>Una descripción asociada al cargo.</td>
</tr>
<tr>
<td>order_id</td>
<td><strong><em>string</em></strong> (opcional, longitud = 100) <br/>Identificador único del cargo. Debe ser único entre todas las transacciones.</td>
</tr>
</tbody></table>

<h3 id="respuesta">Respuesta</h3>

<p>Regresa un <a href="#objeto-transacción">objeto de transacción</a> con la información del cargo o una <a href="#objeto-error">respuesta de error</a>.</p>

<h2 id="confirmar-un-cargo">Confirmar un cargo</h2>

<blockquote>
<p>Definición</p>
</blockquote>
<pre class="highlight shell">Comercio
POST https://sandbox-api.openpay.mx/v1/<span class="o">{</span>MERCHANT_ID<span class="o">}</span>/charges/<span class="o">{</span>TRANSACTION_ID<span class="o">}</span>/capture

Cliente
POST https://sandbox-api.openpay.mx/v1/<span class="o">{</span>MERCHANT_ID<span class="o">}</span>/customers/<span class="o">{</span>CUSTOMER_ID<span class="o">}</span>/charges/<span class="o">{</span>TRANSACTION_ID<span class="o">}</span>/capture
</pre><pre class="highlight php"><span class="cp">&lt;?</span>
<span class="nx">Comercio</span>
<span class="nv">$charge</span> <span class="o">=</span> <span class="nv">$openpay</span><span class="o">-&gt;</span><span class="na">charges</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="nx">transactionId</span><span class="p">);</span>
<span class="nv">$charge</span><span class="o">-&gt;</span><span class="na">capture</span><span class="p">(</span><span class="nx">captureData</span><span class="p">);</span>

<span class="nx">Cliente</span>
<span class="nv">$customer</span> <span class="o">=</span> <span class="nv">$openpay</span><span class="o">-&gt;</span><span class="na">customers</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="nx">customerId</span><span class="p">);</span>
<span class="nv">$charge</span> <span class="o">=</span> <span class="nv">$customer</span><span class="o">-&gt;</span><span class="na">charges</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="nx">transactionId</span><span class="p">);</span>
<span class="nv">$charge</span><span class="o">-&gt;</span><span class="na">capture</span><span class="p">(</span><span class="nx">captureData</span><span class="p">);</span>
<span class="cp">?&gt;</span>
</pre><pre class="highlight java"><span class="c1">//Cliente</span>
<span class="n">openpayAPI</span><span class="o">.</span><span class="na">charges</span><span class="o">().</span><span class="na">confirmCapture</span><span class="o">(</span><span class="n">String</span> <span class="n">customerId</span><span class="o">,</span> <span class="n">ConfirmCaptureParams</span> <span class="n">request</span><span class="o">);</span>

<span class="c1">//Comercio</span>
<span class="n">openpayAPI</span><span class="o">.</span><span class="na">charges</span><span class="o">().</span><span class="na">confirmCapture</span><span class="o">(</span><span class="n">ConfirmCaptureParams</span> <span class="n">request</span><span class="o">);</span>
</pre><pre class="highlight csharp"><span class="c1">//Cliente
</span><span class="n">openpayAPI</span><span class="p">.</span><span class="n">ChargeService</span><span class="p">.</span><span class="nf">Capture</span><span class="p">(</span><span class="kt">string</span> <span class="n">customer_id</span><span class="p">,</span> <span class="kt">string</span> <span class="n">transaction_id</span><span class="p">,</span> <span class="n">Decimal</span><span class="p">?</span> <span class="n">amount</span><span class="p">);</span>

<span class="c1">//Comercio
</span><span class="n">openpayAPI</span><span class="p">.</span><span class="n">ChargeService</span><span class="p">.</span><span class="nf">Capture</span><span class="p">(</span><span class="kt">string</span> <span class="n">transaction_id</span><span class="p">,</span> <span class="n">Decimal</span><span class="p">?</span> <span class="n">amount</span><span class="p">);</span>
</pre><pre class="highlight javascript"><span class="c1">// Comercio
</span><span class="nx">openpay</span><span class="p">.</span><span class="nx">charges</span><span class="p">.</span><span class="nx">capture</span><span class="p">(</span><span class="nx">transactionId</span><span class="p">,</span> <span class="nx">captureRequest</span><span class="p">,</span> <span class="nx">callback</span><span class="p">);</span>

<span class="c1">// Cliente
</span><span class="nx">openpay</span><span class="p">.</span><span class="nx">customers</span><span class="p">.</span><span class="nx">charges</span><span class="p">.</span><span class="nx">capture</span><span class="p">(</span><span class="nx">customerId</span><span class="p">,</span> <span class="nx">transactionId</span><span class="p">,</span> <span class="nx">captureRequest</span><span class="p">,</span> <span class="nx">callback</span><span class="p">);</span>
</pre><pre class="highlight ruby"><span class="c1">#Cliente</span>
<span class="vi">@charges</span><span class="o">=</span><span class="vi">@openpay</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span><span class="ss">:charges</span><span class="p">)</span>
<span class="vi">@charges</span><span class="p">.</span><span class="nf">capture</span><span class="p">(</span><span class="n">transaction_id</span><span class="p">,</span> <span class="n">customer_id</span><span class="p">)</span>

<span class="c1">#Comercio</span>
<span class="vi">@charges</span><span class="o">=</span><span class="vi">@openpay</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span><span class="ss">:charges</span><span class="p">)</span>
<span class="vi">@charges</span><span class="p">.</span><span class="nf">capture</span><span class="p">(</span><span class="n">transaction_id</span><span class="p">)</span>
</pre>
<blockquote>
<p>Ejemplo de petición con cliente</p>
</blockquote>
<pre class="highlight shell">curl https://sandbox-api.openpay.mx/v1/mzdtln0bmtms6o3kck8f/customers/ag4nktpdzebjiye1tlze/charges/tryqihxac3msedn4yxed/capture <span class="se">\</span>
   -u sk_e568c42a6c384b7ab02cd47d2e407cab: <span class="se">\</span>
   -H <span class="s2">"Content-type: application/json"</span> <span class="se">\</span>
   -X POST -d <span class="s1">'{
    "amount" : 100.00
} '</span> 
</pre><pre class="highlight php"><span class="cp">&lt;?</span>
<span class="nv">$openpay</span> <span class="o">=</span> <span class="nx">Openpay</span><span class="o">::</span><span class="na">getInstance</span><span class="p">(</span><span class="s1">'mzdtln0bmtms6o3kck8f'</span><span class="p">,</span> <span class="s1">'sk_e568c42a6c384b7ab02cd47d2e407cab'</span><span class="p">);</span>

<span class="nv">$captureData</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span><span class="s1">'amount'</span> <span class="o">=&gt;</span> <span class="mf">100.00</span><span class="p">);</span>

<span class="nv">$customer</span> <span class="o">=</span> <span class="nv">$openpay</span><span class="o">-&gt;</span><span class="na">customers</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">'ag4nktpdzebjiye1tlze'</span><span class="p">);</span>
<span class="nv">$charge</span> <span class="o">=</span> <span class="nv">$customer</span><span class="o">-&gt;</span><span class="na">charges</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">'tryqihxac3msedn4yxed'</span><span class="p">);</span>
<span class="nv">$charge</span><span class="o">-&gt;</span><span class="na">capture</span><span class="p">(</span><span class="nv">$captureData</span><span class="p">);</span>
<span class="cp">?&gt;</span>
</pre><pre class="highlight java"><span class="n">OpenpayAPI</span> <span class="n">api</span> <span class="o">=</span> <span class="k">new</span> <span class="n">OpenpayAPI</span><span class="o">(</span><span class="s">"https://sandbox-api.openpay.mx"</span><span class="o">,</span> <span class="s">"sk_b05586ec98454522ac7d4ccdcaec9128"</span><span class="o">,</span> <span class="s">"maonhzpqm8xp2ydssovf"</span><span class="o">);</span>
<span class="n">ConfirmCaptureParams</span> <span class="n">request</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ConfirmCaptureParams</span><span class="o">();</span>
<span class="n">request</span><span class="o">.</span><span class="na">chargeId</span><span class="o">(</span><span class="s">"tryqihxac3msedn4yxed"</span><span class="o">);</span>
<span class="n">request</span><span class="o">.</span><span class="na">amount</span><span class="o">(</span><span class="k">new</span> <span class="n">BigDecimal</span><span class="o">(</span><span class="s">"100.00"</span><span class="o">));</span>

<span class="n">Charge</span> <span class="kt">char</span><span class="n">ge</span> <span class="o">=</span> <span class="n">api</span><span class="o">.</span><span class="na">charges</span><span class="o">().</span><span class="na">confirmCapture</span><span class="o">(</span><span class="s">"ag4nktpdzebjiye1tlze"</span><span class="o">,</span> <span class="n">request</span><span class="o">);</span>
</pre><pre class="highlight csharp"><span class="n">OpenpayAPI</span> <span class="n">api</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">OpenpayAPI</span><span class="p">(</span><span class="s">"sk_b05586ec98454522ac7d4ccdcaec9128"</span><span class="p">,</span> <span class="s">"maonhzpqm8xp2ydssovf"</span><span class="p">);</span>
<span class="n">Charge</span> <span class="n">charge</span> <span class="p">=</span> <span class="n">api</span><span class="p">.</span><span class="n">ChargeService</span><span class="p">.</span><span class="nf">Capture</span><span class="p">(</span><span class="s">"ag4nktpdzebjiye1tlze"</span><span class="p">,</span> <span class="s">"tryqihxac3msedn4yxed"</span><span class="p">,</span> <span class="k">new</span> <span class="nf">Decimal</span><span class="p">(</span><span class="m">100.00</span><span class="p">));</span>
</pre><pre class="highlight javascript"><span class="kd">var</span> <span class="nx">captureRequest</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s1">'amount'</span> <span class="err">:</span> <span class="mf">100.00</span>
<span class="p">};</span>

<span class="nx">openpay</span><span class="p">.</span><span class="nx">customers</span><span class="p">.</span><span class="nx">charges</span><span class="p">.</span><span class="nx">capture</span><span class="p">(</span><span class="s1">'ag4nktpdzebjiye1tlze'</span><span class="p">,</span> <span class="s1">'tryqihxac3msedn4yxed'</span><span class="p">,</span> <span class="nx">captureRequest</span><span class="p">,</span> 
    <span class="kd">function</span><span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">charge</span><span class="p">){</span>
  <span class="c1">// ...
</span><span class="p">});</span>
</pre><pre class="highlight ruby"><span class="vi">@openpay</span><span class="o">=</span><span class="no">OpenpayApi</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="s2">"moiep6umtcnanql3jrxp"</span><span class="p">,</span><span class="s2">"sk_3433941e467c4875b178ce26348b0fac"</span><span class="p">)</span>
<span class="vi">@charges</span><span class="o">=</span><span class="vi">@openpay</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span><span class="ss">:charges</span><span class="p">)</span>

<span class="n">response_hash</span><span class="o">=</span><span class="vi">@charges</span><span class="p">.</span><span class="nf">capture</span><span class="p">(</span><span class="s2">"tryqihxac3msedn4yxed"</span><span class="p">,</span> <span class="s2">"ag4nktpdzebjiye1tlze"</span><span class="p">)</span>
</pre>
<blockquote>
<p>Ejemplo de respuesta</p>
</blockquote>
<pre class="highlight json"><span class="p">{</span><span class="w">
   </span><span class="s2">"id"</span><span class="p">:</span><span class="s2">"tryqihxac3msedn4yxed"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"amount"</span><span class="p">:</span><span class="mf">100.00</span><span class="p">,</span><span class="w">
   </span><span class="s2">"authorization"</span><span class="p">:</span><span class="s2">"801585"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"method"</span><span class="p">:</span><span class="s2">"card"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"operation_type"</span><span class="p">:</span><span class="s2">"in"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"transaction_type"</span><span class="p">:</span><span class="s2">"charge"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"card"</span><span class="p">:{</span><span class="w">
      </span><span class="s2">"type"</span><span class="p">:</span><span class="s2">"debit"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"brand"</span><span class="p">:</span><span class="s2">"visa"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"address"</span><span class="p">:</span><span class="err">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"card_number"</span><span class="p">:</span><span class="s2">"411111XXXXXX1111"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"holder_name"</span><span class="p">:</span><span class="s2">"Juan Perez Ramirez"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"expiration_year"</span><span class="p">:</span><span class="s2">"20"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"expiration_month"</span><span class="p">:</span><span class="s2">"12"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"allows_charges"</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="s2">"allows_payouts"</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="s2">"bank_name"</span><span class="p">:</span><span class="s2">"Banamex"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"bank_code"</span><span class="p">:</span><span class="s2">"002"</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="s2">"status"</span><span class="p">:</span><span class="s2">"completed"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"currency"</span><span class="p">:</span><span class="s2">"MXN"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"creation_date"</span><span class="p">:</span><span class="s2">"2014-05-26T14:00:17-05:00"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"operation_date"</span><span class="p">:</span><span class="s2">"2014-05-26T14:00:17-05:00"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"description"</span><span class="p">:</span><span class="s2">"Cargo inicial a mi cuenta"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"error_message"</span><span class="p">:</span><span class="err">null</span><span class="p">,</span><span class="w">
   </span><span class="s2">"order_id"</span><span class="p">:</span><span class="err">null</span><span class="p">,</span><span class="w">
   </span><span class="s2">"customer_id"</span><span class="p">:</span><span class="s2">"ag4nktpdzebjiye1tlze"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></pre>
<p>Confirmar un cargo creado con la propieda de <code>capture = &quot;false&quot;</code>,  este método es la segunda parte de la <a href="#con-id-de-tarjeta-o-token">creación de un cargo con tarjeta (id o token)</a> y puede confirmar el monto capturado en la primera llamada o un monto menor.</p>

<p><aside class="notice">
<strong>Nota:</strong> Solo se pueden confirmar cargos a tarjeta. Para cancelar el cargo creado se debe hacer una llamada al método <a href="#devolver-un-cargo">Devolver un cargo</a>
</aside></p>

<h3 id="petición">Petición</h3>

<table><thead>
<tr>
<th>Propiedad</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>amount</td>
<td><strong><em>numeric</em></strong> (requerido) <br/>Cantidad a confirmar. Puede ser menor o igual al monto capturado hasta dos dígitos decimales.</td>
</tr>
</tbody></table>

<h3 id="respuesta">Respuesta</h3>

<p>Regresa un <a href="#objeto-transacción">objeto de transacción</a> con la información del cargo o una <a href="#objeto-error">respuesta de error</a>.</p>

<h2 id="devolver-un-cargo">Devolver un cargo</h2>

<blockquote>
<p>Definición</p>
</blockquote>
<pre class="highlight shell">Comercio
POST https://sandbox-api.openpay.mx/v1/<span class="o">{</span>MERCHANT_ID<span class="o">}</span>/charges/<span class="o">{</span>TRANSACTION_ID<span class="o">}</span>/refund

Cliente
POST https://sandbox-api.openpay.mx/v1/<span class="o">{</span>MERCHANT_ID<span class="o">}</span>/customers/<span class="o">{</span>CUSTOMER_ID<span class="o">}</span>/charges/<span class="o">{</span>TRANSACTION_ID<span class="o">}</span>/refund
</pre><pre class="highlight php"><span class="cp">&lt;?</span>
<span class="nx">Comercio</span>
<span class="nv">$charge</span> <span class="o">=</span> <span class="nv">$openpay</span><span class="o">-&gt;</span><span class="na">charges</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="nx">transactionId</span><span class="p">);</span>
<span class="nv">$charge</span><span class="o">-&gt;</span><span class="na">refund</span><span class="p">(</span><span class="nx">refundData</span><span class="p">);</span>

<span class="nx">Cliente</span>
<span class="nv">$customer</span> <span class="o">=</span> <span class="nv">$openpay</span><span class="o">-&gt;</span><span class="na">customers</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="nx">customerId</span><span class="p">);</span>
<span class="nv">$charge</span> <span class="o">=</span> <span class="nv">$customer</span><span class="o">-&gt;</span><span class="na">charges</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="nx">transactionId</span><span class="p">);</span>
<span class="nv">$charge</span><span class="o">-&gt;</span><span class="na">refund</span><span class="p">(</span><span class="nx">refundData</span><span class="p">);</span>
<span class="cp">?&gt;</span>
</pre><pre class="highlight java"><span class="c1">//Cliente</span>
<span class="n">openpayAPI</span><span class="o">.</span><span class="na">charges</span><span class="o">().</span><span class="na">refund</span><span class="o">(</span><span class="n">String</span> <span class="n">customerId</span><span class="o">,</span> <span class="n">RefundParams</span> <span class="n">request</span><span class="o">);</span>

<span class="c1">//Comercio</span>
<span class="n">openpayAPI</span><span class="o">.</span><span class="na">charges</span><span class="o">().</span><span class="na">refund</span><span class="o">(</span><span class="n">RefundParams</span> <span class="n">request</span><span class="o">);</span>
</pre><pre class="highlight csharp"><span class="c1">//Cliente
</span><span class="n">openpayAPI</span><span class="p">.</span><span class="n">ChargeService</span><span class="p">.</span><span class="nf">Refund</span><span class="p">(</span><span class="kt">string</span> <span class="n">customer_id</span><span class="p">,</span> <span class="kt">string</span> <span class="n">transaction_id</span><span class="p">,</span> <span class="kt">string</span> <span class="n">description</span><span class="p">);</span>

<span class="c1">//Comercio
</span><span class="n">openpayAPI</span><span class="p">.</span><span class="n">ChargeService</span><span class="p">.</span><span class="nf">Refund</span><span class="p">(</span><span class="kt">string</span> <span class="n">transaction_id</span><span class="p">,</span> <span class="kt">string</span> <span class="n">description</span><span class="p">);</span>
</pre><pre class="highlight javascript"><span class="c1">// Comercio
</span><span class="nx">openpay</span><span class="p">.</span><span class="nx">charges</span><span class="p">.</span><span class="nx">refund</span><span class="p">(</span><span class="nx">transactionId</span><span class="p">,</span> <span class="nx">refundRequest</span><span class="p">,</span> <span class="nx">callback</span><span class="p">);</span>

<span class="c1">// Cliente
</span><span class="nx">openpay</span><span class="p">.</span><span class="nx">customers</span><span class="p">.</span><span class="nx">charges</span><span class="p">.</span><span class="nx">refund</span><span class="p">(</span><span class="nx">customerId</span><span class="p">,</span> <span class="nx">transactionId</span><span class="p">,</span> <span class="nx">refundRequest</span><span class="p">,</span> <span class="nx">callback</span><span class="p">);</span>
</pre><pre class="highlight ruby"><span class="c1">#Cliente</span>
<span class="vi">@charges</span><span class="o">=</span><span class="vi">@openpay</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span><span class="ss">:charges</span><span class="p">)</span>
<span class="vi">@charges</span><span class="p">.</span><span class="nf">refund</span><span class="p">(</span><span class="n">transaction_id</span><span class="p">,</span> <span class="n">description</span><span class="p">,</span> <span class="n">customer_id</span><span class="p">)</span>

<span class="c1">#Comercio</span>
<span class="vi">@charges</span><span class="o">=</span><span class="vi">@openpay</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span><span class="ss">:charges</span><span class="p">)</span>
<span class="vi">@charges</span><span class="p">.</span><span class="nf">refund</span><span class="p">(</span><span class="n">transaction_id</span><span class="p">,</span> <span class="n">description</span><span class="p">)</span>
</pre>
<blockquote>
<p>Ejemplo de petición con cliente</p>
</blockquote>
<pre class="highlight shell">curl https://sandbox-api.openpay.mx/v1/mzdtln0bmtms6o3kck8f/customers/ag4nktpdzebjiye1tlze/charges/tr6cxbcefzatd10guvvw/refund <span class="se">\</span>
   -u sk_e568c42a6c384b7ab02cd47d2e407cab: <span class="se">\</span>
   -H <span class="s2">"Content-type: application/json"</span> <span class="se">\</span>
   -X POST -d <span class="s1">'{
   "description" : "devolución"
} '</span> 
</pre><pre class="highlight php"><span class="cp">&lt;?</span>
<span class="nv">$openpay</span> <span class="o">=</span> <span class="nx">Openpay</span><span class="o">::</span><span class="na">getInstance</span><span class="p">(</span><span class="s1">'mzdtln0bmtms6o3kck8f'</span><span class="p">,</span> <span class="s1">'sk_e568c42a6c384b7ab02cd47d2e407cab'</span><span class="p">);</span>

<span class="nv">$refundData</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span><span class="s1">'description'</span> <span class="o">=&gt;</span> <span class="s1">'devolución'</span> <span class="p">);</span>

<span class="nv">$customer</span> <span class="o">=</span> <span class="nv">$openpay</span><span class="o">-&gt;</span><span class="na">customers</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">'ag4nktpdzebjiye1tlze'</span><span class="p">);</span>
<span class="nv">$charge</span> <span class="o">=</span> <span class="nv">$customer</span><span class="o">-&gt;</span><span class="na">charges</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">'tr6cxbcefzatd10guvvw'</span><span class="p">);</span>
<span class="nv">$charge</span><span class="o">-&gt;</span><span class="na">refund</span><span class="p">(</span><span class="nv">$refundData</span><span class="p">);</span>
<span class="cp">?&gt;</span>
</pre><pre class="highlight java"><span class="n">OpenpayAPI</span> <span class="n">api</span> <span class="o">=</span> <span class="k">new</span> <span class="n">OpenpayAPI</span><span class="o">(</span><span class="s">"https://sandbox-api.openpay.mx"</span><span class="o">,</span> <span class="s">"sk_b05586ec98454522ac7d4ccdcaec9128"</span><span class="o">,</span> <span class="s">"maonhzpqm8xp2ydssovf"</span><span class="o">);</span>
<span class="n">RefundParams</span> <span class="n">request</span> <span class="o">=</span> <span class="k">new</span> <span class="n">RefundParams</span><span class="o">();</span>
<span class="n">request</span><span class="o">.</span><span class="na">chargeId</span><span class="o">(</span><span class="s">"tryqihxac3msedn4yxed"</span><span class="o">);</span>
<span class="n">request</span><span class="o">.</span><span class="na">description</span><span class="o">(</span><span class="s">"Monto de cargo devuelto"</span><span class="o">);</span>

<span class="n">Charge</span> <span class="kt">char</span><span class="n">ge</span> <span class="o">=</span> <span class="n">api</span><span class="o">.</span><span class="na">charges</span><span class="o">().</span><span class="na">refund</span><span class="o">(</span><span class="s">"ag4nktpdzebjiye1tlze"</span><span class="o">,</span> <span class="n">request</span><span class="o">);</span>
</pre><pre class="highlight csharp"><span class="n">OpenpayAPI</span> <span class="n">api</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">OpenpayAPI</span><span class="p">(</span><span class="s">"sk_b05586ec98454522ac7d4ccdcaec9128"</span><span class="p">,</span> <span class="s">"maonhzpqm8xp2ydssovf"</span><span class="p">);</span>
<span class="n">Charge</span> <span class="n">charge</span> <span class="p">=</span> <span class="n">api</span><span class="p">.</span><span class="n">ChargeService</span><span class="p">.</span><span class="nf">Refund</span><span class="p">(</span><span class="s">"ag4nktpdzebjiye1tlze"</span><span class="p">,</span> <span class="s">"tryqihxac3msedn4yxed"</span><span class="p">,</span> <span class="s">"Monto de cargo devuelto"</span><span class="p">);</span>
</pre><pre class="highlight javascript"><span class="kd">var</span> <span class="nx">refundRequest</span> <span class="o">=</span> <span class="p">{</span>
   <span class="s1">'description'</span> <span class="err">:</span> <span class="s1">'devolución'</span>
<span class="p">};</span>

<span class="nx">openpay</span><span class="p">.</span><span class="nx">customers</span><span class="p">.</span><span class="nx">charges</span><span class="p">.</span><span class="nx">refund</span><span class="p">(</span><span class="s1">'ag4nktpdzebjiye1tlze'</span><span class="p">,</span> <span class="s1">'tryqihxac3msedn4yxed'</span><span class="p">,</span> <span class="nx">refundRequest</span><span class="p">,</span> 
    <span class="kd">function</span><span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">charge</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// ...
</span><span class="p">});</span>
</pre><pre class="highlight ruby"><span class="vi">@openpay</span><span class="o">=</span><span class="no">OpenpayApi</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="s2">"moiep6umtcnanql3jrxp"</span><span class="p">,</span><span class="s2">"sk_3433941e467c4875b178ce26348b0fac"</span><span class="p">)</span>
<span class="vi">@charges</span><span class="o">=</span><span class="vi">@openpay</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span><span class="ss">:charges</span><span class="p">)</span>

<span class="n">response_hash</span><span class="o">=</span><span class="vi">@charges</span><span class="p">.</span><span class="nf">refund</span><span class="p">(</span><span class="s2">"tryqihxac3msedn4yxed"</span><span class="p">,</span> <span class="s2">"Monto de cargo devuelto"</span><span class="p">,</span> <span class="s2">"ag4nktpdzebjiye1tlze"</span><span class="p">)</span>
</pre>
<blockquote>
<p>Ejemplo de respuesta</p>
</blockquote>
<pre class="highlight json"><span class="p">{</span><span class="w">
   </span><span class="s2">"id"</span><span class="p">:</span><span class="s2">"tr6cxbcefzatd10guvvw"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"amount"</span><span class="p">:</span><span class="mf">100.00</span><span class="p">,</span><span class="w">
   </span><span class="s2">"authorization"</span><span class="p">:</span><span class="s2">"801585"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"method"</span><span class="p">:</span><span class="s2">"card"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"operation_type"</span><span class="p">:</span><span class="s2">"in"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"transaction_type"</span><span class="p">:</span><span class="s2">"charge"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"card"</span><span class="p">:{</span><span class="w">
      </span><span class="s2">"type"</span><span class="p">:</span><span class="s2">"debit"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"brand"</span><span class="p">:</span><span class="s2">"visa"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"address"</span><span class="p">:</span><span class="err">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"card_number"</span><span class="p">:</span><span class="s2">"411111XXXXXX1111"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"holder_name"</span><span class="p">:</span><span class="s2">"Juan Perez Ramirez"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"expiration_year"</span><span class="p">:</span><span class="s2">"20"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"expiration_month"</span><span class="p">:</span><span class="s2">"12"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"allows_charges"</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="s2">"allows_payouts"</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="s2">"bank_name"</span><span class="p">:</span><span class="s2">"Banamex"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"bank_code"</span><span class="p">:</span><span class="s2">"002"</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="s2">"status"</span><span class="p">:</span><span class="s2">"completed"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"refund"</span><span class="p">:{</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="s2">"trcbsmjkroqmjobxqhpb"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"amount"</span><span class="p">:</span><span class="mf">100.00</span><span class="p">,</span><span class="w">
      </span><span class="s2">"authorization"</span><span class="p">:</span><span class="s2">"801585"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"method"</span><span class="p">:</span><span class="s2">"card"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"operation_type"</span><span class="p">:</span><span class="s2">"out"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"transaction_type"</span><span class="p">:</span><span class="s2">"refund"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"status"</span><span class="p">:</span><span class="s2">"completed"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"currency"</span><span class="p">:</span><span class="s2">"MXN"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"creation_date"</span><span class="p">:</span><span class="s2">"2014-05-26T13:56:21-05:00"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"operation_date"</span><span class="p">:</span><span class="s2">"2014-05-26T13:56:21-05:00"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"description"</span><span class="p">:</span><span class="s2">"devolucion"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"error_message"</span><span class="p">:</span><span class="err">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"order_id"</span><span class="p">:</span><span class="err">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"customer_id"</span><span class="p">:</span><span class="s2">"ag4nktpdzebjiye1tlze"</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="s2">"currency"</span><span class="p">:</span><span class="s2">"MXN"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"creation_date"</span><span class="p">:</span><span class="s2">"2014-05-26T11:56:25-05:00"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"operation_date"</span><span class="p">:</span><span class="s2">"2014-05-26T11:56:25-05:00"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"description"</span><span class="p">:</span><span class="s2">"Cargo inicial a mi cuenta"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"error_message"</span><span class="p">:</span><span class="err">null</span><span class="p">,</span><span class="w">
   </span><span class="s2">"order_id"</span><span class="p">:</span><span class="s2">"oid-00052"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"customer_id"</span><span class="p">:</span><span class="s2">"ag4nktpdzebjiye1tlze"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></pre>
<p>Si deseas realizar una devolución de un cargo hecho a tarjeta puedes ocupar este método. El monto a devolver será por el total del cargo. Ten en cuenta que la devolución puede tardar en aparecer en el estado de cuenta de tu cliente de 1 a 3 días hábiles</p>

<p><aside class="notice">
<strong>Nota:</strong> Solo se pueden hacer devoluciones de cargos a tarjeta.
</aside></p>

<h3 id="petición">Petición</h3>

<table><thead>
<tr>
<th>Propiedad</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>description</td>
<td><strong><em>string</em></strong> (opcional, longitud = 250) <br/>Texto libre para describir motivo de la devolución.</td>
</tr>
</tbody></table>

<h3 id="respuesta">Respuesta</h3>

<p>Regresa un <a href="#objeto-transacción">objeto de transacción</a> con la información del cargo o una <a href="#objeto-error">respuesta de error</a>.</p>

<h2 id="obtener-un-cargo">Obtener un cargo</h2>

<blockquote>
<p>Definición</p>
</blockquote>
<pre class="highlight shell">Comercio
GET https://sandbox-api.openpay.mx/v1/<span class="o">{</span>MERCHANT_ID<span class="o">}</span>/charges/<span class="o">{</span>TRANSACTION_ID<span class="o">}</span>

Comercio
GET https://sandbox-api.openpay.mx/v1/<span class="o">{</span>MERCHANT_ID<span class="o">}</span>/customers/<span class="o">{</span>CUSTOMER_ID<span class="o">}</span>/charges/<span class="o">{</span>TRANSACTION_ID<span class="o">}</span>
</pre><pre class="highlight php"><span class="cp">&lt;?</span>
<span class="nx">Comercio</span>
<span class="nv">$charge</span> <span class="o">=</span> <span class="nv">$openpay</span><span class="o">-&gt;</span><span class="na">charges</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="nx">transactionId</span><span class="p">);</span>

<span class="nx">Cliente</span>
<span class="nv">$customer</span> <span class="o">=</span> <span class="nv">$openpay</span><span class="o">-&gt;</span><span class="na">customers</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="nx">customerId</span><span class="p">);</span>
<span class="nv">$charge</span> <span class="o">=</span> <span class="nv">$customer</span><span class="o">-&gt;</span><span class="na">charges</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="nx">transactionId</span><span class="p">);</span>
<span class="cp">?&gt;</span>
</pre><pre class="highlight java"><span class="c1">//Cliente</span>
<span class="n">openpayAPI</span><span class="o">.</span><span class="na">charges</span><span class="o">().</span><span class="na">get</span><span class="o">(</span><span class="n">String</span> <span class="n">customerId</span><span class="o">,</span> <span class="n">String</span> <span class="n">transactionId</span><span class="o">);</span>

<span class="c1">//Comercio</span>
<span class="n">openpayAPI</span><span class="o">.</span><span class="na">charges</span><span class="o">().</span><span class="na">get</span><span class="o">(</span><span class="n">String</span> <span class="n">transactionId</span><span class="o">);</span>
</pre><pre class="highlight csharp"><span class="c1">//Cliente
</span><span class="n">openpayAPI</span><span class="p">.</span><span class="n">ChargeService</span><span class="p">.</span><span class="nf">Get</span><span class="p">(</span><span class="kt">string</span> <span class="n">customer_id</span><span class="p">,</span> <span class="kt">string</span> <span class="n">transaction_id</span><span class="p">);</span>

<span class="c1">//Comercio
</span><span class="n">openpayAPI</span><span class="p">.</span><span class="n">ChargeService</span><span class="p">.</span><span class="nf">Get</span><span class="p">(</span><span class="kt">string</span> <span class="n">transaction_id</span><span class="p">);</span>
</pre><pre class="highlight javascript"><span class="c1">// Comercio
</span><span class="nx">openpay</span><span class="p">.</span><span class="nx">charges</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="nx">transactionId</span><span class="p">,</span> <span class="nx">callback</span><span class="p">);</span>

<span class="c1">// Cliente
</span><span class="nx">openpay</span><span class="p">.</span><span class="nx">customers</span><span class="p">.</span><span class="nx">charges</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="nx">customerId</span><span class="p">,</span> <span class="nx">transactionId</span><span class="p">,</span> <span class="nx">callback</span><span class="p">);</span>
</pre><pre class="highlight ruby"><span class="c1">#Cliente</span>
<span class="vi">@charges</span><span class="o">=</span><span class="vi">@openpay</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span><span class="ss">:charges</span><span class="p">)</span>
<span class="vi">@charges</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="n">transaction_id</span><span class="p">,</span> <span class="n">customerId</span><span class="p">)</span>

<span class="c1">#Comercio</span>
<span class="vi">@charges</span><span class="o">=</span><span class="vi">@openpay</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span><span class="ss">:charges</span><span class="p">)</span>
<span class="vi">@charges</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="n">transaction_id</span><span class="p">)</span>
</pre>
<blockquote>
<p>Ejemplo de petición con cliente</p>
</blockquote>
<pre class="highlight shell">curl https://sandbox-api.openpay.mx/v1/mzdtln0bmtms6o3kck8f/customers/ag4nktpdzebjiye1tlze/charges/tr6cxbcefzatd10guvvw <span class="se">\</span>
   -u sk_e568c42a6c384b7ab02cd47d2e407cab:
</pre><pre class="highlight php"><span class="cp">&lt;?</span>
<span class="nv">$openpay</span> <span class="o">=</span> <span class="nx">Openpay</span><span class="o">::</span><span class="na">getInstance</span><span class="p">(</span><span class="s1">'mzdtln0bmtms6o3kck8f'</span><span class="p">,</span> <span class="s1">'sk_e568c42a6c384b7ab02cd47d2e407cab'</span><span class="p">);</span>

<span class="nv">$customer</span> <span class="o">=</span> <span class="nv">$openpay</span><span class="o">-&gt;</span><span class="na">customers</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">'ag4nktpdzebjiye1tlze'</span><span class="p">);</span>
<span class="nv">$charge</span> <span class="o">=</span> <span class="nv">$customer</span><span class="o">-&gt;</span><span class="na">charges</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">'tr6cxbcefzatd10guvvw'</span><span class="p">);</span>
<span class="cp">?&gt;</span>
</pre><pre class="highlight java"><span class="n">OpenpayAPI</span> <span class="n">api</span> <span class="o">=</span> <span class="k">new</span> <span class="n">OpenpayAPI</span><span class="o">(</span><span class="s">"https://sandbox-api.openpay.mx"</span><span class="o">,</span> <span class="s">"sk_b05586ec98454522ac7d4ccdcaec9128"</span><span class="o">,</span> <span class="s">"maonhzpqm8xp2ydssovf"</span><span class="o">);</span>
<span class="n">Charge</span> <span class="kt">char</span><span class="n">ge</span> <span class="o">=</span> <span class="n">api</span><span class="o">.</span><span class="na">charges</span><span class="o">().</span><span class="na">get</span><span class="o">(</span><span class="s">"ag4nktpdzebjiye1tlze"</span><span class="o">,</span> <span class="s">"tr6cxbcefzatd10guvvw"</span><span class="o">);</span>
</pre><pre class="highlight csharp"><span class="n">OpenpayAPI</span> <span class="n">api</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">OpenpayAPI</span><span class="p">(</span><span class="s">"sk_b05586ec98454522ac7d4ccdcaec9128"</span><span class="p">,</span> <span class="s">"maonhzpqm8xp2ydssovf"</span><span class="p">);</span>
<span class="n">Charge</span> <span class="n">charge</span> <span class="p">=</span> <span class="n">api</span><span class="p">.</span><span class="n">ChargeService</span><span class="p">.</span><span class="nf">Get</span><span class="p">(</span><span class="s">"ag4nktpdzebjiye1tlze"</span><span class="p">,</span> <span class="s">"tryqihxac3msedn4yxed"</span><span class="p">);</span>
</pre><pre class="highlight javascript"><span class="nx">openpay</span><span class="p">.</span><span class="nx">customers</span><span class="p">.</span><span class="nx">charges</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">'ag4nktpdzebjiye1tlze'</span><span class="p">,</span> <span class="s1">'tr6cxbcefzatd10guvvw'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">charge</span><span class="p">){</span>
  <span class="c1">// ...
</span><span class="p">});</span>
</pre><pre class="highlight ruby"><span class="vi">@openpay</span><span class="o">=</span><span class="no">OpenpayApi</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="s2">"moiep6umtcnanql3jrxp"</span><span class="p">,</span><span class="s2">"sk_3433941e467c4875b178ce26348b0fac"</span><span class="p">)</span>
<span class="vi">@charges</span><span class="o">=</span><span class="vi">@openpay</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span><span class="ss">:charges</span><span class="p">)</span>

<span class="n">response_hash</span><span class="o">=</span><span class="vi">@charges</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="s2">"tr6cxbcefzatd10guvvw"</span><span class="p">,</span> <span class="s2">"ag4nktpdzebjiye1tlze"</span><span class="p">)</span>
</pre>
<blockquote>
<p>Ejemplo de respuesta</p>
</blockquote>
<pre class="highlight json"><span class="p">{</span><span class="w">
   </span><span class="s2">"id"</span><span class="p">:</span><span class="s2">"tr6cxbcefzatd10guvvw"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"amount"</span><span class="p">:</span><span class="mf">100.00</span><span class="p">,</span><span class="w">
   </span><span class="s2">"authorization"</span><span class="p">:</span><span class="s2">"801585"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"method"</span><span class="p">:</span><span class="s2">"card"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"operation_type"</span><span class="p">:</span><span class="s2">"in"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"transaction_type"</span><span class="p">:</span><span class="s2">"charge"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"card"</span><span class="p">:{</span><span class="w">
      </span><span class="s2">"type"</span><span class="p">:</span><span class="s2">"debit"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"brand"</span><span class="p">:</span><span class="s2">"visa"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"address"</span><span class="p">:</span><span class="err">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"card_number"</span><span class="p">:</span><span class="s2">"411111XXXXXX1111"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"holder_name"</span><span class="p">:</span><span class="s2">"Juan Perez Ramirez"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"expiration_year"</span><span class="p">:</span><span class="s2">"20"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"expiration_month"</span><span class="p">:</span><span class="s2">"12"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"allows_charges"</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="s2">"allows_payouts"</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="s2">"bank_name"</span><span class="p">:</span><span class="s2">"Banamex"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"bank_code"</span><span class="p">:</span><span class="s2">"002"</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="s2">"status"</span><span class="p">:</span><span class="s2">"completed"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"refund"</span><span class="p">:{</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="s2">"trcbsmjkroqmjobxqhpb"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"amount"</span><span class="p">:</span><span class="mf">100.00</span><span class="p">,</span><span class="w">
      </span><span class="s2">"authorization"</span><span class="p">:</span><span class="s2">"801585"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"method"</span><span class="p">:</span><span class="s2">"card"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"operation_type"</span><span class="p">:</span><span class="s2">"out"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"transaction_type"</span><span class="p">:</span><span class="s2">"refund"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"status"</span><span class="p">:</span><span class="s2">"completed"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"currency"</span><span class="p">:</span><span class="s2">"MXN"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"creation_date"</span><span class="p">:</span><span class="s2">"2014-05-26T13:56:21-05:00"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"operation_date"</span><span class="p">:</span><span class="s2">"2014-05-26T13:56:21-05:00"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"description"</span><span class="p">:</span><span class="s2">"devolucion"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"error_message"</span><span class="p">:</span><span class="err">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"order_id"</span><span class="p">:</span><span class="err">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"customer_id"</span><span class="p">:</span><span class="s2">"ag4nktpdzebjiye1tlze"</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="s2">"currency"</span><span class="p">:</span><span class="s2">"MXN"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"creation_date"</span><span class="p">:</span><span class="s2">"2014-05-26T11:56:25-05:00"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"operation_date"</span><span class="p">:</span><span class="s2">"2014-05-26T11:56:25-05:00"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"description"</span><span class="p">:</span><span class="s2">"Cargo inicial a mi cuenta"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"error_message"</span><span class="p">:</span><span class="err">null</span><span class="p">,</span><span class="w">
   </span><span class="s2">"order_id"</span><span class="p">:</span><span class="s2">"oid-00052"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"customer_id"</span><span class="p">:</span><span class="s2">"ag4nktpdzebjiye1tlze"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></pre>
<p>Regresa la información de un cargo generado en cualquier momento solo con conocer el id de cargo.</p>

<h3 id="petición">Petición</h3>

<table><thead>
<tr>
<th>Propiedad</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_id</td>
<td><em><strong>string</strong></em> (requerido, longitud = 45)<br/>Identificador del cargo a consultar.</td>
</tr>
</tbody></table>

<h3 id="respuesta">Respuesta</h3>

<p>Regresa un <a href="#objeto-transacción">objeto de transacción</a> con la información del cargo o una <a href="#objeto-error">respuesta de error</a>.</p>

<h2 id="listado-de-cargos">Listado de cargos</h2>

<blockquote>
<p>Definición</p>
</blockquote>
<pre class="highlight shell">Comercio
GET https://sandbox-api.openpay.mx/v1/<span class="o">{</span>MERCHANT_ID<span class="o">}</span>/charges

Comercio
GET https://sandbox-api.openpay.mx/v1/<span class="o">{</span>MERCHANT_ID<span class="o">}</span>/customers/<span class="o">{</span>CUSTOMER_ID<span class="o">}</span>/charges
</pre><pre class="highlight php"><span class="cp">&lt;?</span>
<span class="nx">Comercio</span>
<span class="nv">$chargeList</span> <span class="o">=</span> <span class="nv">$openpay</span><span class="o">-&gt;</span><span class="na">charges</span><span class="o">-&gt;</span><span class="na">getList</span><span class="p">(</span><span class="nx">searchParams</span><span class="p">);</span>

<span class="nx">Cliente</span>
<span class="nv">$customer</span> <span class="o">=</span> <span class="nv">$openpay</span><span class="o">-&gt;</span><span class="na">customers</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="nx">customerId</span><span class="p">);</span>
<span class="nv">$chargeList</span> <span class="o">=</span> <span class="nv">$customer</span><span class="o">-&gt;</span><span class="na">charges</span><span class="o">-&gt;</span><span class="na">getList</span><span class="p">(</span><span class="nx">searchParams</span><span class="p">);</span>
<span class="cp">?&gt;</span>
</pre><pre class="highlight java"><span class="c1">//Cliente</span>
<span class="n">openpayAPI</span><span class="o">.</span><span class="na">charges</span><span class="o">().</span><span class="na">list</span><span class="o">(</span><span class="n">String</span> <span class="n">customerId</span><span class="o">,</span> <span class="n">SearchParams</span> <span class="n">request</span><span class="o">);</span>

<span class="c1">//Comercio</span>
<span class="n">openpayAPI</span><span class="o">.</span><span class="na">charges</span><span class="o">().</span><span class="na">list</span><span class="o">(</span><span class="n">SearchParams</span> <span class="n">request</span><span class="o">);</span>
</pre><pre class="highlight csharp"><span class="c1">//Cliente
</span><span class="n">openpayAPI</span><span class="p">.</span><span class="n">ChargeService</span><span class="p">.</span><span class="nf">List</span><span class="p">(</span><span class="kt">string</span> <span class="n">customer_id</span><span class="p">,</span> <span class="n">SearchParams</span> <span class="n">request</span> <span class="p">=</span> <span class="k">null</span><span class="p">);</span>

<span class="c1">//Comercio
</span><span class="n">openpayAPI</span><span class="p">.</span><span class="n">ChargeService</span><span class="p">.</span><span class="nf">List</span><span class="p">(</span><span class="n">SearchParams</span> <span class="n">request</span> <span class="p">=</span> <span class="k">null</span><span class="p">);</span>
</pre><pre class="highlight javascript"><span class="c1">// Comercio
</span><span class="nx">openpay</span><span class="p">.</span><span class="nx">charges</span><span class="p">.</span><span class="nx">list</span><span class="p">(</span><span class="nx">callback</span><span class="p">);</span>
<span class="nx">openpay</span><span class="p">.</span><span class="nx">charges</span><span class="p">.</span><span class="nx">list</span><span class="p">(</span><span class="nx">searchParams</span><span class="p">,</span> <span class="nx">callback</span><span class="p">);</span>

<span class="c1">// Cliente
</span><span class="nx">openpay</span><span class="p">.</span><span class="nx">customers</span><span class="p">.</span><span class="nx">charges</span><span class="p">.</span><span class="nx">list</span><span class="p">(</span><span class="nx">customerId</span><span class="p">,</span> <span class="nx">callback</span><span class="p">);</span>
<span class="nx">openpay</span><span class="p">.</span><span class="nx">customers</span><span class="p">.</span><span class="nx">charges</span><span class="p">.</span><span class="nx">list</span><span class="p">(</span><span class="nx">customerId</span><span class="p">,</span> <span class="nx">searchParams</span><span class="p">,</span> <span class="nx">callback</span><span class="p">);</span>
</pre><pre class="highlight ruby"><span class="c1">#Cliente</span>
<span class="vi">@charges</span><span class="o">=</span><span class="vi">@openpay</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span><span class="ss">:charges</span><span class="p">)</span>
<span class="vi">@charges</span><span class="p">.</span><span class="nf">all</span><span class="p">(</span><span class="n">customer_id</span><span class="p">)</span>

<span class="c1">#Comercio</span>
<span class="vi">@charges</span><span class="o">=</span><span class="vi">@openpay</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span><span class="ss">:charges</span><span class="p">)</span>
<span class="vi">@charges</span><span class="p">.</span><span class="nf">all</span>
</pre>
<blockquote>
<p>Ejemplo de petición con cliente</p>
</blockquote>
<pre class="highlight shell">curl -g <span class="s2">"https://sandbox-api.openpay.mx/v1/mzdtln0bmtms6o3kck8f/customers/ag4nktpdzebjiye1tlze/charges?creation[gte]=2013-11-01&amp;limit=2"</span> <span class="se">\</span>
   -u sk_e568c42a6c384b7ab02cd47d2e407cab: 
</pre><pre class="highlight php"><span class="cp">&lt;?</span>
<span class="nv">$openpay</span> <span class="o">=</span> <span class="nx">Openpay</span><span class="o">::</span><span class="na">getInstance</span><span class="p">(</span><span class="s1">'mzdtln0bmtms6o3kck8f'</span><span class="p">,</span> <span class="s1">'sk_e568c42a6c384b7ab02cd47d2e407cab'</span><span class="p">);</span>

<span class="nv">$searchParams</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">'creation[gte]'</span> <span class="o">=&gt;</span> <span class="s1">'2013-11-01'</span><span class="p">,</span>
    <span class="s1">'creation[lte]'</span> <span class="o">=&gt;</span> <span class="s1">'2014-11-01'</span><span class="p">,</span>
    <span class="s1">'offset'</span> <span class="o">=&gt;</span> <span class="mi">0</span><span class="p">,</span>
    <span class="s1">'limit'</span> <span class="o">=&gt;</span> <span class="mi">2</span><span class="p">);</span>

<span class="nv">$customer</span> <span class="o">=</span> <span class="nv">$openpay</span><span class="o">-&gt;</span><span class="na">customers</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">'ag4nktpdzebjiye1tlze'</span><span class="p">);</span>
<span class="nv">$chargeList</span> <span class="o">=</span> <span class="nv">$customer</span><span class="o">-&gt;</span><span class="na">charges</span><span class="o">-&gt;</span><span class="na">getList</span><span class="p">(</span><span class="nv">$searchParams</span><span class="p">);</span>
<span class="cp">?&gt;</span>
</pre><pre class="highlight java"><span class="kd">final</span> <span class="n">Calendar</span> <span class="n">dateGte</span> <span class="o">=</span> <span class="n">Calendar</span><span class="o">.</span><span class="na">getInstance</span><span class="o">();</span>
<span class="kd">final</span> <span class="n">Calendar</span> <span class="n">dateLte</span> <span class="o">=</span> <span class="n">Calendar</span><span class="o">.</span><span class="na">getInstance</span><span class="o">();</span>
<span class="n">dateGte</span><span class="o">.</span><span class="na">set</span><span class="o">(</span><span class="mi">2014</span><span class="o">,</span> <span class="mi">5</span><span class="o">,</span> <span class="mi">1</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span> <span class="mi">0</span><span class="o">);</span>
<span class="n">dateLte</span><span class="o">.</span><span class="na">set</span><span class="o">(</span><span class="mi">2014</span><span class="o">,</span> <span class="mi">5</span><span class="o">,</span> <span class="mi">15</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span> <span class="mi">0</span><span class="o">);</span>

<span class="n">OpenpayAPI</span> <span class="n">api</span> <span class="o">=</span> <span class="k">new</span> <span class="n">OpenpayAPI</span><span class="o">(</span><span class="s">"https://sandbox-api.openpay.mx"</span><span class="o">,</span> <span class="s">"sk_b05586ec98454522ac7d4ccdcaec9128"</span><span class="o">,</span> <span class="s">"maonhzpqm8xp2ydssovf"</span><span class="o">);</span>
<span class="n">SearchParams</span> <span class="n">request</span> <span class="o">=</span> <span class="k">new</span> <span class="n">SearchParams</span><span class="o">();</span>
<span class="n">request</span><span class="o">.</span><span class="na">creationGte</span><span class="o">(</span><span class="n">dateGte</span><span class="o">.</span><span class="na">getTime</span><span class="o">());</span>
<span class="n">request</span><span class="o">.</span><span class="na">creationLte</span><span class="o">(</span><span class="n">dateLte</span><span class="o">.</span><span class="na">getTime</span><span class="o">());</span>
<span class="n">request</span><span class="o">.</span><span class="na">offset</span><span class="o">(</span><span class="mi">0</span><span class="o">);</span>
<span class="n">request</span><span class="o">.</span><span class="na">limit</span><span class="o">(</span><span class="mi">100</span><span class="o">);</span>
<span class="n">request</span><span class="o">.</span><span class="na">amount</span><span class="o">(</span><span class="k">new</span> <span class="n">BigDecimal</span><span class="o">(</span><span class="s">"100.00"</span><span class="o">));</span>

<span class="n">List</span><span class="o">&lt;</span><span class="n">Charge</span><span class="o">&gt;</span> <span class="kt">char</span><span class="n">ges</span> <span class="o">=</span> <span class="n">api</span><span class="o">.</span><span class="na">charges</span><span class="o">().</span><span class="na">list</span><span class="o">(</span><span class="s">"ag4nktpdzebjiye1tlze"</span><span class="o">,</span> <span class="n">request</span><span class="o">);</span>
</pre><pre class="highlight csharp"><span class="n">OpenpayAPI</span> <span class="n">api</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">OpenpayAPI</span><span class="p">(</span><span class="s">"sk_b05586ec98454522ac7d4ccdcaec9128"</span><span class="p">,</span> <span class="s">"maonhzpqm8xp2ydssovf"</span><span class="p">);</span>
<span class="n">SearchParams</span> <span class="n">request</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">SearchParams</span><span class="p">();</span>
<span class="n">request</span><span class="p">.</span><span class="n">CreationGte</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">Datetime</span><span class="p">(</span><span class="m">2014</span><span class="p">,</span> <span class="m">5</span><span class="p">,</span> <span class="m">1</span><span class="p">);</span>
<span class="n">request</span><span class="p">.</span><span class="n">CreationLte</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">DateTime</span><span class="p">(</span><span class="m">2014</span><span class="p">,</span> <span class="m">5</span><span class="p">,</span> <span class="m">15</span><span class="p">);</span>
<span class="n">request</span><span class="p">.</span><span class="n">Offset</span> <span class="p">=</span> <span class="m">0</span><span class="p">;</span>
<span class="n">request</span><span class="p">.</span><span class="n">Limit</span> <span class="p">=</span> <span class="m">100</span><span class="p">;</span>
<span class="n">request</span><span class="p">.</span><span class="n">Amount</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">Decimal</span><span class="p">(</span><span class="m">100.00</span><span class="p">);</span>

<span class="n">List</span><span class="p">&lt;</span><span class="n">Charge</span><span class="p">&gt;</span> <span class="n">charges</span><span class="p">=</span> <span class="n">openpayAPI</span><span class="p">.</span><span class="n">ChargeService</span><span class="p">.</span><span class="nf">List</span><span class="p">(</span><span class="s">"ag4nktpdzebjiye1tlze"</span><span class="p">,</span> <span class="n">request</span><span class="p">);</span>
</pre><pre class="highlight javascript"><span class="kd">var</span> <span class="nx">searchParams</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s1">'creation[gte]'</span> <span class="err">:</span> <span class="s1">'2013-11-01'</span><span class="p">,</span>
  <span class="s1">'limit'</span> <span class="err">:</span> <span class="mi">2</span>
<span class="p">};</span>

<span class="nx">openpay</span><span class="p">.</span><span class="nx">customers</span><span class="p">.</span><span class="nx">charges</span><span class="p">.</span><span class="nx">list</span><span class="p">(</span><span class="s1">'ag4nktpdzebjiye1tlze'</span><span class="p">,</span><span class="nx">searchParams</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">chargeList</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// ...
</span><span class="p">});</span>
</pre><pre class="highlight ruby"><span class="vi">@openpay</span><span class="o">=</span><span class="no">OpenpayApi</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="s2">"moiep6umtcnanql3jrxp"</span><span class="p">,</span><span class="s2">"sk_3433941e467c4875b178ce26348b0fac"</span><span class="p">)</span>
<span class="vi">@charges</span><span class="o">=</span><span class="vi">@openpay</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span><span class="ss">:charges</span><span class="p">)</span>

<span class="n">response_hash</span><span class="o">=</span><span class="vi">@charges</span><span class="p">.</span><span class="nf">all</span><span class="p">(</span><span class="s2">"ag4nktpdzebjiye1tlze"</span><span class="p">)</span>
</pre>
<blockquote>
<p>Ejemplo de respuesta</p>
</blockquote>
<pre class="highlight json"><span class="p">[</span><span class="w">
   </span><span class="p">{</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="s2">"tryqihxac3msedn4yxed"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"amount"</span><span class="p">:</span><span class="mf">100.00</span><span class="p">,</span><span class="w">
      </span><span class="s2">"authorization"</span><span class="p">:</span><span class="s2">"801585"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"method"</span><span class="p">:</span><span class="s2">"card"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"operation_type"</span><span class="p">:</span><span class="s2">"in"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"transaction_type"</span><span class="p">:</span><span class="s2">"charge"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"card"</span><span class="p">:{</span><span class="w">
         </span><span class="s2">"type"</span><span class="p">:</span><span class="s2">"debit"</span><span class="p">,</span><span class="w">
         </span><span class="s2">"brand"</span><span class="p">:</span><span class="s2">"visa"</span><span class="p">,</span><span class="w">
         </span><span class="s2">"address"</span><span class="p">:</span><span class="err">null</span><span class="p">,</span><span class="w">
         </span><span class="s2">"card_number"</span><span class="p">:</span><span class="s2">"411111XXXXXX1111"</span><span class="p">,</span><span class="w">
         </span><span class="s2">"holder_name"</span><span class="p">:</span><span class="s2">"Juan Perez Ramirez"</span><span class="p">,</span><span class="w">
         </span><span class="s2">"expiration_year"</span><span class="p">:</span><span class="s2">"20"</span><span class="p">,</span><span class="w">
         </span><span class="s2">"expiration_month"</span><span class="p">:</span><span class="s2">"12"</span><span class="p">,</span><span class="w">
         </span><span class="s2">"allows_charges"</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span><span class="w">
         </span><span class="s2">"allows_payouts"</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span><span class="w">
         </span><span class="s2">"bank_name"</span><span class="p">:</span><span class="s2">"Banamex"</span><span class="p">,</span><span class="w">
         </span><span class="s2">"bank_code"</span><span class="p">:</span><span class="s2">"002"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="s2">"status"</span><span class="p">:</span><span class="s2">"completed"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"currency"</span><span class="p">:</span><span class="s2">"MXN"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"creation_date"</span><span class="p">:</span><span class="s2">"2014-05-26T14:00:17-05:00"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"operation_date"</span><span class="p">:</span><span class="s2">"2014-05-26T14:00:17-05:00"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"description"</span><span class="p">:</span><span class="s2">"Cargo inicial a mi cuenta"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"error_message"</span><span class="p">:</span><span class="err">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"order_id"</span><span class="p">:</span><span class="err">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"customer_id"</span><span class="p">:</span><span class="s2">"ag4nktpdzebjiye1tlze"</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="p">{</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="s2">"trnzf2xjwpupjfryyj23"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"amount"</span><span class="p">:</span><span class="mf">100.00</span><span class="p">,</span><span class="w">
      </span><span class="s2">"authorization"</span><span class="p">:</span><span class="err">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"method"</span><span class="p">:</span><span class="s2">"bank_account"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"operation_type"</span><span class="p">:</span><span class="s2">"in"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"transaction_type"</span><span class="p">:</span><span class="s2">"charge"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"status"</span><span class="p">:</span><span class="s2">"in_progress"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"currency"</span><span class="p">:</span><span class="s2">"MXN"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"creation_date"</span><span class="p">:</span><span class="s2">"2014-05-26T13:51:25-05:00"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"operation_date"</span><span class="p">:</span><span class="s2">"2014-05-26T13:51:25-05:00"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"description"</span><span class="p">:</span><span class="s2">"Cargo con banco"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"error_message"</span><span class="p">:</span><span class="err">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"order_id"</span><span class="p">:</span><span class="s2">"oid-00055"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"customer_id"</span><span class="p">:</span><span class="s2">"ag4nktpdzebjiye1tlze"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"payment_method"</span><span class="p">:{</span><span class="w">
         </span><span class="s2">"type"</span><span class="p">:</span><span class="s2">"bank_transfer"</span><span class="p">,</span><span class="w">
         </span><span class="s2">"bank"</span><span class="p">:</span><span class="s2">"STP"</span><span class="p">,</span><span class="w">
         </span><span class="s2">"clabe"</span><span class="p">:</span><span class="s2">"646180109400135624"</span><span class="p">,</span><span class="w">
         </span><span class="s2">"name"</span><span class="p">:</span><span class="s2">"0021589"</span><span class="w">
      </span><span class="p">}</span><span class="w">
   </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></pre>
<p>Obtiene un listado de los cargos realizados por comercio o cliente.</p>

<h3 id="petición">Petición</h3>

<p>Puede realizar una búsqueda utilizando los siguiente parámetros como filtros.</p>

<table><thead>
<tr>
<th>Propiedad</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>creation</td>
<td><strong><em>date</em></strong> <br/>Igual a la fecha de creación. Formato yyyy-mm-dd</td>
</tr>
<tr>
<td>creation[gte]</td>
<td><strong><em>date</em></strong> <br/>Mayor a la fecha de creación. Formato yyyy-mm-dd</td>
</tr>
<tr>
<td>creation[lte]</td>
<td><strong><em>date</em></strong> <br/>Menor a la fecha de creación. Formato yyyy-mm-dd</td>
</tr>
<tr>
<td>offset</td>
<td><strong><em>numeric</em></strong> <br/>Número de registros a omitir al inicio, por defecto 0.</td>
</tr>
<tr>
<td>limit</td>
<td><strong><em>numeric</em></strong> <br/>Número de registros que se requieren, por defecto 10.</td>
</tr>
<tr>
<td>amount</td>
<td><strong><em>numeric</em></strong> <br/>Igual al monto.</td>
</tr>
<tr>
<td>amount[gte]</td>
<td><strong><em>numeric</em></strong> <br/>Mayor o igual al monto.</td>
</tr>
<tr>
<td>amount[lte]</td>
<td><strong><em>numeric</em></strong> <br/>Menor o igual al monto.</td>
</tr>
</tbody></table>

<h3 id="respuesta">Respuesta</h3>

<p>Regresa un arreglo de <a href="#objeto-transacción">objetos de transacción</a> de los cargos en orden descendente por fecha de creación.</p>

<h1 id="pagos-o-retiros">Pagos o retiros</h1>

<p>Un pago es la transacción que permite extraer los fondos de una cuenta Openpay y enviarlos a una cuenta bancaria o una tarjeta de débito. Los pagos se pueden realizar desde las cuentas de los clientes o desde tu cuenta de comercio.</p>

<p><aside class="notice">
<strong>Nota:</strong> Todas las transacciones de pago se regresarán en status <strong>in_progress</strong> lo cual significa que se programó para el día siguiente, cuando se efectúe la operación se cambiará el estado a <strong>completed</strong> y si se tienen webhooks configurados se enviará la notificación.
</aside></p>

<h2 id="pago-a-id-registrado">Pago a id registrado</h2>

<blockquote>
<p>Definición</p>
</blockquote>
<pre class="highlight shell">Comercio
POST https://sandbox-api.openpay.mx/v1/<span class="o">{</span>MERCHANT_ID<span class="o">}</span>/payouts

Cliente
POST https://sandbox-api.openpay.mx/v1/<span class="o">{</span>MERCHANT_ID<span class="o">}</span>/customers/<span class="o">{</span>CUSTOMER_ID<span class="o">}</span>/payouts
</pre><pre class="highlight php"><span class="cp">&lt;?</span>
<span class="nx">Cliente</span>
<span class="nv">$customer</span> <span class="o">=</span> <span class="nv">$openpay</span><span class="o">-&gt;</span><span class="na">customers</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="nx">customerId</span><span class="p">);</span>
<span class="nv">$payout</span> <span class="o">=</span> <span class="nv">$customer</span><span class="o">-&gt;</span><span class="na">payouts</span><span class="o">-&gt;</span><span class="na">create</span><span class="p">(</span><span class="nx">payoutRequest</span><span class="p">);</span>

<span class="nx">Comercio</span>
<span class="nv">$payout</span> <span class="o">=</span> <span class="nv">$openpay</span><span class="o">-&gt;</span><span class="na">payouts</span><span class="o">-&gt;</span><span class="na">create</span><span class="p">(</span><span class="nx">payoutRequest</span><span class="p">);</span>
<span class="cp">?&gt;</span>
</pre><pre class="highlight java"><span class="c1">//Cliente</span>
<span class="n">openpayAPI</span><span class="o">.</span><span class="na">payouts</span><span class="o">().</span><span class="na">create</span><span class="o">(</span><span class="n">String</span> <span class="n">customerId</span><span class="o">,</span> <span class="n">CreateBankPayoutParams</span> <span class="n">request</span><span class="o">);</span>

<span class="c1">//Comercio</span>
<span class="n">openpayAPI</span><span class="o">.</span><span class="na">payouts</span><span class="o">().</span><span class="na">create</span><span class="o">(</span><span class="n">CreateBankPayoutParams</span> <span class="n">request</span><span class="o">);</span>
</pre><pre class="highlight csharp"><span class="c1">//Cliente
</span><span class="n">openpayAPI</span><span class="p">.</span><span class="n">PayoutService</span><span class="p">.</span><span class="nf">Create</span><span class="p">(</span><span class="kt">string</span> <span class="n">customer_id</span><span class="p">,</span> <span class="n">PayoutRequest</span> <span class="n">request</span><span class="p">);</span>

<span class="c1">//Comercio
</span><span class="n">openpayAPI</span><span class="p">.</span><span class="n">PayoutService</span><span class="p">.</span><span class="nf">Create</span><span class="p">(</span><span class="n">PayoutRequest</span> <span class="n">request</span><span class="p">);</span>
</pre><pre class="highlight javascript"><span class="c1">// Comercio
</span><span class="nx">openpay</span><span class="p">.</span><span class="nx">payouts</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="nx">payoutRequest</span><span class="p">,</span> <span class="nx">callback</span><span class="p">);</span>

<span class="c1">// Cliente
</span><span class="nx">openpay</span><span class="p">.</span><span class="nx">customers</span><span class="p">.</span><span class="nx">payouts</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="nx">customerId</span><span class="p">,</span> <span class="nx">payoutRequest</span><span class="p">,</span> <span class="nx">callback</span><span class="p">);</span>
</pre><pre class="highlight ruby"><span class="c1">#Cliente</span>
<span class="vi">@payouts</span><span class="o">=</span><span class="vi">@openpay</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span><span class="ss">:payouts</span><span class="p">)</span>
<span class="vi">@payouts</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span><span class="n">request_hash</span><span class="p">,</span> <span class="n">customer_id</span><span class="p">)</span>

<span class="c1">#Comercio</span>
<span class="vi">@payouts</span><span class="o">=</span><span class="vi">@openpay</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span><span class="ss">:payouts</span><span class="p">)</span>
<span class="vi">@payouts</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span><span class="n">request_hash</span><span class="p">)</span>
</pre>
<blockquote>
<p>Ejemplo de petición con cliente</p>
</blockquote>
<pre class="highlight shell">curl https://sandbox-api.openpay.mx/v1/mzdtln0bmtms6o3kck8f/customers/ag4nktpdzebjiye1tlze/payouts <span class="se">\</span>
   -u sk_e568c42a6c384b7ab02cd47d2e407cab: <span class="se">\</span>
   -H <span class="s2">"Content-type: application/json"</span> <span class="se">\</span>
   -X POST -d <span class="s1">'{
    "method": "card",
    "destination_id": "k3d54sd3mdjf75udjfvoc",
    "amount": 10.50,
    "description": "Retiro de saldo semanal",
    "order_id": "oid-00021"
}'</span> 
</pre><pre class="highlight php"><span class="cp">&lt;?</span>
<span class="nv">$openpay</span> <span class="o">=</span> <span class="nx">Openpay</span><span class="o">::</span><span class="na">getInstance</span><span class="p">(</span><span class="s1">'mzdtln0bmtms6o3kck8f'</span><span class="p">,</span> <span class="s1">'sk_e568c42a6c384b7ab02cd47d2e407cab'</span><span class="p">);</span>

<span class="nv">$payoutRequest</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">'method'</span> <span class="o">=&gt;</span> <span class="s1">'card'</span><span class="p">,</span>
    <span class="s1">'destination_id'</span> <span class="o">=&gt;</span> <span class="s1">'k3d54sd3mdjf75udjfvoc'</span><span class="p">,</span>
    <span class="s1">'amount'</span> <span class="o">=&gt;</span> <span class="mi">1000</span><span class="p">,</span>
    <span class="s1">'description'</span> <span class="o">=&gt;</span> <span class="s1">'Retiro de saldo semanal'</span><span class="p">,</span>
    <span class="s1">'order_id'</span> <span class="o">=&gt;</span> <span class="s1">'ORDEN-00021'</span><span class="p">);</span>

<span class="nv">$customer</span> <span class="o">=</span> <span class="nv">$openpay</span><span class="o">-&gt;</span><span class="na">customers</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">'ag4nktpdzebjiye1tlze'</span><span class="p">);</span>
<span class="nv">$payout</span> <span class="o">=</span> <span class="nv">$customer</span><span class="o">-&gt;</span><span class="na">payouts</span><span class="o">-&gt;</span><span class="na">create</span><span class="p">(</span><span class="nv">$payoutRequest</span><span class="p">);</span>
<span class="cp">?&gt;</span>
</pre><pre class="highlight java"><span class="n">OpenpayAPI</span> <span class="n">api</span> <span class="o">=</span> <span class="k">new</span> <span class="n">OpenpayAPI</span><span class="o">(</span><span class="s">"https://sandbox-api.openpay.mx"</span><span class="o">,</span> <span class="s">"sk_e568c42a6c384b7ab02cd47d2e407cab"</span><span class="o">,</span> <span class="s">"mzdtln0bmtms6o3kck8f"</span><span class="o">);</span>
<span class="n">CreateBankPayoutParams</span> <span class="n">request</span> <span class="o">=</span> <span class="k">new</span> <span class="n">CreateBankPayoutParams</span><span class="o">();</span>
<span class="n">request</span><span class="o">.</span><span class="na">bankAccountId</span><span class="o">(</span><span class="s">"k3d54sd3mdjf75udjfvoc"</span><span class="o">);</span> <span class="c1">// = destination_id</span>
<span class="n">request</span><span class="o">.</span><span class="na">amount</span><span class="o">(</span><span class="k">new</span> <span class="n">BigDecimal</span><span class="o">(</span><span class="s">"10.50"</span><span class="o">));</span>
<span class="n">request</span><span class="o">.</span><span class="na">description</span><span class="o">(</span><span class="s">"Retiro de saldo semanal"</span><span class="o">);</span>
<span class="n">request</span><span class="o">.</span><span class="na">orderId</span><span class="o">(</span><span class="s">"oid-00021"</span><span class="o">);</span>

<span class="n">Payout</span> <span class="n">payout</span> <span class="o">=</span> <span class="n">api</span><span class="o">.</span><span class="na">payouts</span><span class="o">().</span><span class="na">create</span><span class="o">(</span><span class="s">"ag4nktpdzebjiye1tlze"</span><span class="o">,</span> <span class="n">request</span><span class="o">);</span>
<span class="c1">// Para crear pagos a tarjetas se deberá usar la clase CreateCardPayoutParams</span>
</pre><pre class="highlight csharp"><span class="n">OpenpayAPI</span> <span class="n">api</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">OpenpayAPI</span><span class="p">(</span><span class="s">"sk_e568c42a6c384b7ab02cd47d2e407cab"</span><span class="p">,</span> <span class="s">"mzdtln0bmtms6o3kck8f"</span><span class="p">);</span>
<span class="n">PayoutRequest</span> <span class="n">request</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">PayoutRequest</span><span class="p">();</span>
<span class="n">request</span><span class="p">.</span><span class="n">Method</span> <span class="p">=</span> <span class="s">"bank_account"</span><span class="p">;</span>
<span class="n">request</span><span class="p">.</span><span class="n">DestinationId</span> <span class="p">=</span> <span class="s">"k3d54sd3mdjf75udjfvoc"</span><span class="p">;</span>
<span class="n">request</span><span class="p">.</span><span class="n">Amount</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">Decimal</span><span class="p">(</span><span class="m">10.50</span><span class="p">;</span>
<span class="n">request</span><span class="p">.</span><span class="n">Description</span> <span class="p">=</span> <span class="s">"Retiro de saldo semanal"</span><span class="p">;</span>
<span class="n">request</span><span class="p">.</span><span class="n">OrderId</span> <span class="p">=</span> <span class="s">"oid-00021;
</span>
<span class="n">Payout</span> <span class="p">=</span> <span class="n">api</span><span class="p">.</span><span class="n">PayoutService</span><span class="p">.</span><span class="nf">Create</span><span class="p">(</span><span class="s">"ag4nktpdzebjiye1tlze"</span><span class="p">,</span> <span class="n">request</span><span class="p">);</span>
</pre><pre class="highlight javascript"><span class="kd">var</span> <span class="nx">payoutRequest</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">'method'</span><span class="err">:</span> <span class="s1">'card'</span><span class="p">,</span>
    <span class="s1">'destination_id'</span><span class="err">:</span> <span class="s1">'k3d54sd3mdjf75udjfvoc'</span><span class="p">,</span>
    <span class="s1">'amount'</span><span class="err">:</span> <span class="mf">10.50</span><span class="p">,</span>
    <span class="s1">'description'</span><span class="err">:</span> <span class="s1">'Retiro de saldo semanal'</span><span class="p">,</span>
    <span class="s1">'order_id'</span><span class="err">:</span> <span class="s1">'oid-00021'</span>
<span class="p">};</span>

<span class="nx">openpay</span><span class="p">.</span><span class="nx">customers</span><span class="p">.</span><span class="nx">payouts</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="s1">'ag4nktpdzebjiye1tlze'</span><span class="p">,</span> <span class="nx">payoutRequest</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">payout</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// ...
</span><span class="p">});</span>
</pre><pre class="highlight ruby"><span class="vi">@openpay</span><span class="o">=</span><span class="no">OpenpayApi</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="s2">"mzdtln0bmtms6o3kck8f"</span><span class="p">,</span><span class="s2">"sk_e568c42a6c384b7ab02cd47d2e407cab"</span><span class="p">)</span>
<span class="vi">@payouts</span><span class="o">=</span><span class="vi">@openpay</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span><span class="ss">:payouts</span><span class="p">)</span>
<span class="n">request_hash</span><span class="o">=</span><span class="p">{</span>
     <span class="s2">"method"</span> <span class="o">=&gt;</span> <span class="s2">"bank_account"</span><span class="p">,</span>
     <span class="s2">"destination_id"</span> <span class="o">=&gt;</span> <span class="s2">"k3d54sd3mdjf75udjfvoc"</span><span class="p">,</span>   
     <span class="s2">"amount"</span> <span class="o">=&gt;</span> <span class="mi">10</span><span class="o">.</span><span class="mi">50</span><span class="p">,</span>
     <span class="s2">"description"</span> <span class="o">=&gt;</span> <span class="s2">"Retiro de saldo semanal"</span><span class="p">,</span>
     <span class="s2">"order_id"</span> <span class="o">=&gt;</span> <span class="s2">"oid-00021"</span>
   <span class="p">}</span>

<span class="n">response_hash</span><span class="o">=</span><span class="vi">@payouts</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span><span class="n">request_hash</span><span class="p">.</span><span class="nf">to_hash</span><span class="p">,</span> <span class="s2">"ag4nktpdzebjiye1tlze"</span><span class="p">)</span>
</pre>
<blockquote>
<p>Ejemplo de respuesta</p>
</blockquote>
<pre class="highlight json"><span class="p">{</span><span class="w">
   </span><span class="s2">"amount"</span><span class="p">:</span><span class="mf">10.5</span><span class="p">,</span><span class="w">
   </span><span class="s2">"authorization"</span><span class="p">:</span><span class="err">null</span><span class="p">,</span><span class="w">
   </span><span class="s2">"method"</span><span class="p">:</span><span class="s2">"card"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"currency"</span><span class="p">:</span><span class="s2">"MXN"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"operation_type"</span><span class="p">:</span><span class="s2">"out"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"transaction_type"</span><span class="p">:</span><span class="s2">"payout"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"card"</span><span class="p">:{</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="s2">"k3d54sd3mdjf75udjfvoc"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"type"</span><span class="p">:</span><span class="s2">"debit"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"brand"</span><span class="p">:</span><span class="s2">"visa"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"address"</span><span class="p">:</span><span class="err">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"card_number"</span><span class="p">:</span><span class="s2">"411111XXXXXX1111"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"holder_name"</span><span class="p">:</span><span class="s2">"Juan Perez Ramirez"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"expiration_year"</span><span class="p">:</span><span class="err">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"expiration_month"</span><span class="p">:</span><span class="err">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"allows_payouts"</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="s2">"allows_charges"</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="s2">"creation_date"</span><span class="p">:</span><span class="s2">"2013-11-15T13:42:00-06:00"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"bank_name"</span><span class="p">:</span><span class="s2">"BANCOMER"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"bank_code"</span><span class="p">:</span><span class="s2">"012"</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="s2">"status"</span><span class="p">:</span><span class="s2">"in_progress"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"id"</span><span class="p">:</span><span class="s2">"tm50pl40gf6awvalw1ei"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"creation_date"</span><span class="p">:</span><span class="s2">"2013-11-15T13:42:00-06:00"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"description"</span><span class="p">:</span><span class="s2">"Retiro de saldo semanal"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"error_message"</span><span class="p">:</span><span class="err">null</span><span class="p">,</span><span class="w">
   </span><span class="s2">"order_id"</span><span class="p">:</span><span class="s2">"oid-00021"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"customer_id"</span><span class="p">:</span><span class="s2">"aayr5jjb1fln44yautef"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></pre>
<p>Envío un pago a una cuenta bancario o terjeta de débito previamente registrada. Consulte como <a href="#crear-una-cuenta-bancaria">crear una cuenta de bancaria</a></p>

<h3 id="petición">Petición</h3>

<table><thead>
<tr>
<th>Propiedad</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>method</td>
<td><strong><em>string</em></strong> (requerido) <br/>Debe contener el valor <strong>card</strong> para realizar un pago a una tarjeta registrado y <strong>bank_account</strong> para realizarlo a una cuenta bancaria registrada.</td>
</tr>
<tr>
<td>destination_id</td>
<td><strong><em>string</em></strong> (requerido, longitud = 45) <br/>El ID de la cuenta bancaria o tarjeta de débito previamente registrada.</td>
</tr>
<tr>
<td>amount</td>
<td><strong><em>numeric</em></strong> (requerido) <br/>Cantidad del cargo. Debe ser una cantidad mayor a cero, con hasta dos dígitos decimales.</td>
</tr>
<tr>
<td>description</td>
<td><strong><em>string</em></strong> (requerido, longitud = 250) <br/>Una descripción asociada al cargo.</td>
</tr>
<tr>
<td>order_id</td>
<td><strong><em>string</em></strong> (opcional, longitud = 100) <br/>Identificador único del cargo. Debe ser único entre todas las transacciones.</td>
</tr>
</tbody></table>

<h3 id="respuesta">Respuesta</h3>

<p>Regresa un <a href="#objeto-transacción">objeto de transacción</a> con la información del pago o una <a href="#objeto-error">respuesta de error</a>.</p>

<h2 id="pago-a-cuenta-bancaria">Pago a cuenta bancaria</h2>

<blockquote>
<p>Definición</p>
</blockquote>
<pre class="highlight shell">Comercio
POST https://sandbox-api.openpay.mx/v1/<span class="o">{</span>MERCHANT_ID<span class="o">}</span>/payouts

Cliente
POST https://sandbox-api.openpay.mx/v1/<span class="o">{</span>MERCHANT_ID<span class="o">}</span>/customers/<span class="o">{</span>CUSTOMER_ID<span class="o">}</span>/payouts
</pre><pre class="highlight php"><span class="cp">&lt;?</span>
<span class="nx">Cliente</span>
<span class="nv">$customer</span> <span class="o">=</span> <span class="nv">$openpay</span><span class="o">-&gt;</span><span class="na">customers</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="nx">customerId</span><span class="p">);</span>
<span class="nv">$payout</span> <span class="o">=</span> <span class="nv">$customer</span><span class="o">-&gt;</span><span class="na">payouts</span><span class="o">-&gt;</span><span class="na">create</span><span class="p">(</span><span class="nx">payoutRequest</span><span class="p">);</span>

<span class="nx">Comercio</span>
<span class="nv">$payout</span> <span class="o">=</span> <span class="nv">$openpay</span><span class="o">-&gt;</span><span class="na">payouts</span><span class="o">-&gt;</span><span class="na">create</span><span class="p">(</span><span class="nx">payoutRequest</span><span class="p">);</span>
<span class="cp">?&gt;</span>
</pre><pre class="highlight java"><span class="c1">//Cliente</span>
<span class="n">openpayAPI</span><span class="o">.</span><span class="na">payouts</span><span class="o">().</span><span class="na">create</span><span class="o">(</span><span class="n">String</span> <span class="n">customerId</span><span class="o">,</span> <span class="n">CreateBankPayoutParams</span> <span class="n">request</span><span class="o">);</span>

<span class="c1">//Comercio</span>
<span class="n">openpayAPI</span><span class="o">.</span><span class="na">payouts</span><span class="o">().</span><span class="na">create</span><span class="o">(</span><span class="n">CreateBankPayoutParams</span> <span class="n">request</span><span class="o">);</span>
</pre><pre class="highlight csharp"><span class="c1">//Cliente
</span><span class="n">openpayAPI</span><span class="p">.</span><span class="n">PayoutService</span><span class="p">.</span><span class="nf">Create</span><span class="p">(</span><span class="kt">string</span> <span class="n">customer_id</span><span class="p">,</span> <span class="n">PayoutRequest</span> <span class="n">request</span><span class="p">);</span>

<span class="c1">//Comercio
</span><span class="n">openpayAPI</span><span class="p">.</span><span class="n">PayoutService</span><span class="p">.</span><span class="nf">Create</span><span class="p">(</span><span class="n">PayoutRequest</span> <span class="n">request</span><span class="p">);</span>
</pre><pre class="highlight javascript"><span class="c1">// Comercio
</span><span class="nx">openpay</span><span class="p">.</span><span class="nx">payouts</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="nx">payoutRequest</span><span class="p">,</span> <span class="nx">callback</span><span class="p">);</span>

<span class="c1">// Cliente
</span><span class="nx">openpay</span><span class="p">.</span><span class="nx">customers</span><span class="p">.</span><span class="nx">payouts</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="nx">customerId</span><span class="p">,</span> <span class="nx">payoutRequest</span><span class="p">,</span> <span class="nx">callback</span><span class="p">);</span>
</pre><pre class="highlight ruby"><span class="c1">#Cliente</span>
<span class="vi">@payouts</span><span class="o">=</span><span class="vi">@openpay</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span><span class="ss">:payouts</span><span class="p">)</span>
<span class="vi">@payouts</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span><span class="n">request_hash</span><span class="p">,</span> <span class="n">customer_id</span><span class="p">)</span>

<span class="c1">#Comercio</span>
<span class="vi">@payouts</span><span class="o">=</span><span class="vi">@openpay</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span><span class="ss">:payouts</span><span class="p">)</span>
<span class="vi">@payouts</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span><span class="n">request_hash</span><span class="p">)</span>
</pre>
<blockquote>
<p>Ejemplo de petición con cliente</p>
</blockquote>
<pre class="highlight shell">curl https://sandbox-api.openpay.mx/v1/mzdtln0bmtms6o3kck8f/customers/asynwirguzkgq2bizogo/payouts <span class="se">\</span>
   -u sk_e568c42a6c384b7ab02cd47d2e407cab: <span class="se">\</span>
   -H <span class="s2">"Content-type: application/json"</span> <span class="se">\</span>
   -X POST -d <span class="s1">'{
   "method":"bank_account",
   "bank_account":{
      "clabe":"012298026516924616",
      "holder_name":"Mi empresa"
   },
   "amount":100.00,
   "description":"Retiro de saldo semanal",
   "order_id":"oid-1110011"
}'</span> 
</pre><pre class="highlight php"><span class="cp">&lt;?</span>
<span class="nv">$openpay</span> <span class="o">=</span> <span class="nx">Openpay</span><span class="o">::</span><span class="na">getInstance</span><span class="p">(</span><span class="s1">'mzdtln0bmtms6o3kck8f'</span><span class="p">,</span> <span class="s1">'sk_e568c42a6c384b7ab02cd47d2e407cab'</span><span class="p">);</span>

<span class="nv">$payoutRequest</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">'method'</span> <span class="o">=&gt;</span> <span class="s1">'bank_account'</span><span class="p">,</span>
    <span class="s1">'bank_account'</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">'clabe'</span> <span class="o">=&gt;</span> <span class="s1">'012298026516924616'</span><span class="p">,</span>
        <span class="s1">'holder_name'</span> <span class="o">=&gt;</span> <span class="s1">'Mi empresa'</span><span class="p">),</span>
    <span class="s1">'amount'</span> <span class="o">=&gt;</span> <span class="mf">100.00</span><span class="p">,</span>
    <span class="s1">'description'</span> <span class="o">=&gt;</span> <span class="s1">'Retiro de saldo semanal'</span><span class="p">,</span>
    <span class="s1">'order_id'</span> <span class="o">=&gt;</span> <span class="s1">'ORDEN-00021'</span><span class="p">);</span>

<span class="nv">$customer</span> <span class="o">=</span> <span class="nv">$openpay</span><span class="o">-&gt;</span><span class="na">customers</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">'asynwirguzkgq2bizogo'</span><span class="p">);</span>
<span class="nv">$payout</span> <span class="o">=</span> <span class="nv">$customer</span><span class="o">-&gt;</span><span class="na">payouts</span><span class="o">-&gt;</span><span class="na">create</span><span class="p">(</span><span class="nv">$payoutRequest</span><span class="p">);</span>
<span class="cp">?&gt;</span>
</pre><pre class="highlight java"><span class="n">OpenpayAPI</span> <span class="n">api</span> <span class="o">=</span> <span class="k">new</span> <span class="n">OpenpayAPI</span><span class="o">(</span><span class="s">"https://sandbox-api.openpay.mx"</span><span class="o">,</span> <span class="s">"sk_b05586ec98454522ac7d4ccdcaec9128"</span><span class="o">,</span> <span class="s">"maonhzpqm8xp2ydssovf"</span><span class="o">);</span>
<span class="n">CreateBankPayoutParams</span> <span class="n">request</span> <span class="o">=</span> <span class="k">new</span> <span class="n">CreateBankPayoutParams</span><span class="o">();</span>
<span class="n">BankAccount</span> <span class="n">bankAccount</span> <span class="o">=</span> <span class="k">new</span> <span class="n">BankAccount</span><span class="o">();</span>
<span class="n">bankAccount</span><span class="o">.</span><span class="na">holderName</span><span class="o">(</span><span class="s">"Mi empresa"</span><span class="o">);</span>
<span class="n">bankAccount</span><span class="o">.</span><span class="na">alias</span><span class="o">(</span><span class="kc">null</span><span class="o">);</span>
<span class="n">bankAccount</span><span class="o">.</span><span class="na">clabe</span><span class="o">(</span><span class="s">"012XXXXXXXXXX24616"</span><span class="o">);</span>
<span class="n">request</span><span class="o">.</span><span class="na">bankAccount</span><span class="o">(</span><span class="n">bankAccount</span><span class="o">);</span>
<span class="n">request</span><span class="o">.</span><span class="na">amount</span><span class="o">(</span><span class="k">new</span> <span class="n">BigDecimal</span><span class="o">(</span><span class="s">"10.50"</span><span class="o">));</span>
<span class="n">request</span><span class="o">.</span><span class="na">description</span><span class="o">(</span><span class="s">"Retiro de saldo semanal"</span><span class="o">);</span>
<span class="n">request</span><span class="o">.</span><span class="na">orderId</span><span class="o">(</span><span class="s">"oid-1110011"</span><span class="o">);</span>

<span class="n">Payout</span> <span class="n">payout</span> <span class="o">=</span> <span class="n">api</span><span class="o">.</span><span class="na">payouts</span><span class="o">().</span><span class="na">create</span><span class="o">(</span><span class="s">"ag4nktpdzebjiye1tlze"</span><span class="o">,</span> <span class="n">request</span><span class="o">);</span>
</pre><pre class="highlight csharp"><span class="n">OpenpayAPI</span> <span class="n">api</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">OpenpayAPI</span><span class="p">(</span><span class="s">"sk_b05586ec98454522ac7d4ccdcaec9128"</span><span class="p">,</span> <span class="s">"maonhzpqm8xp2ydssovf"</span><span class="p">);</span>
<span class="n">PayoutRequest</span> <span class="n">request</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">PayoutRequest</span><span class="p">();</span>
<span class="n">request</span><span class="p">.</span><span class="n">Method</span> <span class="p">=</span> <span class="s">"bank_account"</span><span class="p">;</span>
<span class="n">BankAccount</span> <span class="n">bankAccount</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">BankAccount</span><span class="p">();</span>
<span class="n">bankAccount</span><span class="p">.</span><span class="n">HolderName</span> <span class="p">=</span> <span class="s">"Mi empresa"</span><span class="p">;</span>
<span class="n">bankAccount</span><span class="p">.</span><span class="n">Alias</span> <span class="p">=</span> <span class="k">null</span><span class="p">;</span>
<span class="n">bankAccount</span><span class="p">.</span><span class="n">CLABE</span> <span class="p">=</span> <span class="s">"012XXXXXXXXXX24616"</span><span class="p">;</span>
<span class="n">request</span><span class="p">.</span><span class="n">BankAccount</span> <span class="p">=</span> <span class="n">bankAccount</span><span class="p">;</span>
<span class="n">request</span><span class="p">.</span><span class="n">Amount</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">Decimal</span><span class="p">(</span><span class="m">10.50</span><span class="p">);</span>
<span class="n">request</span><span class="p">.</span><span class="n">Description</span> <span class="p">=</span> <span class="s">"Retiro de saldo semanal"</span><span class="p">;</span>
<span class="n">request</span><span class="p">.</span><span class="n">OrderId</span> <span class="p">=</span> <span class="s">"oid-1110011"</span><span class="p">;</span>

<span class="n">Payout</span> <span class="p">=</span> <span class="n">api</span><span class="p">.</span><span class="n">PayoutService</span><span class="p">.</span><span class="nf">Create</span><span class="p">(</span><span class="s">"ag4nktpdzebjiye1tlze"</span><span class="p">,</span> <span class="n">request</span><span class="p">);</span>
</pre><pre class="highlight javascript"><span class="kd">var</span> <span class="nx">payoutRequest</span> <span class="o">=</span> <span class="p">{</span>
   <span class="s1">'method'</span><span class="err">:</span><span class="s1">'bank_account'</span><span class="p">,</span>
   <span class="s1">'bank_account'</span><span class="err">:</span><span class="p">{</span>
      <span class="s1">'clabe'</span><span class="err">:</span><span class="s1">'012298026516924616'</span><span class="p">,</span>
      <span class="s1">'holder_name'</span><span class="err">:</span><span class="s1">'Mi empresa'</span>
   <span class="p">},</span>
   <span class="s1">'amount'</span><span class="err">:</span><span class="mf">10.50</span><span class="p">,</span>
   <span class="s1">'description'</span><span class="err">:</span><span class="s1">'Retiro de saldo semanal'</span><span class="p">,</span>
   <span class="s1">'order_id'</span><span class="err">:</span><span class="s1">'oid-1110011'</span>
<span class="p">};</span>

<span class="nx">openpay</span><span class="p">.</span><span class="nx">customers</span><span class="p">.</span><span class="nx">payouts</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="s1">'ag4nktpdzebjiye1tlze'</span><span class="p">,</span> <span class="nx">payoutRequest</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">payout</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// ...
</span><span class="p">});</span>
</pre><pre class="highlight ruby"><span class="vi">@openpay</span><span class="o">=</span><span class="no">OpenpayApi</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="s2">"mzdtln0bmtms6o3kck8f"</span><span class="p">,</span><span class="s2">"sk_e568c42a6c384b7ab02cd47d2e407cab"</span><span class="p">)</span>
<span class="vi">@payouts</span><span class="o">=</span><span class="vi">@openpay</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span><span class="ss">:payouts</span><span class="p">)</span>
<span class="n">bank_account_hash</span><span class="o">=</span><span class="p">{</span>
     <span class="s2">"holder_name"</span> <span class="o">=&gt;</span> <span class="s2">"Mi empresa"</span><span class="p">,</span>
     <span class="s2">"alias"</span> <span class="o">=&gt;</span> <span class="kp">nil</span><span class="p">,</span>
     <span class="s2">"clabe"</span> <span class="o">=&gt;</span> <span class="s2">"012XXXXXXXXXX24616"</span>
   <span class="p">}</span>
<span class="n">request_hash</span><span class="o">=</span><span class="p">{</span>
     <span class="s2">"method"</span> <span class="o">=&gt;</span> <span class="s2">"bank_account"</span><span class="p">,</span>
     <span class="s2">"bank_account"</span> <span class="o">=&gt;</span> <span class="n">bank_account_hash</span><span class="p">,</span>
     <span class="s2">"amount"</span> <span class="o">=&gt;</span> <span class="mi">10</span><span class="o">.</span><span class="mi">50</span><span class="p">,</span>
     <span class="s2">"description"</span> <span class="o">=&gt;</span> <span class="s2">"Retiro de saldo semanal"</span><span class="p">,</span>
     <span class="s2">"order_id"</span> <span class="o">=&gt;</span> <span class="s2">"oid-1110011"</span>
   <span class="p">}</span>

<span class="n">response_hash</span><span class="o">=</span><span class="vi">@payouts</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span><span class="n">request_hash</span><span class="p">.</span><span class="nf">to_hash</span><span class="p">,</span> <span class="s2">"ag4nktpdzebjiye1tlze"</span><span class="p">)</span>
</pre>
<blockquote>
<p>Ejemplo de respuesta</p>
</blockquote>
<pre class="highlight json"><span class="p">{</span><span class="w">
   </span><span class="s2">"id"</span><span class="p">:</span><span class="s2">"tr4f2atubqchinw71vfs"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"amount"</span><span class="p">:</span><span class="mf">10.50</span><span class="p">,</span><span class="w">
   </span><span class="s2">"authorization"</span><span class="p">:</span><span class="err">null</span><span class="p">,</span><span class="w">
   </span><span class="s2">"method"</span><span class="p">:</span><span class="s2">"bank_account"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"operation_type"</span><span class="p">:</span><span class="s2">"out"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"transaction_type"</span><span class="p">:</span><span class="s2">"payout"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"status"</span><span class="p">:</span><span class="s2">"in_progress"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"currency"</span><span class="p">:</span><span class="s2">"MXN"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"creation_date"</span><span class="p">:</span><span class="s2">"2014-05-26T17:23:03-05:00"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"operation_date"</span><span class="p">:</span><span class="s2">"2014-05-26T17:23:03-05:00"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"description"</span><span class="p">:</span><span class="s2">"Retiro de saldo semanal"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"error_message"</span><span class="p">:</span><span class="err">null</span><span class="p">,</span><span class="w">
   </span><span class="s2">"order_id"</span><span class="p">:</span><span class="s2">"oid-1110011"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"bank_account"</span><span class="p">:{</span><span class="w">
      </span><span class="s2">"clabe"</span><span class="p">:</span><span class="s2">"012XXXXXXXXXX24616"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"bank_code"</span><span class="p">:</span><span class="s2">"012"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"bank_name"</span><span class="p">:</span><span class="s2">"BANCOMER"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"alias"</span><span class="p">:</span><span class="err">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"holder_name"</span><span class="p">:</span><span class="s2">"Mi empresa"</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="s2">"customer_id"</span><span class="p">:</span><span class="s2">"asynwirguzkgq2bizogo"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></pre>
<p>Envía un pago a una cuenta bancaria.</p>

<h3 id="petición">Petición</h3>

<table><thead>
<tr>
<th>Propiedad</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>method</td>
<td><strong><em>string</em></strong> (requerido) <br/>Debe contener el valor <strong>bank_account</strong>.</td>
</tr>
<tr>
<td>bank_account</td>
<td><strong><em>object</em></strong> (requerido) <br/>Datos de la cuenta bancaria a la que se enviarán los fondos. <br/><br/> <strong>clabe</strong>.- Número de cuenta CLABE de la cuenta a la que se enviarán los fondos. <br/><strong>holder_name</strong>.- Nombre del propietario de la cuenta.</td>
</tr>
<tr>
<td>amount</td>
<td><strong><em>numeric</em></strong> (requerido) <br/>Cantidad del cargo. Debe ser una cantidad mayor a cero, con hasta dos dígitos decimales.</td>
</tr>
<tr>
<td>description</td>
<td><strong><em>string</em></strong> (requerido, longitud = 250) <br/>Una descripción asociada al cargo.</td>
</tr>
<tr>
<td>order_id</td>
<td><strong><em>string</em></strong> (opcional, longitud = 100) <br/>Identificador único del cargo. Debe ser único entre todas las transacciones.</td>
</tr>
</tbody></table>

<h3 id="respuesta">Respuesta</h3>

<p>Regresa un <a href="#objeto-transacción">objeto de transacción</a> con la información del pago o una <a href="#objeto-error">respuesta de error</a>.</p>

<h2 id="pago-a-tarjeta-de-débito">Pago a tarjeta de débito</h2>

<blockquote>
<p>Definición</p>
</blockquote>
<pre class="highlight shell">Comercio
POST https://sandbox-api.openpay.mx/v1/<span class="o">{</span>MERCHANT_ID<span class="o">}</span>/payouts

Cliente
POST https://sandbox-api.openpay.mx/v1/<span class="o">{</span>MERCHANT_ID<span class="o">}</span>/customers/<span class="o">{</span>CUSTOMER_ID<span class="o">}</span>/payouts
</pre><pre class="highlight php"><span class="cp">&lt;?</span>
<span class="nx">Cliente</span>
<span class="nv">$customer</span> <span class="o">=</span> <span class="nv">$openpay</span><span class="o">-&gt;</span><span class="na">customers</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="nx">customerId</span><span class="p">);</span>
<span class="nv">$payout</span> <span class="o">=</span> <span class="nv">$customer</span><span class="o">-&gt;</span><span class="na">payouts</span><span class="o">-&gt;</span><span class="na">create</span><span class="p">(</span><span class="nx">payoutRequest</span><span class="p">);</span>

<span class="nx">Comercio</span>
<span class="nv">$payout</span> <span class="o">=</span> <span class="nv">$openpay</span><span class="o">-&gt;</span><span class="na">payouts</span><span class="o">-&gt;</span><span class="na">create</span><span class="p">(</span><span class="nx">payoutRequest</span><span class="p">);</span>
<span class="cp">?&gt;</span>
</pre><pre class="highlight java"><span class="c1">//Cliente</span>
<span class="n">openpayAPI</span><span class="o">.</span><span class="na">payouts</span><span class="o">().</span><span class="na">create</span><span class="o">(</span><span class="n">String</span> <span class="n">customerId</span><span class="o">,</span> <span class="n">CreateCardPayoutParams</span> <span class="n">request</span><span class="o">);</span>

<span class="c1">//Comercio</span>
<span class="n">openpayAPI</span><span class="o">.</span><span class="na">payouts</span><span class="o">().</span><span class="na">create</span><span class="o">(</span><span class="n">CreateCardPayoutParams</span> <span class="n">request</span><span class="o">);</span>
</pre><pre class="highlight csharp"><span class="c1">//Cliente
</span><span class="n">openpayAPI</span><span class="p">.</span><span class="n">PayoutService</span><span class="p">.</span><span class="nf">Create</span><span class="p">(</span><span class="kt">string</span> <span class="n">customer_id</span><span class="p">,</span> <span class="n">PayoutRequest</span> <span class="n">request</span><span class="p">);</span>

<span class="c1">//Comercio
</span><span class="n">openpayAPI</span><span class="p">.</span><span class="n">PayoutService</span><span class="p">.</span><span class="nf">Create</span><span class="p">(</span><span class="n">PayoutRequest</span> <span class="n">request</span><span class="p">);</span>
</pre><pre class="highlight javascript"><span class="c1">// Comercio
</span><span class="nx">openpay</span><span class="p">.</span><span class="nx">payouts</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="nx">payoutRequest</span><span class="p">,</span> <span class="nx">callback</span><span class="p">);</span>

<span class="c1">// Cliente
</span><span class="nx">openpay</span><span class="p">.</span><span class="nx">customers</span><span class="p">.</span><span class="nx">payouts</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="nx">customerId</span><span class="p">,</span> <span class="nx">payoutRequest</span><span class="p">,</span> <span class="nx">callback</span><span class="p">);</span>
</pre><pre class="highlight ruby"><span class="c1">#Cliente</span>
<span class="vi">@payouts</span><span class="o">=</span><span class="vi">@openpay</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span><span class="ss">:payouts</span><span class="p">)</span>
<span class="vi">@payouts</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span><span class="n">request_hash</span><span class="p">,</span> <span class="n">customer_id</span><span class="p">)</span>

<span class="c1">#Comercio</span>
<span class="vi">@payouts</span><span class="o">=</span><span class="vi">@openpay</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span><span class="ss">:payouts</span><span class="p">)</span>
<span class="vi">@payouts</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span><span class="n">request_hash</span><span class="p">)</span>
</pre>
<blockquote>
<p>Ejemplo de petición con cliente</p>
</blockquote>
<pre class="highlight shell">curl https://sandbox-api.openpay.mx/v1/mzdtln0bmtms6o3kck8f/customers/asynwirguzkgq2bizogo/payouts <span class="se">\</span>
   -u sk_e568c42a6c384b7ab02cd47d2e407cab: <span class="se">\</span>
   -H <span class="s2">"Content-type: application/json"</span> <span class="se">\</span>
   -X POST -d <span class="s1">'{
   "method": "card",
   "card": {
      "card_number": "4111111111111111",
      "holder_name": "Juan Perez Ramirez"
   },
   "amount" : 100.00,
   "description" : "Retiro de saldo semanal",
   "order_id" : "ORDEN-00021"
} '</span> 
</pre><pre class="highlight php"><span class="cp">&lt;?</span>
<span class="nv">$openpay</span> <span class="o">=</span> <span class="nx">Openpay</span><span class="o">::</span><span class="na">getInstance</span><span class="p">(</span><span class="s1">'mzdtln0bmtms6o3kck8f'</span><span class="p">,</span> <span class="s1">'sk_e568c42a6c384b7ab02cd47d2e407cab'</span><span class="p">);</span>

<span class="nv">$payoutRequest</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">'method'</span> <span class="o">=&gt;</span> <span class="s1">'card'</span><span class="p">,</span>
    <span class="s1">'card'</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">'card_number'</span> <span class="o">=&gt;</span> <span class="s1">'4111111111111111'</span><span class="p">,</span>
        <span class="s1">'holder_name'</span> <span class="o">=&gt;</span> <span class="s1">'Juan Perez Ramirez'</span><span class="p">),</span>
    <span class="s1">'amount'</span> <span class="o">=&gt;</span> <span class="mf">100.00</span><span class="p">,</span>
    <span class="s1">'description'</span> <span class="o">=&gt;</span> <span class="s1">'Retiro de saldo semanal'</span><span class="p">,</span>
    <span class="s1">'order_id'</span> <span class="o">=&gt;</span> <span class="s1">'ORDEN-00021'</span><span class="p">);</span>

<span class="nv">$customer</span> <span class="o">=</span> <span class="nv">$openpay</span><span class="o">-&gt;</span><span class="na">customers</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">'asynwirguzkgq2bizogo'</span><span class="p">);</span>
<span class="nv">$payout</span> <span class="o">=</span> <span class="nv">$customer</span><span class="o">-&gt;</span><span class="na">payouts</span><span class="o">-&gt;</span><span class="na">create</span><span class="p">(</span><span class="nv">$payoutRequest</span><span class="p">);</span>
<span class="cp">?&gt;</span>
</pre><pre class="highlight java"><span class="n">OpenpayAPI</span> <span class="n">api</span> <span class="o">=</span> <span class="k">new</span> <span class="n">OpenpayAPI</span><span class="o">(</span><span class="s">"https://sandbox-api.openpay.mx"</span><span class="o">,</span> <span class="s">"sk_b05586ec98454522ac7d4ccdcaec9128"</span><span class="o">,</span> <span class="s">"maonhzpqm8xp2ydssovf"</span><span class="o">);</span>
<span class="n">CreateCardPayoutParams</span> <span class="n">request</span> <span class="o">=</span> <span class="k">new</span> <span class="n">CreateCardPayoutParams</span><span class="o">();</span>
<span class="n">Card</span> <span class="n">card</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Card</span><span class="o">();</span>
<span class="n">card</span><span class="o">.</span><span class="na">holderName</span><span class="o">(</span><span class="s">"Juan Perez Ramirez"</span><span class="o">);</span>
<span class="n">card</span><span class="o">.</span><span class="na">cardNumber</span><span class="o">(</span><span class="s">"4111111111111111"</span><span class="o">);</span>
<span class="n">card</span><span class="o">.</span><span class="na">cvv2</span><span class="o">(</span><span class="s">"110"</span><span class="o">);</span>
<span class="n">card</span><span class="o">.</span><span class="na">expirationMonth</span><span class="o">(</span><span class="mi">12</span><span class="o">);</span>
<span class="n">card</span><span class="o">.</span><span class="na">expirationYear</span><span class="o">(</span><span class="mi">20</span><span class="o">);</span>
<span class="n">request</span><span class="o">.</span><span class="na">card</span><span class="o">(</span><span class="n">card</span><span class="o">);</span>
<span class="n">request</span><span class="o">.</span><span class="na">amount</span><span class="o">(</span><span class="k">new</span> <span class="n">BigDecimal</span><span class="o">(</span><span class="s">"100.00"</span><span class="o">));</span>
<span class="n">request</span><span class="o">.</span><span class="na">description</span><span class="o">(</span><span class="s">"Pago a cuenta de banco"</span><span class="o">);</span>
<span class="n">request</span><span class="o">.</span><span class="na">orderId</span><span class="o">(</span><span class="s">"ord-103"</span><span class="o">);</span>

<span class="n">Payout</span> <span class="n">payout</span> <span class="o">=</span> <span class="n">api</span><span class="o">.</span><span class="na">payouts</span><span class="o">().</span><span class="na">create</span><span class="o">(</span><span class="s">"ag4nktpdzebjiye1tlze"</span><span class="o">,</span> <span class="n">request</span><span class="o">);</span>
</pre><pre class="highlight csharp"><span class="n">OpenpayAPI</span> <span class="n">api</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">OpenpayAPI</span><span class="p">(</span><span class="s">"sk_b05586ec98454522ac7d4ccdcaec9128"</span><span class="p">,</span> <span class="s">"maonhzpqm8xp2ydssovf"</span><span class="p">);</span>
<span class="n">PayoutRequest</span> <span class="n">request</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">PayoutRequest</span><span class="p">();</span>
<span class="n">request</span><span class="p">.</span><span class="n">Method</span> <span class="p">=</span> <span class="s">"card"</span><span class="p">;</span>
<span class="n">Card</span> <span class="n">card</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">Card</span><span class="p">();</span>
<span class="n">card</span><span class="p">.</span><span class="n">HolderName</span> <span class="p">=</span> <span class="s">"Juan Perez Ramirez"</span><span class="p">;</span>
<span class="n">card</span><span class="p">.</span><span class="n">CardNumber</span> <span class="p">=</span> <span class="s">"4111111111111111"</span><span class="p">;</span>
<span class="n">card</span><span class="p">.</span><span class="n">Cvv2</span> <span class="p">=</span> <span class="s">"110"</span><span class="p">;</span>
<span class="n">card</span><span class="p">.</span><span class="n">ExpirationMonth</span> <span class="p">=</span> <span class="s">"12"</span><span class="p">;</span>
<span class="n">card</span><span class="p">.</span><span class="n">ExpirationYear</span> <span class="p">=</span> <span class="s">"20"</span><span class="p">;</span>
<span class="n">request</span><span class="p">.</span><span class="n">Card</span> <span class="p">=</span> <span class="n">card</span><span class="p">;</span>
<span class="n">request</span><span class="p">.</span><span class="n">Amount</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">Decimal</span><span class="p">(</span><span class="m">100.00</span><span class="p">);</span>
<span class="n">request</span><span class="p">.</span><span class="n">Description</span> <span class="p">=</span> <span class="s">"Pago a cuenta de banco"</span><span class="p">;</span>
<span class="n">request</span><span class="p">.</span><span class="n">OrderId</span> <span class="p">=</span> <span class="s">"ord-101"</span><span class="p">;</span>

<span class="n">Payout</span> <span class="p">=</span> <span class="n">api</span><span class="p">.</span><span class="n">PayoutService</span><span class="p">.</span><span class="nf">Create</span><span class="p">(</span><span class="s">"ag4nktpdzebjiye1tlze"</span><span class="p">,</span> <span class="n">request</span><span class="p">);</span>
</pre><pre class="highlight javascript"><span class="kd">var</span> <span class="nx">payoutRequest</span> <span class="o">=</span> <span class="p">{</span>
   <span class="s1">'method'</span><span class="err">:</span> <span class="s1">'card'</span><span class="p">,</span>
   <span class="s1">'card'</span><span class="err">:</span> <span class="p">{</span>
      <span class="s1">'card_number'</span><span class="err">:</span> <span class="s1">'4111111111111111'</span><span class="p">,</span>
      <span class="s1">'holder_name'</span><span class="err">:</span> <span class="s1">'Juan Perez Ramirez'</span>
   <span class="p">},</span>
   <span class="s1">'amount'</span> <span class="err">:</span> <span class="mf">10.50</span><span class="p">,</span>
   <span class="s1">'description'</span> <span class="err">:</span> <span class="s1">'Retiro de saldo semanal'</span><span class="p">,</span>
   <span class="s1">'order_id'</span> <span class="err">:</span> <span class="s1">'oid-00021'</span>
<span class="p">};</span>

<span class="nx">openpay</span><span class="p">.</span><span class="nx">customers</span><span class="p">.</span><span class="nx">payouts</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="s1">'asynwirguzkgq2bizogo'</span><span class="p">,</span> <span class="nx">payoutRequest</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">payout</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// ...
</span><span class="p">});</span>
</pre><pre class="highlight ruby"><span class="vi">@openpay</span><span class="o">=</span><span class="no">OpenpayApi</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="s2">"mzdtln0bmtms6o3kck8f"</span><span class="p">,</span><span class="s2">"sk_e568c42a6c384b7ab02cd47d2e407cab"</span><span class="p">)</span>
<span class="vi">@payouts</span><span class="o">=</span><span class="vi">@openpay</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span><span class="ss">:payouts</span><span class="p">)</span>
<span class="n">card_hash</span><span class="o">=</span><span class="p">{</span>
     <span class="s2">"holder_name"</span> <span class="o">=&gt;</span> <span class="s2">"Juan Perez Ramirez"</span><span class="p">,</span>
     <span class="s2">"card_number"</span> <span class="o">=&gt;</span> <span class="s2">"411111XXXXXX1111"</span><span class="p">,</span>
     <span class="s2">"cvv2"</span> <span class="o">=&gt;</span> <span class="s2">"110"</span><span class="p">,</span>
     <span class="s2">"expiration_month"</span> <span class="o">=&gt;</span> <span class="s2">"12"</span><span class="p">,</span>
     <span class="s2">"expiration_year"</span> <span class="o">=&gt;</span> <span class="s2">"20"</span>
   <span class="p">}</span>
<span class="n">request_hash</span><span class="o">=</span><span class="p">{</span>
     <span class="s2">"method"</span> <span class="o">=&gt;</span> <span class="s2">"card"</span><span class="p">,</span>
     <span class="s2">"card"</span> <span class="o">=&gt;</span> <span class="n">card_hash</span><span class="p">,</span>
     <span class="s2">"amount"</span> <span class="o">=&gt;</span> <span class="mi">10</span><span class="o">.</span><span class="mi">50</span><span class="p">,</span>
     <span class="s2">"description"</span> <span class="o">=&gt;</span> <span class="s2">"Retiro de saldo semanal"</span><span class="p">,</span>
     <span class="s2">"order_id"</span> <span class="o">=&gt;</span> <span class="s2">"oid-00021"</span>
   <span class="p">}</span>

<span class="n">response_hash</span><span class="o">=</span><span class="vi">@payouts</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span><span class="n">request_hash</span><span class="p">.</span><span class="nf">to_hash</span><span class="p">,</span> <span class="s2">"asynwirguzkgq2bizogo"</span><span class="p">)</span>
</pre>
<blockquote>
<p>Ejemplo de respuesta</p>
</blockquote>
<pre class="highlight json"><span class="p">{</span><span class="w">
   </span><span class="s2">"id"</span><span class="p">:</span><span class="s2">"trwpxhrgfeub9eqdyvqz"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"amount"</span><span class="p">:</span><span class="mf">10.50</span><span class="p">,</span><span class="w">
   </span><span class="s2">"authorization"</span><span class="p">:</span><span class="err">null</span><span class="p">,</span><span class="w">
   </span><span class="s2">"method"</span><span class="p">:</span><span class="s2">"card"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"operation_type"</span><span class="p">:</span><span class="s2">"out"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"transaction_type"</span><span class="p">:</span><span class="s2">"payout"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"card"</span><span class="p">:{</span><span class="w">
      </span><span class="s2">"type"</span><span class="p">:</span><span class="s2">"debit"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"brand"</span><span class="p">:</span><span class="s2">"visa"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"address"</span><span class="p">:</span><span class="err">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"card_number"</span><span class="p">:</span><span class="s2">"411111XXXXXX1111"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"holder_name"</span><span class="p">:</span><span class="s2">"Juan Perez Ramirez"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"expiration_year"</span><span class="p">:</span><span class="s2">"20"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"expiration_month"</span><span class="p">:</span><span class="s2">"12"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"allows_charges"</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="s2">"allows_payouts"</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="s2">"bank_name"</span><span class="p">:</span><span class="s2">"Banamex"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"bank_code"</span><span class="p">:</span><span class="s2">"002"</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="s2">"status"</span><span class="p">:</span><span class="s2">"in_progress"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"currency"</span><span class="p">:</span><span class="s2">"MXN"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"creation_date"</span><span class="p">:</span><span class="s2">"2014-05-26T17:04:26-05:00"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"operation_date"</span><span class="p">:</span><span class="s2">"2014-05-26T17:04:26-05:00"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"description"</span><span class="p">:</span><span class="s2">"Retiro de saldo semanal"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"error_message"</span><span class="p">:</span><span class="err">null</span><span class="p">,</span><span class="w">
   </span><span class="s2">"order_id"</span><span class="p">:</span><span class="s2">"oid-00021"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"customer_id"</span><span class="p">:</span><span class="s2">"asynwirguzkgq2bizogo"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></pre>
<p>Envío un pago tarjeta de débito. En dado caso que la tarjeta usada no sea débito los fondos se regresarán a la cuenta de donde fueron retirados.</p>

<h3 id="petición">Petición</h3>

<table><thead>
<tr>
<th>Propiedad</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>method</td>
<td><strong><em>string</em></strong> (requerido) <br/>Debe contener el valor <strong>card</strong>.</td>
</tr>
<tr>
<td>card</td>
<td><strong><em>object</em></strong> (requerido) <br/>Datos de la tarjeta a la que se enviarán los fondos. <br/><br/> <strong>card_number</strong>.- Número de tarjeta de crédito a la que se enviarán los fondos <br/><strong>holder_name</strong>.- Nombre del tarjeta habiente propietario de la tarjeta.</td>
</tr>
<tr>
<td>amount</td>
<td><strong><em>numeric</em></strong> (requerido) <br/>Cantidad del cargo. Debe ser una cantidad mayor a cero, con hasta dos dígitos decimales.</td>
</tr>
<tr>
<td>description</td>
<td><strong><em>string</em></strong> (requerido, longitud = 250) <br/>Una descripción asociada al cargo.</td>
</tr>
<tr>
<td>order_id</td>
<td><strong><em>string</em></strong> (opcional, longitud = 100) <br/>Identificador único del cargo. Debe ser único entre todas las transacciones.</td>
</tr>
</tbody></table>

<h3 id="respuesta">Respuesta</h3>

<p>Regresa un <a href="#objeto-transacción">objeto de transacción</a> con la información del pago o una <a href="#objeto-error">respuesta de error</a>.</p>

<h2 id="obtener-un-pago">Obtener un pago</h2>

<blockquote>
<p>Definición</p>
</blockquote>
<pre class="highlight shell">Comercio
GET https://sandbox-api.openpay.mx/v1/<span class="o">{</span>MERCHANT_ID<span class="o">}</span>/payouts/<span class="o">{</span>TRANSACTION_ID<span class="o">}</span>

Comercio
GET https://sandbox-api.openpay.mx/v1/<span class="o">{</span>MERCHANT_ID<span class="o">}</span>/customers/<span class="o">{</span>CUSTOMER_ID<span class="o">}</span>/payouts/<span class="o">{</span>TRANSACTION_ID<span class="o">}</span>
</pre><pre class="highlight php"><span class="cp">&lt;?</span>
<span class="nx">Comercio</span>
<span class="nv">$payout</span> <span class="o">=</span> <span class="nv">$openpay</span><span class="o">-&gt;</span><span class="na">payouts</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="nx">transactionId</span><span class="p">);</span>

<span class="nx">Cliente</span>
<span class="nv">$customer</span> <span class="o">=</span> <span class="nv">$openpay</span><span class="o">-&gt;</span><span class="na">customers</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="nx">customerId</span><span class="p">);</span>
<span class="nv">$payout</span> <span class="o">=</span> <span class="nv">$customer</span><span class="o">-&gt;</span><span class="na">payouts</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="nx">transactionId</span><span class="p">);</span>
<span class="cp">?&gt;</span>
</pre><pre class="highlight java"><span class="c1">//Cliente</span>
<span class="n">openpayAPI</span><span class="o">.</span><span class="na">payouts</span><span class="o">().</span><span class="na">get</span><span class="o">(</span><span class="n">String</span> <span class="n">customerId</span><span class="o">,</span> <span class="n">String</span> <span class="n">transactionId</span><span class="o">);</span>

<span class="c1">//Comercio</span>
<span class="n">openpayAPI</span><span class="o">.</span><span class="na">payouts</span><span class="o">().</span><span class="na">get</span><span class="o">(</span><span class="n">String</span> <span class="n">transactionId</span><span class="o">);</span>
</pre><pre class="highlight csharp"><span class="c1">//Cliente
</span><span class="n">openpayAPI</span><span class="p">.</span><span class="n">PayoutService</span><span class="p">.</span><span class="nf">Get</span><span class="p">(</span><span class="kt">string</span> <span class="n">customer_id</span><span class="p">,</span> <span class="kt">string</span> <span class="n">transaction_id</span><span class="p">);</span>

<span class="c1">//Comercio
</span><span class="n">openpayAPI</span><span class="p">.</span><span class="n">PayoutService</span><span class="p">.</span><span class="nf">Get</span><span class="p">(</span><span class="kt">string</span> <span class="n">transaction_id</span><span class="p">);</span>
</pre><pre class="highlight javascript"><span class="c1">// Comercio
</span><span class="nx">openpay</span><span class="p">.</span><span class="nx">payouts</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="nx">transactionId</span><span class="p">,</span> <span class="nx">callback</span><span class="p">);</span>

<span class="c1">// Cliente
</span><span class="nx">openpay</span><span class="p">.</span><span class="nx">customers</span><span class="p">.</span><span class="nx">payouts</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="nx">customerId</span><span class="p">,</span> <span class="nx">transactionId</span><span class="p">,</span> <span class="nx">callback</span><span class="p">);</span>
</pre><pre class="highlight ruby"><span class="c1">#Cliente</span>
<span class="vi">@payouts</span><span class="o">=</span><span class="vi">@openpay</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span><span class="ss">:payouts</span><span class="p">)</span>
<span class="vi">@payouts</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="n">transaction_id</span><span class="p">,</span> <span class="n">customer_id</span><span class="p">)</span>

<span class="c1">#Comercio</span>
<span class="vi">@payouts</span><span class="o">=</span><span class="vi">@openpay</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span><span class="ss">:payouts</span><span class="p">)</span>
<span class="vi">@payouts</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="n">transaction_id</span><span class="p">)</span>
</pre>
<blockquote>
<p>Ejemplo de petición con cliente</p>
</blockquote>
<pre class="highlight shell">curl https://sandbox-api.openpay.mx/v1/mzdtln0bmtms6o3kck8f/customers/asynwirguzkgq2bizogo/payouts/trwpxhrgfeub9eqdyvqz <span class="se">\</span>
   -u sk_e568c42a6c384b7ab02cd47d2e407cab:
</pre><pre class="highlight php"><span class="cp">&lt;?</span>
<span class="nv">$openpay</span> <span class="o">=</span> <span class="nx">Openpay</span><span class="o">::</span><span class="na">getInstance</span><span class="p">(</span><span class="s1">'mzdtln0bmtms6o3kck8f'</span><span class="p">,</span> <span class="s1">'sk_e568c42a6c384b7ab02cd47d2e407cab'</span><span class="p">);</span>

<span class="nv">$customer</span> <span class="o">=</span> <span class="nv">$openpay</span><span class="o">-&gt;</span><span class="na">customers</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">'asynwirguzkgq2bizogo'</span><span class="p">);</span>
<span class="nv">$payout</span> <span class="o">=</span> <span class="nv">$customer</span><span class="o">-&gt;</span><span class="na">payouts</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">'trwpxhrgfeub9eqdyvqz'</span><span class="p">);</span>
<span class="cp">?&gt;</span>
</pre><pre class="highlight java"><span class="n">OpenpayAPI</span> <span class="n">api</span> <span class="o">=</span> <span class="k">new</span> <span class="n">OpenpayAPI</span><span class="o">(</span><span class="s">"https://sandbox-api.openpay.mx"</span><span class="o">,</span> <span class="s">"sk_b05586ec98454522ac7d4ccdcaec9128"</span><span class="o">,</span> <span class="s">"maonhzpqm8xp2ydssovf"</span><span class="o">);</span>
<span class="n">Payout</span> <span class="n">payout</span> <span class="o">=</span> <span class="n">api</span><span class="o">.</span><span class="na">payouts</span><span class="o">().</span><span class="na">get</span><span class="o">(</span><span class="s">"ag4nktpdzebjiye1tlze"</span><span class="o">,</span> <span class="s">"tr6cxbcefzatd10guvvw"</span><span class="o">);</span>
</pre><pre class="highlight csharp"><span class="n">OpenpayAPI</span> <span class="n">api</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">OpenpayAPI</span><span class="p">(</span><span class="s">"sk_b05586ec98454522ac7d4ccdcaec9128"</span><span class="p">,</span> <span class="s">"maonhzpqm8xp2ydssovf"</span><span class="p">);</span>
<span class="n">Payout</span> <span class="p">=</span> <span class="n">api</span><span class="p">.</span><span class="n">PayoutService</span><span class="p">.</span><span class="nf">Get</span><span class="p">(</span><span class="s">"ag4nktpdzebjiye1tlze"</span><span class="p">,</span> <span class="s">"tr6cxbcefzatd10guvvw"</span><span class="p">);</span>
</pre><pre class="highlight javascript"><span class="nx">openpay</span><span class="p">.</span><span class="nx">customers</span><span class="p">.</span><span class="nx">payouts</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">'ag4nktpdzebjiye1tlze'</span><span class="p">,</span> <span class="s1">'tr6cxbcefzatd10guvvw'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">payout</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// ...
</span><span class="p">});</span>
</pre><pre class="highlight ruby"><span class="vi">@openpay</span><span class="o">=</span><span class="no">OpenpayApi</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="s2">"mzdtln0bmtms6o3kck8f"</span><span class="p">,</span><span class="s2">"sk_e568c42a6c384b7ab02cd47d2e407cab"</span><span class="p">)</span>
<span class="vi">@payouts</span><span class="o">=</span><span class="vi">@openpay</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span><span class="ss">:payouts</span><span class="p">)</span>

<span class="n">response_hash</span><span class="o">=</span><span class="vi">@payouts</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="s2">"tr6cxbcefzatd10guvvw"</span><span class="p">,</span> <span class="s2">"asynwirguzkgq2bizogo"</span><span class="p">)</span>
</pre>
<blockquote>
<p>Ejemplo de respuesta</p>
</blockquote>
<pre class="highlight json"><span class="p">{</span><span class="w">
   </span><span class="s2">"id"</span><span class="p">:</span><span class="s2">"trwpxhrgfeub9eqdyvqz"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"amount"</span><span class="p">:</span><span class="mf">10.50</span><span class="p">,</span><span class="w">
   </span><span class="s2">"authorization"</span><span class="p">:</span><span class="s2">"TRWPXHRGFEUB9EQDYVQZ"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"method"</span><span class="p">:</span><span class="s2">"card"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"operation_type"</span><span class="p">:</span><span class="s2">"out"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"transaction_type"</span><span class="p">:</span><span class="s2">"payout"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"card"</span><span class="p">:{</span><span class="w">
      </span><span class="s2">"type"</span><span class="p">:</span><span class="s2">"debit"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"brand"</span><span class="p">:</span><span class="s2">"visa"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"address"</span><span class="p">:</span><span class="err">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"card_number"</span><span class="p">:</span><span class="s2">"411111XXXXXX1111"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"holder_name"</span><span class="p">:</span><span class="s2">"Juan Perez Ramirez"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"expiration_year"</span><span class="p">:</span><span class="err">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"expiration_month"</span><span class="p">:</span><span class="err">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"allows_charges"</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="s2">"allows_payouts"</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="s2">"bank_name"</span><span class="p">:</span><span class="s2">"Banamex"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"bank_code"</span><span class="p">:</span><span class="s2">"002"</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="s2">"status"</span><span class="p">:</span><span class="s2">"completed"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"currency"</span><span class="p">:</span><span class="s2">"MXN"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"creation_date"</span><span class="p">:</span><span class="s2">"2014-05-26T17:04:26-05:00"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"operation_date"</span><span class="p">:</span><span class="s2">"2014-05-26T17:06:28-05:00"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"description"</span><span class="p">:</span><span class="s2">"Retiro de saldo semanal"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"error_message"</span><span class="p">:</span><span class="err">null</span><span class="p">,</span><span class="w">
   </span><span class="s2">"order_id"</span><span class="p">:</span><span class="s2">"oid-00021"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"customer_id"</span><span class="p">:</span><span class="s2">"asynwirguzkgq2bizogo"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></pre>
<p>Regresa la información de un pago realizado. Es necesario conocer el id del pago.</p>

<h3 id="petición">Petición</h3>

<table><thead>
<tr>
<th>Propiedad</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_id</td>
<td><em><strong>string</strong></em> (requerido, longitud = 45)<br/>Identificador del pago a consultar.</td>
</tr>
</tbody></table>

<h3 id="respuesta">Respuesta</h3>

<p>Regresa un <a href="#objeto-transacción">objeto de transacción</a> con la información del pago o una <a href="#objeto-error">respuesta de error</a>.</p>

<h2 id="listado-de-pagos">Listado de pagos</h2>

<blockquote>
<p>Definición</p>
</blockquote>
<pre class="highlight shell">Comercio
GET https://sandbox-api.openpay.mx/v1/<span class="o">{</span>MERCHANT_ID<span class="o">}</span>/payouts

Comercio
GET https://sandbox-api.openpay.mx/v1/<span class="o">{</span>MERCHANT_ID<span class="o">}</span>/customers/<span class="o">{</span>CUSTOMER_ID<span class="o">}</span>/payouts
</pre><pre class="highlight php"><span class="cp">&lt;?</span>
<span class="nx">Comercio</span>
<span class="nv">$payoutList</span> <span class="o">=</span> <span class="nv">$openpay</span><span class="o">-&gt;</span><span class="na">payouts</span><span class="o">-&gt;</span><span class="na">getList</span><span class="p">(</span><span class="nx">searchParams</span><span class="p">);</span>

<span class="nx">Cliente</span>
<span class="nv">$customer</span> <span class="o">=</span> <span class="nv">$openpay</span><span class="o">-&gt;</span><span class="na">customers</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="nx">customerId</span><span class="p">);</span>
<span class="nv">$payoutList</span> <span class="o">=</span> <span class="nv">$customer</span><span class="o">-&gt;</span><span class="na">payouts</span><span class="o">-&gt;</span><span class="na">getList</span><span class="p">(</span><span class="nx">searchParams</span><span class="p">);</span>
<span class="cp">?&gt;</span>
</pre><pre class="highlight java"><span class="c1">//Cliente</span>
<span class="n">openpayAPI</span><span class="o">.</span><span class="na">payouts</span><span class="o">().</span><span class="na">list</span><span class="o">(</span><span class="n">String</span> <span class="n">customerId</span><span class="o">,</span> <span class="n">SearchParams</span> <span class="n">request</span><span class="o">);</span>

<span class="c1">//Comercio</span>
<span class="n">openpayAPI</span><span class="o">.</span><span class="na">payouts</span><span class="o">().</span><span class="na">list</span><span class="o">(</span><span class="n">SearchParams</span> <span class="n">request</span><span class="o">);</span>
</pre><pre class="highlight csharp"><span class="c1">//Cliente
</span><span class="n">openpayAPI</span><span class="p">.</span><span class="n">PayoutService</span><span class="p">.</span><span class="nf">List</span><span class="p">(</span><span class="kt">string</span> <span class="n">customer_id</span><span class="p">,</span> <span class="n">SearchParams</span> <span class="n">request</span> <span class="p">=</span> <span class="k">null</span><span class="p">);</span>

<span class="c1">//Comercio
</span><span class="n">openpayAPI</span><span class="p">.</span><span class="n">PayoutService</span><span class="p">.</span><span class="nf">List</span><span class="p">(</span><span class="n">SearchParams</span> <span class="n">request</span> <span class="p">=</span> <span class="k">null</span><span class="p">);</span>
</pre><pre class="highlight javascript"><span class="c1">// Comercio
</span><span class="nx">openpay</span><span class="p">.</span><span class="nx">payouts</span><span class="p">.</span><span class="nx">list</span><span class="p">(</span><span class="nx">callback</span><span class="p">);</span>
<span class="nx">openpay</span><span class="p">.</span><span class="nx">payouts</span><span class="p">.</span><span class="nx">list</span><span class="p">(</span><span class="nx">searchParams</span><span class="p">,</span> <span class="nx">callback</span><span class="p">);</span>

<span class="c1">// Cliente
</span><span class="nx">openpay</span><span class="p">.</span><span class="nx">customers</span><span class="p">.</span><span class="nx">payouts</span><span class="p">.</span><span class="nx">list</span><span class="p">(</span><span class="nx">customerId</span><span class="p">,</span> <span class="nx">callback</span><span class="p">);</span>
<span class="nx">openpay</span><span class="p">.</span><span class="nx">customers</span><span class="p">.</span><span class="nx">payouts</span><span class="p">.</span><span class="nx">list</span><span class="p">(</span><span class="nx">customerId</span><span class="p">,</span> <span class="nx">searchParams</span><span class="p">,</span> <span class="nx">callback</span><span class="p">);</span>
</pre><pre class="highlight ruby"><span class="c1">#Cliente</span>
<span class="vi">@payouts</span><span class="o">=</span><span class="vi">@openpay</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span><span class="ss">:payouts</span><span class="p">)</span>
<span class="vi">@payouts</span><span class="p">.</span><span class="nf">all</span><span class="p">(</span><span class="n">customer_id</span><span class="p">)</span>

<span class="c1">#Comercio</span>
<span class="vi">@payouts</span><span class="o">=</span><span class="vi">@openpay</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span><span class="ss">:payouts</span><span class="p">)</span>
<span class="vi">@payouts</span><span class="p">.</span><span class="nf">all</span>
</pre>
<blockquote>
<p>Ejemplo de petición </p>
</blockquote>
<pre class="highlight shell">curl -g <span class="s2">"https://sandbox-api.openpay.mx/v1/mzdtln0bmtms6o3kck8f/customers/asynwirguzkgq2bizogo/payouts?creation[gte]=2013-11-01&amp;limit=2"</span> <span class="se">\</span>
   -u sk_e568c42a6c384b7ab02cd47d2e407cab: 
</pre><pre class="highlight php"><span class="cp">&lt;?</span>
<span class="nv">$openpay</span> <span class="o">=</span> <span class="nx">Openpay</span><span class="o">::</span><span class="na">getInstance</span><span class="p">(</span><span class="s1">'mzdtln0bmtms6o3kck8f'</span><span class="p">,</span> <span class="s1">'sk_e568c42a6c384b7ab02cd47d2e407cab'</span><span class="p">);</span>

<span class="nv">$searchParams</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">'creation[gte]'</span> <span class="o">=&gt;</span> <span class="s1">'2013-11-01'</span><span class="p">,</span>
    <span class="s1">'creation[lte]'</span> <span class="o">=&gt;</span> <span class="s1">'2017-12-31'</span><span class="p">,</span>
    <span class="s1">'offset'</span> <span class="o">=&gt;</span> <span class="mi">0</span><span class="p">,</span>
    <span class="s1">'limit'</span> <span class="o">=&gt;</span> <span class="mi">2</span><span class="p">);</span>

<span class="nv">$customer</span> <span class="o">=</span> <span class="nv">$openpay</span><span class="o">-&gt;</span><span class="na">customers</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">'asynwirguzkgq2bizogo'</span><span class="p">);</span>
<span class="nv">$payoutList</span> <span class="o">=</span> <span class="nv">$customer</span><span class="o">-&gt;</span><span class="na">payouts</span><span class="o">-&gt;</span><span class="na">getList</span><span class="p">(</span><span class="nv">$searchParams</span><span class="p">);</span>
<span class="cp">?&gt;</span>
</pre><pre class="highlight java"><span class="kd">final</span> <span class="n">Calendar</span> <span class="n">dateGte</span> <span class="o">=</span> <span class="n">Calendar</span><span class="o">.</span><span class="na">getInstance</span><span class="o">();</span>
<span class="kd">final</span> <span class="n">Calendar</span> <span class="n">dateLte</span> <span class="o">=</span> <span class="n">Calendar</span><span class="o">.</span><span class="na">getInstance</span><span class="o">();</span>
<span class="n">dateGte</span><span class="o">.</span><span class="na">set</span><span class="o">(</span><span class="mi">2014</span><span class="o">,</span> <span class="mi">5</span><span class="o">,</span> <span class="mi">1</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span> <span class="mi">0</span><span class="o">);</span>
<span class="n">dateLte</span><span class="o">.</span><span class="na">set</span><span class="o">(</span><span class="mi">2014</span><span class="o">,</span> <span class="mi">5</span><span class="o">,</span> <span class="mi">15</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span> <span class="mi">0</span><span class="o">);</span>

<span class="n">OpenpayAPI</span> <span class="n">api</span> <span class="o">=</span> <span class="k">new</span> <span class="n">OpenpayAPI</span><span class="o">(</span><span class="s">"https://sandbox-api.openpay.mx"</span><span class="o">,</span> <span class="s">"sk_b05586ec98454522ac7d4ccdcaec9128"</span><span class="o">,</span> <span class="s">"maonhzpqm8xp2ydssovf"</span><span class="o">);</span>
<span class="n">SearchParams</span> <span class="n">request</span> <span class="o">=</span> <span class="k">new</span> <span class="n">SearchParams</span><span class="o">();</span>
<span class="n">request</span><span class="o">.</span><span class="na">creationGte</span><span class="o">(</span><span class="n">dateGte</span><span class="o">.</span><span class="na">getTime</span><span class="o">());</span>
<span class="n">request</span><span class="o">.</span><span class="na">creationLte</span><span class="o">(</span><span class="n">dateLte</span><span class="o">.</span><span class="na">getTime</span><span class="o">());</span>
<span class="n">request</span><span class="o">.</span><span class="na">offset</span><span class="o">(</span><span class="mi">0</span><span class="o">);</span>
<span class="n">request</span><span class="o">.</span><span class="na">limit</span><span class="o">(</span><span class="mi">100</span><span class="o">);</span>
<span class="n">request</span><span class="o">.</span><span class="na">amount</span><span class="o">(</span><span class="k">new</span> <span class="n">BigDecimal</span><span class="o">(</span><span class="s">"100.00"</span><span class="o">));</span>

<span class="n">List</span><span class="o">&lt;</span><span class="n">Payout</span><span class="o">&gt;</span> <span class="n">payouts</span> <span class="o">=</span> <span class="n">api</span><span class="o">.</span><span class="na">payouts</span><span class="o">().</span><span class="na">list</span><span class="o">(</span><span class="s">"ag4nktpdzebjiye1tlze"</span><span class="o">,</span> <span class="n">request</span><span class="o">);</span>
</pre><pre class="highlight csharp"><span class="n">OpenpayAPI</span> <span class="n">api</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">OpenpayAPI</span><span class="p">(</span><span class="s">"sk_b05586ec98454522ac7d4ccdcaec9128"</span><span class="p">,</span> <span class="s">"maonhzpqm8xp2ydssovf"</span><span class="p">);</span>
<span class="n">SearchParams</span> <span class="n">request</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">SearchParams</span><span class="p">();</span>
<span class="n">request</span><span class="p">.</span><span class="n">CreationGte</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">Datetime</span><span class="p">(</span><span class="m">2014</span><span class="p">,</span> <span class="m">5</span><span class="p">,</span> <span class="m">1</span><span class="p">);</span>
<span class="n">request</span><span class="p">.</span><span class="n">CreationLte</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">DateTime</span><span class="p">(</span><span class="m">2014</span><span class="p">,</span> <span class="m">5</span><span class="p">,</span> <span class="m">15</span><span class="p">);</span>
<span class="n">request</span><span class="p">.</span><span class="n">Offset</span> <span class="p">=</span> <span class="m">0</span><span class="p">;</span>
<span class="n">request</span><span class="p">.</span><span class="n">Limit</span> <span class="p">=</span> <span class="m">100</span><span class="p">;</span>
<span class="n">request</span><span class="p">.</span><span class="n">Amount</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">Decimal</span><span class="p">(</span><span class="m">100.00</span><span class="p">);</span>

<span class="n">List</span><span class="p">&lt;</span><span class="n">Payout</span><span class="p">&gt;</span> <span class="n">payouts</span> <span class="p">=</span> <span class="n">api</span><span class="p">.</span><span class="n">PayoutService</span><span class="p">.</span><span class="nf">List</span><span class="p">(</span><span class="s">"ag4nktpdzebjiye1tlze"</span><span class="p">,</span> <span class="n">request</span><span class="p">);</span>
</pre><pre class="highlight javascript"><span class="kd">var</span> <span class="nx">searchParams</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s1">'creation[gte]'</span> <span class="err">:</span> <span class="s1">'2013-11-01'</span><span class="p">,</span>
  <span class="s1">'limit'</span> <span class="err">:</span> <span class="mi">2</span>
<span class="p">};</span>

<span class="nx">openpay</span><span class="p">.</span><span class="nx">customers</span><span class="p">.</span><span class="nx">payouts</span><span class="p">.</span><span class="nx">list</span><span class="p">(</span><span class="s1">'asynwirguzkgq2bizogo'</span><span class="p">,</span> <span class="nx">searchParams</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">list</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// ...
</span><span class="p">});</span>
</pre><pre class="highlight ruby"><span class="vi">@openpay</span><span class="o">=</span><span class="no">OpenpayApi</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="s2">"mzdtln0bmtms6o3kck8f"</span><span class="p">,</span><span class="s2">"sk_e568c42a6c384b7ab02cd47d2e407cab"</span><span class="p">)</span>
<span class="vi">@payouts</span><span class="o">=</span><span class="vi">@openpay</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span><span class="ss">:payouts</span><span class="p">)</span>

<span class="n">response_hash</span><span class="o">=</span><span class="vi">@payouts</span><span class="p">.</span><span class="nf">all</span><span class="p">(</span><span class="s2">"asynwirguzkgq2bizogo"</span><span class="p">)</span>
</pre>
<blockquote>
<p>Ejemplo de respuesta</p>
</blockquote>
<pre class="highlight json"><span class="p">[</span><span class="w">
   </span><span class="p">{</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="s2">"tr4f2atubqchinw71vfs"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"amount"</span><span class="p">:</span><span class="mf">10.50</span><span class="p">,</span><span class="w">
      </span><span class="s2">"authorization"</span><span class="p">:</span><span class="s2">"TR4F2ATUBQCHINW71VFS"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"method"</span><span class="p">:</span><span class="s2">"bank_account"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"operation_type"</span><span class="p">:</span><span class="s2">"out"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"transaction_type"</span><span class="p">:</span><span class="s2">"payout"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"status"</span><span class="p">:</span><span class="s2">"completed"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"currency"</span><span class="p">:</span><span class="s2">"MXN"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"creation_date"</span><span class="p">:</span><span class="s2">"2014-05-26T17:23:03-05:00"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"operation_date"</span><span class="p">:</span><span class="s2">"2014-05-26T17:26:27-05:00"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"description"</span><span class="p">:</span><span class="s2">"Retiro de saldo semanal"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"error_message"</span><span class="p">:</span><span class="err">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"order_id"</span><span class="p">:</span><span class="s2">"oid-1110011"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"bank_account"</span><span class="p">:{</span><span class="w">
         </span><span class="s2">"clabe"</span><span class="p">:</span><span class="s2">"012XXXXXXXXXX24616"</span><span class="p">,</span><span class="w">
         </span><span class="s2">"bank_code"</span><span class="p">:</span><span class="s2">"012"</span><span class="p">,</span><span class="w">
         </span><span class="s2">"bank_name"</span><span class="p">:</span><span class="s2">"BANCOMER"</span><span class="p">,</span><span class="w">
         </span><span class="s2">"alias"</span><span class="p">:</span><span class="err">null</span><span class="p">,</span><span class="w">
         </span><span class="s2">"holder_name"</span><span class="p">:</span><span class="s2">"Mi empresa"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="s2">"customer_id"</span><span class="p">:</span><span class="s2">"asynwirguzkgq2bizogo"</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="p">{</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="s2">"trwpxhrgfeub9eqdyvqz"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"amount"</span><span class="p">:</span><span class="mf">10.50</span><span class="p">,</span><span class="w">
      </span><span class="s2">"authorization"</span><span class="p">:</span><span class="s2">"TRWPXHRGFEUB9EQDYVQZ"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"method"</span><span class="p">:</span><span class="s2">"card"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"operation_type"</span><span class="p">:</span><span class="s2">"out"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"transaction_type"</span><span class="p">:</span><span class="s2">"payout"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"card"</span><span class="p">:{</span><span class="w">
         </span><span class="s2">"type"</span><span class="p">:</span><span class="s2">"debit"</span><span class="p">,</span><span class="w">
         </span><span class="s2">"brand"</span><span class="p">:</span><span class="s2">"visa"</span><span class="p">,</span><span class="w">
         </span><span class="s2">"address"</span><span class="p">:</span><span class="err">null</span><span class="p">,</span><span class="w">
         </span><span class="s2">"card_number"</span><span class="p">:</span><span class="s2">"411111XXXXXX1111"</span><span class="p">,</span><span class="w">
         </span><span class="s2">"holder_name"</span><span class="p">:</span><span class="s2">"Juan Perez Ramirez"</span><span class="p">,</span><span class="w">
         </span><span class="s2">"expiration_year"</span><span class="p">:</span><span class="err">null</span><span class="p">,</span><span class="w">
         </span><span class="s2">"expiration_month"</span><span class="p">:</span><span class="err">null</span><span class="p">,</span><span class="w">
         </span><span class="s2">"allows_charges"</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span><span class="w">
         </span><span class="s2">"allows_payouts"</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span><span class="w">
         </span><span class="s2">"bank_name"</span><span class="p">:</span><span class="s2">"Banamex"</span><span class="p">,</span><span class="w">
         </span><span class="s2">"bank_code"</span><span class="p">:</span><span class="s2">"002"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="s2">"status"</span><span class="p">:</span><span class="s2">"completed"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"currency"</span><span class="p">:</span><span class="s2">"MXN"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"creation_date"</span><span class="p">:</span><span class="s2">"2014-05-26T17:04:26-05:00"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"operation_date"</span><span class="p">:</span><span class="s2">"2014-05-26T17:06:28-05:00"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"description"</span><span class="p">:</span><span class="s2">"Retiro de saldo semanal"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"error_message"</span><span class="p">:</span><span class="err">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"order_id"</span><span class="p">:</span><span class="s2">"oid-00021"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"customer_id"</span><span class="p">:</span><span class="s2">"asynwirguzkgq2bizogo"</span><span class="w">
   </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></pre>
<p>Obtiene un listado de los pagos realizados a nivel comercio o cliente.</p>

<h3 id="petición">Petición</h3>

<p>Puede realizar una búsqueda utilizando los siguiente parámetros como filtros.</p>

<table><thead>
<tr>
<th>Propiedad</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>creation</td>
<td><strong><em>date</em></strong> <br/>Igual a la fecha de creación. Formato yyyy-mm-dd</td>
</tr>
<tr>
<td>creation[gte]</td>
<td><strong><em>date</em></strong> <br/>Mayor a la fecha de creación. Formato yyyy-mm-dd</td>
</tr>
<tr>
<td>creation[lte]</td>
<td><strong><em>date</em></strong> <br/>Menor a la fecha de creación. Formato yyyy-mm-dd</td>
</tr>
<tr>
<td>offset</td>
<td><strong><em>numeric</em></strong> <br/>Número de registros a omitir al inicio, por defecto 0.</td>
</tr>
<tr>
<td>limit</td>
<td><strong><em>numeric</em></strong> <br/>Número de registros que se requieren, por defecto 10.</td>
</tr>
<tr>
<td>amount</td>
<td><strong><em>numeric</em></strong> <br/>Igual al monto.</td>
</tr>
<tr>
<td>amount[gte]</td>
<td><strong><em>numeric</em></strong> <br/>Mayor o igual al monto.</td>
</tr>
<tr>
<td>amount[lte]</td>
<td><strong><em>numeric</em></strong> <br/>Menor o igual al monto.</td>
</tr>
</tbody></table>

<h3 id="respuesta">Respuesta</h3>

<p>Regresa un listado de <a href="#objeto-transacción">objetos de transacción</a> de los pagos en orden descendente por fecha de creación.</p>

<h1 id="clientes">Clientes</h1>

<p>Los clientes son recursos en Openpay que se manejan dentro de su cuenta de comercio y puede representar usuarios, clientes o socios segun el tipo de negocio. </p>

<p>A los clientes les puedes agregar tarjetas y cuentas de banco para despues realizar transacciones de Cargo, Transferencia o Pago.</p>

<h2 id="objeto-cliente">Objeto Cliente</h2>

<blockquote>
<p>Ejemplo de objeto</p>
</blockquote>
<pre class="highlight json"><span class="p">{</span><span class="w">
   </span><span class="s2">"id"</span><span class="p">:</span><span class="s2">"cz4nkhrlcu9k7qd4lwqx"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"creation_date"</span><span class="p">:</span><span class="s2">"2013-11-08T12:04:46-06:00"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"name"</span><span class="p">:</span><span class="s2">"Rodrigo"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"last_name"</span><span class="p">:</span><span class="s2">"Velazco Perez"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"email"</span><span class="p">:</span><span class="s2">"rodrigo.velazco@payments.com"</span><span class="p">,</span><span class="w"> 
   </span><span class="s2">"phone_number"</span><span class="p">:</span><span class="s2">"4425667045"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"external_id"</span><span class="p">:</span><span class="s2">"cliente1"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"status"</span><span class="p">:</span><span class="s2">"active"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"balance"</span><span class="p">:</span><span class="mi">103</span><span class="p">,</span><span class="w">
   </span><span class="s2">"address"</span><span class="p">:{</span><span class="w">
      </span><span class="s2">"line1"</span><span class="p">:</span><span class="s2">"Av. 5 de febrero No. 1080 int Roble 207"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"line2"</span><span class="p">:</span><span class="s2">"Carrillo puerto"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"line3"</span><span class="p">:</span><span class="s2">"Zona industrial carrillo puerto"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"postal_code"</span><span class="p">:</span><span class="s2">"06500"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"state"</span><span class="p">:</span><span class="s2">"Querétaro"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"city"</span><span class="p">:</span><span class="s2">"Querétaro"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"country_code"</span><span class="p">:</span><span class="s2">"MX"</span><span class="w">
   </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></pre>
<table><thead>
<tr>
<th>Propiedad</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td><strong><em>string</em></strong> <br/>Identificador único del cliente.</td>
</tr>
<tr>
<td>creation_date</td>
<td><strong><em>datetime</em></strong> <br/>Fecha y hora en que se creó el cliente  en formato ISO 8601</td>
</tr>
<tr>
<td>name</td>
<td><strong><em>string</em></strong> <br/>Nombre del cliente.</td>
</tr>
<tr>
<td>last_name</td>
<td><strong><em>string</em></strong> <br/>Apellidos del cliente.</td>
</tr>
<tr>
<td>email</td>
<td><strong><em>string</em></strong> <br/>Cuenta de correo electrónico del cliente.</td>
</tr>
<tr>
<td>phone_number</td>
<td><strong><em>numeric</em></strong> <br/>Número telefónico del Cliente.</td>
</tr>
<tr>
<td>status</td>
<td><strong><em>string</em></strong> <br/>Estatus de la cuenta del cliente puede ser active o deleted. Si la cuenta se encuentra en estatus deleted no se permite realizar ninguna transacción.</td>
</tr>
<tr>
<td>balance</td>
<td><strong><em>numeric</em></strong> <br/>Saldo en la cuenta con dos decimales.</td>
</tr>
<tr>
<td>clabe</td>
<td><strong><em>numeric</em></strong> <br/>Cuenta CLABE asociada con la que puede recibir fondos realizando una  transferencia desde cualquier banco en México.</td>
</tr>
<tr>
<td><a href="#objeto-dirección">address</a></td>
<td><strong><em>object</em></strong> <br/>Dirección del Cliente. Usada comúnmente como dirección de envío.</td>
</tr>
</tbody></table>

<h2 id="crear-un-nuevo-cliente">Crear un nuevo cliente</h2>

<blockquote>
<p>Definición</p>
</blockquote>
<pre class="highlight shell">POST https://sandbox-api.openpay.mx/v1/<span class="o">{</span>MERCHANT_ID<span class="o">}</span>/customers
</pre><pre class="highlight php"><span class="cp">&lt;?</span>
<span class="nv">$customer</span> <span class="o">=</span> <span class="nv">$openpay</span><span class="o">-&gt;</span><span class="na">customers</span><span class="o">-&gt;</span><span class="na">add</span><span class="p">(</span><span class="nx">customerData</span><span class="p">);</span>
<span class="cp">?&gt;</span>
</pre><pre class="highlight java"><span class="n">openpayAPI</span><span class="o">.</span><span class="na">customers</span><span class="o">().</span><span class="na">create</span><span class="o">(</span><span class="n">Customer</span> <span class="n">customer</span><span class="o">);</span>
</pre><pre class="highlight csharp"><span class="n">openpayAPI</span><span class="p">.</span><span class="n">CustomerService</span><span class="p">.</span><span class="nf">Create</span><span class="p">(</span><span class="n">Customer</span> <span class="n">customer</span><span class="p">);</span>
</pre><pre class="highlight javascript"><span class="nx">openpay</span><span class="p">.</span><span class="nx">customers</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="nx">customerRequest</span><span class="p">,</span> <span class="nx">callback</span><span class="p">);</span>
</pre><pre class="highlight ruby"><span class="vi">@customers</span><span class="o">=</span><span class="vi">@openpay</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span><span class="ss">:customers</span><span class="p">)</span>
<span class="vi">@customers</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span><span class="n">request_hash</span><span class="p">)</span>
</pre>
<blockquote>
<p>Ejemplo de petición </p>
</blockquote>
<pre class="highlight shell">curl https://sandbox-api.openpay.mx/v1/mzdtln0bmtms6o3kck8f/customers <span class="se">\</span>
   -u sk_e568c42a6c384b7ab02cd47d2e407cab: <span class="se">\</span>
   -H <span class="s2">"Content-type: application/json"</span> <span class="se">\</span>
   -X POST -d <span class="s1">'{
   "name": "customer name",
   "email": "customer_email@me.com",
   "requires_account": false 
   }'</span> 
</pre><pre class="highlight php"><span class="cp">&lt;?</span>
<span class="nv">$openpay</span> <span class="o">=</span> <span class="nx">Openpay</span><span class="o">::</span><span class="na">getInstance</span><span class="p">(</span><span class="s1">'mzdtln0bmtms6o3kck8f'</span><span class="p">,</span> <span class="s1">'sk_e568c42a6c384b7ab02cd47d2e407cab'</span><span class="p">);</span>

<span class="nv">$customerData</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
     <span class="s1">'external_id'</span> <span class="o">=&gt;</span> <span class="s1">''</span><span class="p">,</span>
     <span class="s1">'name'</span> <span class="o">=&gt;</span> <span class="s1">'customer name'</span><span class="p">,</span>
     <span class="s1">'last_name'</span> <span class="o">=&gt;</span> <span class="s1">''</span><span class="p">,</span>
     <span class="s1">'email'</span> <span class="o">=&gt;</span> <span class="s1">'customer_email@me.com'</span><span class="p">,</span>
     <span class="s1">'requires_account'</span> <span class="o">=&gt;</span> <span class="kc">true</span><span class="p">,</span>
     <span class="s1">'phone_number'</span> <span class="o">=&gt;</span> <span class="s1">'44209087654'</span><span class="p">,</span>
     <span class="s1">'address'</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
         <span class="s1">'line1'</span> <span class="o">=&gt;</span> <span class="s1">'Calle 10'</span><span class="p">,</span>
         <span class="s1">'line2'</span> <span class="o">=&gt;</span> <span class="s1">'col. san pablo'</span><span class="p">,</span>
         <span class="s1">'line3'</span> <span class="o">=&gt;</span> <span class="s1">'entre la calle 1 y la 2'</span><span class="p">,</span>
         <span class="s1">'state'</span> <span class="o">=&gt;</span> <span class="s1">'Queretaro'</span><span class="p">,</span>
         <span class="s1">'city'</span> <span class="o">=&gt;</span> <span class="s1">'Queretaro'</span><span class="p">,</span>
         <span class="s1">'postal_code'</span> <span class="o">=&gt;</span> <span class="s1">'76000'</span><span class="p">,</span>
         <span class="s1">'country_code'</span> <span class="o">=&gt;</span> <span class="s1">'MX'</span>
      <span class="p">)</span>
   <span class="p">);</span>

<span class="nv">$customer</span> <span class="o">=</span> <span class="nv">$openpay</span><span class="o">-&gt;</span><span class="na">customers</span><span class="o">-&gt;</span><span class="na">add</span><span class="p">(</span><span class="nv">$customerData</span><span class="p">);</span>
<span class="cp">?&gt;</span>
</pre><pre class="highlight java"><span class="n">OpenpayAPI</span> <span class="n">api</span> <span class="o">=</span> <span class="k">new</span> <span class="n">OpenpayAPI</span><span class="o">(</span><span class="s">"https://sandbox-api.openpay.mx"</span><span class="o">,</span> <span class="s">"sk_b05586ec98454522ac7d4ccdcaec9128"</span><span class="o">,</span> <span class="s">"maonhzpqm8xp2ydssovf"</span><span class="o">);</span>
<span class="n">Customer</span> <span class="n">request</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Customer</span><span class="o">();</span>
<span class="n">request</span><span class="o">.</span><span class="na">externalId</span><span class="o">(</span><span class="s">"idExterno0101"</span><span class="o">);</span>
<span class="n">request</span><span class="o">.</span><span class="na">name</span><span class="o">(</span><span class="s">"Julian Gerardo"</span><span class="o">);</span>
<span class="n">request</span><span class="o">.</span><span class="na">lastName</span><span class="o">(</span><span class="s">"López Martínez"</span><span class="o">);</span>
<span class="n">request</span><span class="o">.</span><span class="na">email</span><span class="o">(</span><span class="s">"julian.martinez@gmail.com"</span><span class="o">);</span>
<span class="n">request</span><span class="o">.</span><span class="na">phoneNumber</span><span class="o">(</span><span class="s">"4421432915"</span><span class="o">);</span>
<span class="n">Address</span> <span class="n">address</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Address</span><span class="o">();</span>
<span class="n">address</span><span class="o">.</span><span class="na">city</span><span class="o">(</span><span class="s">"Queretaro"</span><span class="o">);</span>
<span class="n">address</span><span class="o">.</span><span class="na">countryCode</span><span class="o">(</span><span class="s">"MX"</span><span class="o">);</span>
<span class="n">address</span><span class="o">.</span><span class="na">state</span><span class="o">(</span><span class="s">"Queretaro"</span><span class="o">);</span>
<span class="n">address</span><span class="o">.</span><span class="na">postalCode</span><span class="o">(</span><span class="s">"79125"</span><span class="o">);</span>
<span class="n">address</span><span class="o">.</span><span class="na">line1</span><span class="o">(</span><span class="s">"Av. Pie de la cuesta #12"</span><span class="o">);</span>
<span class="n">address</span><span class="o">.</span><span class="na">line2</span><span class="o">(</span><span class="s">"Desarrollo San Pablo"</span><span class="o">);</span>
<span class="n">address</span><span class="o">.</span><span class="na">line3</span><span class="o">(</span><span class="s">"Qro. Qro."</span><span class="o">);</span>
<span class="n">request</span><span class="o">.</span><span class="na">address</span><span class="o">(</span><span class="n">address</span><span class="o">);</span>

<span class="n">request</span> <span class="o">=</span> <span class="n">api</span><span class="o">.</span><span class="na">customers</span><span class="o">().</span><span class="na">create</span><span class="o">(</span><span class="n">request</span><span class="o">);</span>
</pre><pre class="highlight csharp"><span class="n">OpenpayAPI</span> <span class="n">api</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">OpenpayAPI</span><span class="p">(</span><span class="s">"sk_b05586ec98454522ac7d4ccdcaec9128"</span><span class="p">,</span> <span class="s">"maonhzpqm8xp2ydssovf"</span><span class="p">);</span>
<span class="n">Customer</span> <span class="n">request</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">Customer</span><span class="p">();</span>
<span class="n">request</span><span class="p">.</span><span class="n">ExternalId</span> <span class="p">=</span> <span class="s">"idExterno0101"</span><span class="p">;</span>
<span class="n">request</span><span class="p">.</span><span class="n">Name</span> <span class="p">=</span> <span class="s">"Julian Gerardo"</span><span class="p">;</span>
<span class="n">request</span><span class="p">.</span><span class="n">LastName</span> <span class="p">=</span> <span class="s">"López Martínez"</span><span class="p">;</span>
<span class="n">request</span><span class="p">.</span><span class="n">Email</span> <span class="p">=</span> <span class="s">"julian.martinez@gmail.com"</span><span class="p">;</span>
<span class="n">request</span><span class="p">.</span><span class="n">PhoneNumber</span> <span class="p">=</span> <span class="s">"4421432915"</span><span class="p">;</span>
<span class="n">Address</span> <span class="n">address</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">Address</span><span class="p">();</span>
<span class="n">address</span><span class="p">.</span><span class="n">City</span> <span class="p">=</span> <span class="s">"Queretaro"</span><span class="p">;</span>
<span class="n">address</span><span class="p">.</span><span class="n">CountryCode</span> <span class="p">=</span> <span class="s">"MX"</span><span class="p">;</span>
<span class="n">address</span><span class="p">.</span><span class="n">State</span> <span class="p">=</span> <span class="s">"Queretaro"</span><span class="p">;</span>
<span class="n">address</span><span class="p">.</span><span class="n">PostalCode</span> <span class="p">=</span> <span class="s">"79125"</span><span class="p">;</span>
<span class="n">address</span><span class="p">.</span><span class="n">Line1</span> <span class="p">=</span> <span class="s">"Av. Pie de la cuesta #12"</span><span class="p">;</span>
<span class="n">address</span><span class="p">.</span><span class="n">Line2</span> <span class="p">=</span> <span class="s">"Desarrollo San Pablo"</span><span class="p">;</span>
<span class="n">address</span><span class="p">.</span><span class="n">Line3</span> <span class="p">=</span> <span class="s">"Qro. Qro."</span><span class="p">;</span>
<span class="n">request</span><span class="p">.</span><span class="n">Address</span> <span class="p">=</span> <span class="n">address</span><span class="p">;</span>

<span class="n">request</span> <span class="p">=</span> <span class="n">api</span><span class="p">.</span><span class="n">CustomerService</span><span class="p">.</span><span class="nf">Create</span><span class="p">(</span><span class="n">request</span><span class="p">);</span>
</pre><pre class="highlight javascript"><span class="kd">var</span> <span class="nx">customerRequest</span> <span class="o">=</span> <span class="p">{</span>
   <span class="s1">'name'</span><span class="err">:</span> <span class="s1">'customer name'</span><span class="p">,</span>
   <span class="s1">'email'</span><span class="err">:</span> <span class="s1">'customer_email@me.com'</span><span class="p">,</span>
   <span class="s1">'requires_account'</span><span class="err">:</span> <span class="kc">false</span> 
   <span class="p">};</span>

<span class="nx">openpay</span><span class="p">.</span><span class="nx">customers</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="nx">customerRequest</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">customer</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// ... 
</span><span class="p">});</span>
</pre><pre class="highlight ruby"><span class="vi">@openpay</span><span class="o">=</span><span class="no">OpenpayApi</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="s2">"mzdtln0bmtms6o3kck8f"</span><span class="p">,</span><span class="s2">"sk_e568c42a6c384b7ab02cd47d2e407cab"</span><span class="p">)</span>
<span class="vi">@customers</span><span class="o">=</span><span class="vi">@openpay</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span><span class="ss">:customers</span><span class="p">)</span>
<span class="n">address_hash</span><span class="o">=</span><span class="p">{</span>
      <span class="s2">"line1"</span> <span class="o">=&gt;</span> <span class="s2">"Calle 10"</span><span class="p">,</span>
      <span class="s2">"line2"</span> <span class="o">=&gt;</span> <span class="s2">"col. san pablo"</span><span class="p">,</span>
      <span class="s2">"line3"</span> <span class="o">=&gt;</span> <span class="s2">"entre la calle 1 y la 2"</span><span class="p">,</span>
      <span class="s2">"state"</span> <span class="o">=&gt;</span> <span class="s2">"Queretaro"</span><span class="p">,</span>
      <span class="s2">"city"</span> <span class="o">=&gt;</span> <span class="s2">"Queretaro"</span><span class="p">,</span>
      <span class="s2">"postal_code"</span> <span class="o">=&gt;</span> <span class="s2">"76000"</span><span class="p">,</span>
      <span class="s2">"country_code"</span> <span class="o">=&gt;</span> <span class="s2">"MX"</span>
   <span class="p">}</span>
<span class="n">request_hash</span><span class="o">=</span><span class="p">{</span>
     <span class="s2">"external_id"</span> <span class="o">=&gt;</span> <span class="kp">nil</span><span class="p">,</span>
     <span class="s2">"name"</span> <span class="o">=&gt;</span> <span class="s2">"customer name"</span><span class="p">,</span>
     <span class="s2">"last_name"</span> <span class="o">=&gt;</span> <span class="kp">nil</span><span class="p">,</span>
     <span class="s2">"email"</span> <span class="o">=&gt;</span> <span class="s2">"customer_email@me.com"</span><span class="p">,</span>
     <span class="s2">"requires_account"</span> <span class="o">=&gt;</span> <span class="kp">true</span><span class="p">,</span>
     <span class="s2">"phone_number"</span> <span class="o">=&gt;</span> <span class="s2">"44209087654"</span><span class="p">,</span>
     <span class="s2">"address"</span> <span class="o">=&gt;</span> <span class="n">address_hash</span>
   <span class="p">}</span>

<span class="n">response_hash</span><span class="o">=</span><span class="vi">@customers</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span><span class="n">request_hash</span><span class="p">.</span><span class="nf">to_hash</span><span class="p">)</span>
</pre>
<blockquote>
<p>Ejemplo de respuesta</p>
</blockquote>
<pre class="highlight json"><span class="p">{</span><span class="w">
   </span><span class="s2">"id"</span><span class="p">:</span><span class="s2">"anbnldwgni1way3yp2dw"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"name"</span><span class="p">:</span><span class="s2">"customer name"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"last_name"</span><span class="p">:</span><span class="err">null</span><span class="p">,</span><span class="w">
   </span><span class="s2">"email"</span><span class="p">:</span><span class="s2">"customer_email@me.com"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"phone_number"</span><span class="p">:</span><span class="err">null</span><span class="p">,</span><span class="w">
   </span><span class="s2">"address"</span><span class="p">:</span><span class="err">null</span><span class="p">,</span><span class="w">
   </span><span class="s2">"creation_date"</span><span class="p">:</span><span class="s2">"2014-05-20T16:47:47-05:00"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"external_id"</span><span class="p">:</span><span class="err">null</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></pre>
<p>Crea un objeto cliente.</p>

<h3 id="petición">Petición</h3>

<table><thead>
<tr>
<th>Propiedad</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>external_id</td>
<td><strong><em>string</em></strong> (opcional, longitud = 100)  <br/> Identificador externo único para el cliente asignado por el comercio.</td>
</tr>
<tr>
<td>name</td>
<td><strong><em>string</em></strong> (requerido, longitud = 100)<br/>Nombre(s) del cliente.</td>
</tr>
<tr>
<td>last_name</td>
<td><strong><em>string</em></strong> (opcional, longitud = 100)<br/>Apellidos del cliente.</td>
</tr>
<tr>
<td>email</td>
<td><strong><em>string</em></strong> (requerido, longitud = 100)<br/>Cuenta de correo electrónico del Cliente.</td>
</tr>
<tr>
<td>requires_account</td>
<td><strong><em>boolean</em></strong>  (opcional, default = true) <br/> Enviar con valor <strong>false</strong> si requiere que el cliente se cree sin cuenta para manejo del saldo.</td>
</tr>
<tr>
<td>phone_number</td>
<td><strong><em>string</em></strong> (opcional, longitud = 100) <br/>Número telefónico del Cliente.</td>
</tr>
<tr>
<td><a href="#objeto-dirección">address</a></td>
<td><strong><em>object</em></strong> (opcional) <br/>Dirección del Cliente. Usada comúnmente como dirección de envío.</td>
</tr>
</tbody></table>

<h3 id="respuesta">Respuesta</h3>

<p>Un <a href="#objeto-cliente">objeto cliente</a> en caso que se hayan enviado todos los datos correctamente, o una <a href="#objeto-error">respuesta de error</a> si ocurrió algun problema en la creación.</p>

<h2 id="actualizar-un-cliente">Actualizar un cliente</h2>

<blockquote>
<p>Definición</p>
</blockquote>
<pre class="highlight shell">PUT https://sandbox-api.openpay.mx/v1/<span class="o">{</span>MERCHANT_ID<span class="o">}</span>/customers/<span class="o">{</span>CUSTOMER_ID<span class="o">}</span>
</pre><pre class="highlight php"><span class="cp">&lt;?</span>
<span class="nv">$customer</span> <span class="o">=</span> <span class="nv">$openpay</span><span class="o">-&gt;</span><span class="na">customers</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="nx">customerId</span><span class="p">);</span>
<span class="nv">$customer</span><span class="o">-&gt;</span><span class="na">save</span><span class="p">();</span>
<span class="cp">?&gt;</span>
</pre><pre class="highlight java"><span class="n">openpayAPI</span><span class="o">.</span><span class="na">customers</span><span class="o">().</span><span class="na">update</span><span class="o">(</span><span class="n">Customer</span> <span class="n">customer</span><span class="o">);</span>
</pre><pre class="highlight csharp"><span class="n">openpayAPI</span><span class="p">.</span><span class="n">CustomerService</span><span class="p">.</span><span class="nf">Update</span><span class="p">(</span><span class="n">Customer</span> <span class="n">customer</span><span class="p">);</span>
</pre><pre class="highlight javascript"><span class="nx">openpay</span><span class="p">.</span><span class="nx">customers</span><span class="p">.</span><span class="nx">update</span><span class="p">(</span><span class="nx">customerId</span><span class="p">,</span> <span class="nx">customerRequest</span><span class="p">,</span> <span class="nx">callback</span><span class="p">);</span>
</pre><pre class="highlight ruby"><span class="vi">@customers</span><span class="o">=</span><span class="vi">@openpay</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span><span class="ss">:customers</span><span class="p">)</span>
<span class="vi">@customers</span><span class="p">.</span><span class="nf">update</span><span class="p">(</span><span class="n">request_hash</span><span class="p">)</span>
</pre>
<blockquote>
<p>Ejemplo de petición </p>
</blockquote>
<pre class="highlight shell">curl https://sandbox-api.openpay.mx/v1/mzdtln0bmtms6o3kck8f/customers/anbnldwgni1way3yp2dw <span class="se">\</span>
   -u sk_e568c42a6c384b7ab02cd47d2e407cab: <span class="se">\</span>
   -H <span class="s2">"Content-type: application/json"</span> <span class="se">\</span>
   -X PUT -d <span class="s1">'{
   "name": "customer name",
   "email": "customer_email@me.com",
   "address":{
      "city":"Queretaro",
      "state":"Queretaro",
      "line1":"Calle 10",
      "postal_code":"76000",
      "line2":"col. san pablo",
      "line3":"entre la calle 1 y la 2",
      "country_code":"MX"
   },
   "phone_number":"44209087654"
 }'</span> 
</pre><pre class="highlight php"><span class="cp">&lt;?</span>
<span class="nv">$openpay</span> <span class="o">=</span> <span class="nx">Openpay</span><span class="o">::</span><span class="na">getInstance</span><span class="p">(</span><span class="s1">'moiep6umtcnanql3jrxp'</span><span class="p">,</span> <span class="s1">'sk_3433941e467c1055b178ce26348b0fac'</span><span class="p">);</span>

<span class="nv">$customer</span> <span class="o">=</span> <span class="nv">$openpay</span><span class="o">-&gt;</span><span class="na">customers</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">'a9ualumwnrcxkl42l6mh'</span><span class="p">);</span>
<span class="nv">$customer</span><span class="o">-&gt;</span><span class="na">name</span> <span class="o">=</span> <span class="s1">'Juan'</span><span class="p">;</span>
<span class="nv">$customer</span><span class="o">-&gt;</span><span class="na">last_name</span> <span class="o">=</span> <span class="s1">'Godinez'</span><span class="p">;</span>
<span class="nv">$customer</span><span class="o">-&gt;</span><span class="na">save</span><span class="p">();</span>
<span class="cp">?&gt;</span>
</pre><pre class="highlight java"><span class="n">OpenpayAPI</span> <span class="n">api</span> <span class="o">=</span> <span class="k">new</span> <span class="n">OpenpayAPI</span><span class="o">(</span><span class="s">"https://sandbox-api.openpay.mx"</span><span class="o">,</span> <span class="s">"sk_b05586ec98454522ac7d4ccdcaec9128"</span><span class="o">,</span> <span class="s">"maonhzpqm8xp2ydssovf"</span><span class="o">);</span>
<span class="n">Customer</span> <span class="n">request</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Customer</span><span class="o">();</span>
<span class="n">request</span><span class="o">.</span><span class="na">name</span><span class="o">(</span><span class="s">"Julian Gerardo"</span><span class="o">);</span>
<span class="n">request</span><span class="o">.</span><span class="na">lastName</span><span class="o">(</span><span class="s">"López Martínez"</span><span class="o">);</span>
<span class="n">request</span><span class="o">.</span><span class="na">email</span><span class="o">(</span><span class="s">"julian.martinez@gmail.com"</span><span class="o">);</span>
<span class="n">request</span><span class="o">.</span><span class="na">phoneNumber</span><span class="o">(</span><span class="s">"4421432915"</span><span class="o">);</span>
<span class="n">Address</span> <span class="n">address</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Address</span><span class="o">();</span>
<span class="n">address</span><span class="o">.</span><span class="na">city</span><span class="o">(</span><span class="s">"Queretaro"</span><span class="o">);</span>
<span class="n">address</span><span class="o">.</span><span class="na">countryCode</span><span class="o">(</span><span class="s">"10"</span><span class="o">);</span>
<span class="n">address</span><span class="o">.</span><span class="na">state</span><span class="o">(</span><span class="s">"Queretaro"</span><span class="o">);</span>
<span class="n">address</span><span class="o">.</span><span class="na">postalCode</span><span class="o">(</span><span class="s">"79125"</span><span class="o">);</span>
<span class="n">address</span><span class="o">.</span><span class="na">line1</span><span class="o">(</span><span class="s">"Av. Pie de la cuesta #12"</span><span class="o">);</span>
<span class="n">address</span><span class="o">.</span><span class="na">line2</span><span class="o">(</span><span class="s">"Desarrollo San Pablo"</span><span class="o">);</span>
<span class="n">address</span><span class="o">.</span><span class="na">line3</span><span class="o">(</span><span class="s">"Qro. Qro."</span><span class="o">);</span>
<span class="n">request</span><span class="o">.</span><span class="na">address</span><span class="o">(</span><span class="n">address</span><span class="o">);</span>

<span class="n">request</span> <span class="o">=</span> <span class="n">api</span><span class="o">.</span><span class="na">customers</span><span class="o">().</span><span class="na">update</span><span class="o">(</span><span class="n">request</span><span class="o">);</span>
</pre><pre class="highlight csharp"><span class="n">OpenpayAPI</span> <span class="n">api</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">OpenpayAPI</span><span class="p">(</span><span class="s">"sk_b05586ec98454522ac7d4ccdcaec9128"</span><span class="p">,</span> <span class="s">"maonhzpqm8xp2ydssovf"</span><span class="p">);</span>
<span class="n">Customer</span> <span class="n">request</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">Customer</span><span class="p">();</span>
<span class="n">request</span><span class="p">.</span><span class="n">Name</span> <span class="p">=</span> <span class="s">"Julian Gerardo"</span><span class="p">;</span>
<span class="n">request</span><span class="p">.</span><span class="n">LastName</span> <span class="p">=</span> <span class="s">"López Martínez"</span><span class="p">;</span>
<span class="n">request</span><span class="p">.</span><span class="n">Email</span> <span class="p">=</span> <span class="s">"julian.martinez@gmail.com"</span><span class="p">;</span>
<span class="n">request</span><span class="p">.</span><span class="n">PhoneNumber</span> <span class="p">=</span> <span class="s">"4421432915"</span><span class="p">;</span>
<span class="n">Address</span> <span class="n">address</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">Address</span><span class="p">();</span>
<span class="n">address</span><span class="p">.</span><span class="n">City</span> <span class="p">=</span> <span class="s">"Queretaro"</span><span class="p">;</span>
<span class="n">address</span><span class="p">.</span><span class="n">CountryCode</span> <span class="p">=</span> <span class="s">"MX"</span><span class="p">;</span>
<span class="n">address</span><span class="p">.</span><span class="n">State</span> <span class="p">=</span> <span class="s">"Queretaro"</span><span class="p">;</span>
<span class="n">address</span><span class="p">.</span><span class="n">PostalCode</span> <span class="p">=</span> <span class="s">"79125"</span><span class="p">;</span>
<span class="n">address</span><span class="p">.</span><span class="n">Line1</span> <span class="p">=</span> <span class="s">"Av. Pie de la cuesta #12"</span><span class="p">;</span>
<span class="n">address</span><span class="p">.</span><span class="n">Line2</span> <span class="p">=</span> <span class="s">"Desarrollo San Pablo"</span><span class="p">;</span>
<span class="n">address</span><span class="p">.</span><span class="n">Line3</span> <span class="p">=</span> <span class="s">"Qro. Qro."</span><span class="p">;</span>
<span class="n">request</span><span class="p">.</span><span class="n">Address</span> <span class="p">=</span> <span class="n">address</span><span class="p">;</span>

<span class="n">request</span> <span class="p">=</span> <span class="n">api</span><span class="p">.</span><span class="n">CustomerService</span><span class="p">.</span><span class="nf">Update</span><span class="p">(</span><span class="n">request</span><span class="p">);</span>
</pre><pre class="highlight javascript"><span class="kd">var</span> <span class="nx">customerRequest</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">'name'</span><span class="err">:</span> <span class="s1">'customer name'</span><span class="p">,</span>
    <span class="s1">'email'</span><span class="err">:</span> <span class="s1">'customer_email@me.com'</span><span class="p">,</span>
    <span class="s1">'address'</span><span class="err">:</span><span class="p">{</span>
      <span class="s1">'city'</span><span class="err">:</span><span class="s1">'Queretaro'</span><span class="p">,</span>
      <span class="s1">'state'</span><span class="err">:</span><span class="s1">'Queretaro'</span><span class="p">,</span>
      <span class="s1">'line1'</span><span class="err">:</span><span class="s1">'Calle 10'</span><span class="p">,</span>
      <span class="s1">'postal_code'</span><span class="err">:</span><span class="s1">'76000'</span><span class="p">,</span>
      <span class="s1">'line2'</span><span class="err">:</span><span class="s1">'col. san pablo'</span><span class="p">,</span>
      <span class="s1">'line3'</span><span class="err">:</span><span class="s1">'entre la calle 1 y la 2'</span><span class="p">,</span>
      <span class="s1">'country_code'</span><span class="err">:</span><span class="s1">'MX'</span>
    <span class="p">}</span>
<span class="p">};</span>

<span class="nx">openpay</span><span class="p">.</span><span class="nx">customers</span><span class="p">.</span><span class="nx">update</span><span class="p">(</span><span class="s1">'anbnldwgni1way3yp2dw'</span><span class="p">,</span> <span class="nx">customerRequest</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">customer</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// ... 
</span><span class="p">});</span>
</pre><pre class="highlight ruby"><span class="vi">@openpay</span><span class="o">=</span><span class="no">OpenpayApi</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="s2">"mzdtln0bmtms6o3kck8f"</span><span class="p">,</span><span class="s2">"sk_e568c42a6c384b7ab02cd47d2e407cab"</span><span class="p">)</span>
<span class="vi">@customers</span><span class="o">=</span><span class="vi">@openpay</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span><span class="ss">:customers</span><span class="p">)</span>
<span class="n">address_hash</span><span class="o">=</span><span class="p">{</span>
      <span class="s2">"line1"</span> <span class="o">=&gt;</span> <span class="s2">"Calle 10"</span><span class="p">,</span>
      <span class="s2">"line2"</span> <span class="o">=&gt;</span> <span class="s2">"col. san pablo"</span><span class="p">,</span>
      <span class="s2">"line3"</span> <span class="o">=&gt;</span> <span class="s2">"entre la calle 1 y la 2"</span><span class="p">,</span>
      <span class="s2">"state"</span> <span class="o">=&gt;</span> <span class="s2">"Queretaro"</span><span class="p">,</span>
      <span class="s2">"city"</span> <span class="o">=&gt;</span> <span class="s2">"Queretaro"</span><span class="p">,</span>
      <span class="s2">"postal_code"</span> <span class="o">=&gt;</span> <span class="s2">"76000"</span><span class="p">,</span>
      <span class="s2">"country_code"</span> <span class="o">=&gt;</span> <span class="s2">"MX"</span>
   <span class="p">}</span>
<span class="n">request_hash</span><span class="o">=</span><span class="p">{</span>
     <span class="s2">"external_id"</span> <span class="o">=&gt;</span> <span class="kp">nil</span><span class="p">,</span>
     <span class="s2">"name"</span> <span class="o">=&gt;</span> <span class="s2">"customer name"</span><span class="p">,</span>
     <span class="s2">"last_name"</span> <span class="o">=&gt;</span> <span class="kp">nil</span><span class="p">,</span>
     <span class="s2">"email"</span> <span class="o">=&gt;</span> <span class="s2">"customer_email@me.com"</span><span class="p">,</span>
     <span class="s2">"requires_account"</span> <span class="o">=&gt;</span> <span class="kp">true</span><span class="p">,</span>
     <span class="s2">"phone_number"</span> <span class="o">=&gt;</span> <span class="s2">"44209087654"</span><span class="p">,</span>
     <span class="s2">"address"</span> <span class="o">=&gt;</span> <span class="n">address_hash</span>
   <span class="p">}</span>

<span class="n">response_hash</span><span class="o">=</span><span class="vi">@customers</span><span class="p">.</span><span class="nf">update</span><span class="p">(</span><span class="n">request_hash</span><span class="p">.</span><span class="nf">to_hash</span><span class="p">)</span>
</pre>
<blockquote>
<p>Ejemplo de respuesta</p>
</blockquote>
<pre class="highlight json"><span class="p">{</span><span class="w">
   </span><span class="s2">"id"</span><span class="p">:</span><span class="s2">"anbnldwgni1way3yp2dw"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"name"</span><span class="p">:</span><span class="s2">"customer name"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"last_name"</span><span class="p">:</span><span class="err">null</span><span class="p">,</span><span class="w">
   </span><span class="s2">"email"</span><span class="p">:</span><span class="s2">"customer_email@me.com"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"phone_number"</span><span class="p">:</span><span class="s2">"44209087654"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"address"</span><span class="p">:{</span><span class="w">
      </span><span class="s2">"line1"</span><span class="p">:</span><span class="s2">"Calle 10"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"line2"</span><span class="p">:</span><span class="s2">"col. san pablo"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"line3"</span><span class="p">:</span><span class="s2">"entre la calle 1 y la 2"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"state"</span><span class="p">:</span><span class="s2">"Queretaro"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"city"</span><span class="p">:</span><span class="s2">"Queretaro"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"postal_code"</span><span class="p">:</span><span class="s2">"76000"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"country_code"</span><span class="p">:</span><span class="s2">"MX"</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="s2">"creation_date"</span><span class="p">:</span><span class="s2">"2014-05-20T16:47:47-05:00"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"external_id"</span><span class="p">:</span><span class="err">null</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></pre>
<p>Actualiza uno o más datos del cliente.</p>

<h3 id="petición">Petición</h3>

<table><thead>
<tr>
<th>Propiedad</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>name</td>
<td><strong><em>string</em></strong> (requerido, longitud = 100)<br/>Nombre(s) del cliente.</td>
</tr>
<tr>
<td>last_name</td>
<td><strong><em>string</em></strong> (opcional, longitud = 100) <br/>Apellidos del cliente.</td>
</tr>
<tr>
<td>email</td>
<td><strong><em>string</em></strong> (requerido, longitud = 100)<br/>Cuenta de correo electrónico del Cliente.</td>
</tr>
<tr>
<td>phone_number</td>
<td><strong><em>string</em></strong> (opcional, longitud = 100) <br/>Número telefónico del Cliente.</td>
</tr>
<tr>
<td><a href="#objeto-dirección">address</a></td>
<td><strong><em>object</em></strong> <br/>Dirección del Cliente. Usada comúnmente como dirección de envío.</td>
</tr>
</tbody></table>

<h3 id="respuesta">Respuesta</h3>

<p>Regresa un <a href="#objeto-cliente">objeto cliente</a> con la información actualizada, o una <a href="#objeto-error">respuesta de error</a> si ocurrió algun problema en la actualización.</p>

<h2 id="obtener-un-cliente-existente">Obtener un cliente existente</h2>

<blockquote>
<p>Definición</p>
</blockquote>
<pre class="highlight shell">GET https://sandbox-api.openpay.mx/v1/<span class="o">{</span>MERCHANT_ID<span class="o">}</span>/customers/<span class="o">{</span>CUSTOMER_ID<span class="o">}</span>
</pre><pre class="highlight php"><span class="cp">&lt;?</span>
<span class="nv">$customer</span> <span class="o">=</span> <span class="nv">$openpay</span><span class="o">-&gt;</span><span class="na">customers</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="nx">customerId</span><span class="p">);</span>
<span class="cp">?&gt;</span>
</pre><pre class="highlight java"><span class="n">openpayAPI</span><span class="o">.</span><span class="na">customers</span><span class="o">().</span><span class="na">get</span><span class="o">(</span><span class="n">String</span> <span class="n">customerId</span><span class="o">);</span>
</pre><pre class="highlight csharp"><span class="n">openpayAPI</span><span class="p">.</span><span class="n">CustomerService</span><span class="p">.</span><span class="nf">Update</span><span class="p">(</span><span class="kt">string</span> <span class="n">customer_id</span><span class="p">);</span>
</pre><pre class="highlight javascript"><span class="nx">openpay</span><span class="p">.</span><span class="nx">customers</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="nx">customerId</span><span class="p">,</span> <span class="nx">callback</span><span class="p">);</span>
</pre><pre class="highlight ruby"><span class="vi">@customers</span><span class="o">=</span><span class="vi">@openpay</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span><span class="ss">:customers</span><span class="p">)</span>
<span class="vi">@customers</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="n">customer_id</span><span class="p">)</span>
</pre>
<blockquote>
<p>Ejemplo de petición </p>
</blockquote>
<pre class="highlight shell">curl https://sandbox-api.openpay.mx/v1/mzdtln0bmtms6o3kck8f/customers/anbnldwgni1way3yp2dw <span class="se">\</span>
   -u sk_e568c42a6c384b7ab02cd47d2e407cab: <span class="se">\</span>
   -H <span class="s2">"Content-type: application/json"</span> 
</pre><pre class="highlight php"><span class="cp">&lt;?</span>
<span class="nv">$openpay</span> <span class="o">=</span> <span class="nx">Openpay</span><span class="o">::</span><span class="na">getInstance</span><span class="p">(</span><span class="s1">'moiep6umtcnanql3jrxp'</span><span class="p">,</span> <span class="s1">'sk_3433941e467c1055b178ce26348b0fac'</span><span class="p">);</span>

<span class="nv">$customer</span> <span class="o">=</span> <span class="nv">$openpay</span><span class="o">-&gt;</span><span class="na">customers</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">'a9ualumwnrcxkl42l6mh'</span><span class="p">);</span>
<span class="cp">?&gt;</span>
</pre><pre class="highlight java"><span class="n">OpenpayAPI</span> <span class="n">api</span> <span class="o">=</span> <span class="k">new</span> <span class="n">OpenpayAPI</span><span class="o">(</span><span class="s">"https://sandbox-api.openpay.mx"</span><span class="o">,</span> <span class="s">"sk_b05586ec98454522ac7d4ccdcaec9128"</span><span class="o">,</span> <span class="s">"maonhzpqm8xp2ydssovf"</span><span class="o">);</span>
<span class="n">Customer</span> <span class="n">customer</span> <span class="o">=</span> <span class="n">api</span><span class="o">.</span><span class="na">customers</span><span class="o">().</span><span class="na">get</span><span class="o">(</span><span class="s">"a9pvykxz4g5rg0fplze0"</span><span class="o">);</span>
</pre><pre class="highlight csharp"><span class="n">OpenpayAPI</span> <span class="n">api</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">OpenpayAPI</span><span class="p">(</span><span class="s">"sk_b05586ec98454522ac7d4ccdcaec9128"</span><span class="p">,</span> <span class="s">"maonhzpqm8xp2ydssovf"</span><span class="p">);</span>
<span class="n">Customer</span> <span class="n">customer</span> <span class="p">=</span> <span class="n">api</span><span class="p">.</span><span class="n">CustomerService</span><span class="p">.</span><span class="nf">Update</span><span class="p">(</span><span class="s">"a9pvykxz4g5rg0fplze0"</span><span class="p">);</span>
</pre><pre class="highlight javascript"><span class="nx">openpay</span><span class="p">.</span><span class="nx">customers</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">'a9pvykxz4g5rg0fplze0'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">customer</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// ... 
</span><span class="p">});</span>
</pre><pre class="highlight ruby"><span class="vi">@openpay</span><span class="o">=</span><span class="no">OpenpayApi</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="s2">"mzdtln0bmtms6o3kck8f"</span><span class="p">,</span><span class="s2">"sk_e568c42a6c384b7ab02cd47d2e407cab"</span><span class="p">)</span>
<span class="vi">@customers</span><span class="o">=</span><span class="vi">@openpay</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span><span class="ss">:customers</span><span class="p">)</span>

<span class="n">response_hash</span><span class="o">=</span><span class="vi">@customers</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="s2">"asynwirguzkgq2bizogo"</span><span class="p">)</span>
</pre>
<blockquote>
<p>Ejemplo de respuesta</p>
</blockquote>
<pre class="highlight json"><span class="p">{</span><span class="w">
   </span><span class="s2">"id"</span><span class="p">:</span><span class="s2">"anbnldwgni1way3yp2dw"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"name"</span><span class="p">:</span><span class="s2">"customer name"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"last_name"</span><span class="p">:</span><span class="err">null</span><span class="p">,</span><span class="w">
   </span><span class="s2">"email"</span><span class="p">:</span><span class="s2">"customer_email@me.com"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"phone_number"</span><span class="p">:</span><span class="s2">"44209087654"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"address"</span><span class="p">:{</span><span class="w">
      </span><span class="s2">"line1"</span><span class="p">:</span><span class="s2">"Calle 10"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"line2"</span><span class="p">:</span><span class="s2">"col. san pablo"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"line3"</span><span class="p">:</span><span class="s2">"entre la calle 1 y la 2"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"state"</span><span class="p">:</span><span class="s2">"Queretaro"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"city"</span><span class="p">:</span><span class="s2">"Queretaro"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"postal_code"</span><span class="p">:</span><span class="s2">"76000"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"country_code"</span><span class="p">:</span><span class="s2">"MX"</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="s2">"creation_date"</span><span class="p">:</span><span class="s2">"2014-05-20T16:47:47-05:00"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"external_id"</span><span class="p">:</span><span class="err">null</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></pre>
<p>Obtiene la información actual de un cliente existente. Solo es necesario especificar el identificador que fue regresado al momento de crear el cliente.</p>

<h3 id="petición">Petición</h3>

<table><thead>
<tr>
<th>Propiedad</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td><em><strong>string</strong></em> (requerido, longitud = 45)<br/>Identificador único del cliente que se desea obtener.</td>
</tr>
</tbody></table>

<h3 id="respuesta">Respuesta</h3>

<p>Si el identificador existe regresa un <a href="#objeto-cliente">objeto cliente</a> con la información del cliente.</p>

<h2 id="eliminar-un-cliente">Eliminar un cliente</h2>

<blockquote>
<p>Definición</p>
</blockquote>
<pre class="highlight shell">DELETE https://sandbox-api.openpay.mx/v1/<span class="o">{</span>MERCHANT_ID<span class="o">}</span>/customers/<span class="o">{</span>CUSTOMER_ID<span class="o">}</span>
</pre><pre class="highlight php"><span class="cp">&lt;?</span>
<span class="nv">$customer</span> <span class="o">=</span> <span class="nv">$openpay</span><span class="o">-&gt;</span><span class="na">customers</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="nx">customerId</span><span class="p">);</span>
<span class="nv">$customer</span><span class="o">-&gt;</span><span class="na">delete</span><span class="p">();</span>
<span class="cp">?&gt;</span>
</pre><pre class="highlight java"><span class="n">openpayAPI</span><span class="o">.</span><span class="na">customers</span><span class="o">().</span><span class="na">delete</span><span class="o">(</span><span class="n">String</span> <span class="n">customerId</span><span class="o">);</span>
</pre><pre class="highlight csharp"><span class="n">openpayAPI</span><span class="p">.</span><span class="n">CustomerService</span><span class="p">.</span><span class="nf">Delete</span><span class="p">(</span><span class="kt">string</span> <span class="n">customer_id</span><span class="p">);</span>
</pre><pre class="highlight javascript"><span class="nx">openpay</span><span class="p">.</span><span class="nx">customers</span><span class="p">.</span><span class="k">delete</span><span class="p">(</span><span class="nx">customerId</span><span class="p">,</span> <span class="nx">callback</span><span class="p">);</span>
</pre><pre class="highlight ruby"><span class="vi">@customers</span><span class="o">=</span><span class="vi">@openpay</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span><span class="ss">:customers</span><span class="p">)</span>
<span class="vi">@customers</span><span class="p">.</span><span class="nf">delete</span><span class="p">(</span><span class="n">customer_id</span><span class="p">)</span>
</pre>
<blockquote>
<p>Ejemplo de petición </p>
</blockquote>
<pre class="highlight shell">curl https://sandbox-api.openpay.mx/v1/mzdtln0bmtms6o3kck8f/customers/anbnldwgni1way3yp2dw <span class="se">\</span>
   -u sk_e568c42a6c384b7ab02cd47d2e407cab: <span class="se">\</span>
   -H <span class="s2">"Content-type: application/json"</span> <span class="se">\</span>
   -X DELETE
</pre><pre class="highlight php"><span class="cp">&lt;?</span>
<span class="nv">$openpay</span> <span class="o">=</span> <span class="nx">Openpay</span><span class="o">::</span><span class="na">getInstance</span><span class="p">(</span><span class="s1">'moiep6umtcnanql3jrxp'</span><span class="p">,</span> <span class="s1">'sk_3433941e467c1055b178ce26348b0fac'</span><span class="p">);</span>

<span class="nv">$customer</span> <span class="o">=</span> <span class="nv">$openpay</span><span class="o">-&gt;</span><span class="na">customers</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">'a9ualumwnrcxkl42l6mh'</span><span class="p">);</span>
<span class="nv">$customer</span><span class="o">-&gt;</span><span class="na">delete</span><span class="p">();</span>
<span class="cp">?&gt;</span>
</pre><pre class="highlight java"><span class="n">OpenpayAPI</span> <span class="n">api</span> <span class="o">=</span> <span class="k">new</span> <span class="n">OpenpayAPI</span><span class="o">(</span><span class="s">"https://sandbox-api.openpay.mx"</span><span class="o">,</span> <span class="s">"sk_b05586ec98454522ac7d4ccdcaec9128"</span><span class="o">,</span> <span class="s">"maonhzpqm8xp2ydssovf"</span><span class="o">);</span>
<span class="n">api</span><span class="o">.</span><span class="na">customers</span><span class="o">().</span><span class="na">delete</span><span class="o">(</span><span class="s">"a9pvykxz4g5rg0fplze0"</span><span class="o">);</span>
</pre><pre class="highlight csharp"><span class="n">OpenpayAPI</span> <span class="n">api</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">OpenpayAPI</span><span class="p">(</span><span class="s">"sk_b05586ec98454522ac7d4ccdcaec9128"</span><span class="p">,</span> <span class="s">"maonhzpqm8xp2ydssovf"</span><span class="p">);</span>
<span class="n">api</span><span class="p">.</span><span class="n">CustomerService</span><span class="p">.</span><span class="nf">Delete</span><span class="p">(</span><span class="s">"a9pvykxz4g5rg0fplze0"</span><span class="p">);</span>
</pre><pre class="highlight javascript"><span class="nx">openpay</span><span class="p">.</span><span class="nx">customers</span><span class="p">.</span><span class="k">delete</span><span class="p">(</span><span class="s1">'a9pvykxz4g5rg0fplze0'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// ... 
</span><span class="p">});</span>
</pre><pre class="highlight ruby"><span class="vi">@openpay</span><span class="o">=</span><span class="no">OpenpayApi</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="s2">"mzdtln0bmtms6o3kck8f"</span><span class="p">,</span><span class="s2">"sk_e568c42a6c384b7ab02cd47d2e407cab"</span><span class="p">)</span>
<span class="vi">@customers</span><span class="o">=</span><span class="vi">@openpay</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span><span class="ss">:customers</span><span class="p">)</span>

<span class="n">response_hash</span><span class="o">=</span><span class="vi">@customers</span><span class="p">.</span><span class="nf">delete</span><span class="p">(</span><span class="s2">"asynwirguzkgq2bizogo"</span><span class="p">)</span>
</pre>
<p>Elimina un cliente permanentemente. Se cancelarán las suscripciones que tenga. Openpay mantiene los registros de las operaciones.</p>

<h3 id="petición">Petición</h3>

<table><thead>
<tr>
<th>Propiedad</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td><em><strong>string</strong></em> (requerido, longitud = 45)<br/> Identificador único del cliente a borrar.</td>
</tr>
</tbody></table>

<h3 id="respuesta">Respuesta</h3>

<p>Si el cliente se borra correctamente la respuesta es vacía, si no se puede borrar se regresa un <a href="#objeto-error">objeto error</a> indicando el motivo. </p>

<h2 id="listado-de-clientes">Listado de clientes</h2>

<blockquote>
<p>Definición</p>
</blockquote>
<pre class="highlight shell">GET https://sandbox-api.openpay.mx/v1/<span class="o">{</span>MERCHANT_ID<span class="o">}</span>/customers
</pre><pre class="highlight php"><span class="cp">&lt;?</span>
<span class="nv">$customerList</span> <span class="o">=</span> <span class="nv">$openpay</span><span class="o">-&gt;</span><span class="na">customers</span><span class="o">-&gt;</span><span class="na">getList</span><span class="p">(</span><span class="nx">findDataRequest</span><span class="p">);</span>
<span class="cp">?&gt;</span>
</pre><pre class="highlight java"><span class="n">openpayAPI</span><span class="o">.</span><span class="na">customers</span><span class="o">().</span><span class="na">list</span><span class="o">(</span><span class="n">SearchParams</span> <span class="n">request</span><span class="o">);</span>
</pre><pre class="highlight csharp"><span class="n">openpayAPI</span><span class="p">.</span><span class="n">CustomerService</span><span class="p">.</span><span class="nf">List</span><span class="p">(</span><span class="n">SearchParams</span> <span class="n">request</span> <span class="p">=</span> <span class="k">null</span><span class="p">);</span>
</pre><pre class="highlight javascript"><span class="nx">openpay</span><span class="p">.</span><span class="nx">customers</span><span class="p">.</span><span class="nx">list</span><span class="p">(</span><span class="nx">callback</span><span class="p">);</span>
<span class="nx">openpay</span><span class="p">.</span><span class="nx">customers</span><span class="p">.</span><span class="nx">list</span><span class="p">(</span><span class="nx">searchParams</span><span class="p">,</span> <span class="nx">callback</span><span class="p">);</span>
</pre><pre class="highlight ruby"><span class="vi">@customers</span><span class="o">=</span><span class="vi">@openpay</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span><span class="ss">:customers</span><span class="p">)</span>
<span class="vi">@customers</span><span class="p">.</span><span class="nf">all</span>
</pre>
<blockquote>
<p>Ejemplo de petición </p>
</blockquote>
<pre class="highlight shell">curl -g <span class="s2">"https://sandbox-api.openpay.mx/v1/mzdtln0bmtms6o3kck8f/customers?creation[gte]=2013-11-01&amp;limit=2"</span> <span class="se">\</span>
   -u sk_e568c42a6c384b7ab02cd47d2e407cab: <span class="se">\</span>
   -H <span class="s2">"Content-type: application/json"</span> 
</pre><pre class="highlight php"><span class="cp">&lt;?</span>
<span class="nv">$openpay</span> <span class="o">=</span> <span class="nx">Openpay</span><span class="o">::</span><span class="na">getInstance</span><span class="p">(</span><span class="s1">'moiep6umtcnanql3jrxp'</span><span class="p">,</span> <span class="s1">'sk_3433941e467c1055b178ce26348b0fac'</span><span class="p">);</span>

<span class="nv">$findDataRequest</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">'creation[gte]'</span> <span class="o">=&gt;</span> <span class="s1">'2013-01-01'</span><span class="p">,</span>
    <span class="s1">'creation[lte]'</span> <span class="o">=&gt;</span> <span class="s1">'2013-12-31'</span><span class="p">,</span>
    <span class="s1">'offset'</span> <span class="o">=&gt;</span> <span class="mi">0</span><span class="p">,</span>
    <span class="s1">'limit'</span> <span class="o">=&gt;</span> <span class="mi">5</span><span class="p">);</span>

<span class="nv">$customerList</span> <span class="o">=</span> <span class="nv">$openpay</span><span class="o">-&gt;</span><span class="na">customers</span><span class="o">-&gt;</span><span class="na">getList</span><span class="p">(</span><span class="nv">$findDataRequest</span><span class="p">);</span>
<span class="cp">?&gt;</span>
</pre><pre class="highlight java"><span class="kd">final</span> <span class="n">Calendar</span> <span class="n">dateGte</span> <span class="o">=</span> <span class="n">Calendar</span><span class="o">.</span><span class="na">getInstance</span><span class="o">();</span>
<span class="kd">final</span> <span class="n">Calendar</span> <span class="n">dateLte</span> <span class="o">=</span> <span class="n">Calendar</span><span class="o">.</span><span class="na">getInstance</span><span class="o">();</span>
<span class="n">dateGte</span><span class="o">.</span><span class="na">set</span><span class="o">(</span><span class="mi">2014</span><span class="o">,</span> <span class="mi">5</span><span class="o">,</span> <span class="mi">1</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span> <span class="mi">0</span><span class="o">);</span>
<span class="n">dateLte</span><span class="o">.</span><span class="na">set</span><span class="o">(</span><span class="mi">2014</span><span class="o">,</span> <span class="mi">5</span><span class="o">,</span> <span class="mi">15</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span> <span class="mi">0</span><span class="o">);</span>

<span class="n">OpenpayAPI</span> <span class="n">api</span> <span class="o">=</span> <span class="k">new</span> <span class="n">OpenpayAPI</span><span class="o">(</span><span class="s">"https://sandbox-api.openpay.mx"</span><span class="o">,</span> <span class="s">"sk_b05586ec98454522ac7d4ccdcaec9128"</span><span class="o">,</span> <span class="s">"maonhzpqm8xp2ydssovf"</span><span class="o">);</span>
<span class="n">SearchParams</span> <span class="n">request</span> <span class="o">=</span> <span class="k">new</span> <span class="n">SearchParams</span><span class="o">();</span>
<span class="n">request</span><span class="o">.</span><span class="na">creationGte</span><span class="o">(</span><span class="n">dateGte</span><span class="o">.</span><span class="na">getTime</span><span class="o">());</span>
<span class="n">request</span><span class="o">.</span><span class="na">creationLte</span><span class="o">(</span><span class="n">dateLte</span><span class="o">.</span><span class="na">getTime</span><span class="o">());</span>
<span class="n">request</span><span class="o">.</span><span class="na">offset</span><span class="o">(</span><span class="mi">0</span><span class="o">);</span>
<span class="n">request</span><span class="o">.</span><span class="na">limit</span><span class="o">(</span><span class="mi">100</span><span class="o">);</span>

<span class="n">List</span><span class="o">&lt;</span><span class="n">Customer</span><span class="o">&gt;</span> <span class="n">customers</span> <span class="o">=</span> <span class="n">api</span><span class="o">.</span><span class="na">customers</span><span class="o">().</span><span class="na">list</span><span class="o">(</span><span class="n">request</span><span class="o">);</span>
</pre><pre class="highlight csharp"><span class="n">OpenpayAPI</span> <span class="n">api</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">OpenpayAPI</span><span class="p">(</span><span class="s">"sk_b05586ec98454522ac7d4ccdcaec9128"</span><span class="p">,</span> <span class="s">"maonhzpqm8xp2ydssovf"</span><span class="p">);</span>
<span class="n">SearchParams</span> <span class="n">request</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">SearchParams</span><span class="p">();</span>
<span class="n">request</span><span class="p">.</span><span class="n">CreationGte</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">Datetime</span><span class="p">(</span><span class="m">2014</span><span class="p">,</span> <span class="m">5</span><span class="p">,</span> <span class="m">1</span><span class="p">);</span>
<span class="n">request</span><span class="p">.</span><span class="n">CreationLte</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">DateTime</span><span class="p">(</span><span class="m">2014</span><span class="p">,</span> <span class="m">5</span><span class="p">,</span> <span class="m">15</span><span class="p">);</span>
<span class="n">request</span><span class="p">.</span><span class="n">Offset</span> <span class="p">=</span> <span class="m">0</span><span class="p">;</span>
<span class="n">request</span><span class="p">.</span><span class="n">Limit</span> <span class="p">=</span> <span class="m">100</span><span class="p">;</span>

<span class="n">List</span><span class="p">&lt;</span><span class="n">Customer</span><span class="p">&gt;</span> <span class="n">customers</span> <span class="p">=</span> <span class="n">api</span><span class="p">.</span><span class="n">CustomerService</span><span class="p">.</span><span class="nf">List</span><span class="p">(</span><span class="n">request</span><span class="p">);</span>
</pre><pre class="highlight javascript"><span class="kd">var</span> <span class="nx">searchParams</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s1">'creation[gte]'</span> <span class="err">:</span> <span class="s1">'2013-11-01'</span><span class="p">,</span>
  <span class="s1">'limit'</span> <span class="err">:</span> <span class="mi">2</span>
<span class="p">};</span>

<span class="nx">openpay</span><span class="p">.</span><span class="nx">customers</span><span class="p">.</span><span class="nx">list</span><span class="p">(</span><span class="nx">searchParams</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">list</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// ...
</span><span class="p">});</span>
</pre><pre class="highlight ruby"><span class="vi">@openpay</span><span class="o">=</span><span class="no">OpenpayApi</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="s2">"mzdtln0bmtms6o3kck8f"</span><span class="p">,</span><span class="s2">"sk_e568c42a6c384b7ab02cd47d2e407cab"</span><span class="p">)</span>
<span class="vi">@customers</span><span class="o">=</span><span class="vi">@openpay</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span><span class="ss">:customers</span><span class="p">)</span>

<span class="n">response_hash</span><span class="o">=</span><span class="vi">@customers</span><span class="p">.</span><span class="nf">all</span>
</pre>
<blockquote>
<p>Ejemplo de respuesta</p>
</blockquote>
<pre class="highlight json"><span class="p">[{</span><span class="w">
   </span><span class="s2">"id"</span><span class="p">:</span><span class="s2">"cpjdhf754ythr65yu9k7q"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"creation_date"</span><span class="p">:</span><span class="s2">"2013-11-08T12:04:46-06:00"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"name"</span><span class="p">:</span><span class="s2">"Rodrigo"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"last_name"</span><span class="p">:</span><span class="s2">"Velazco Perez"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"email"</span><span class="p">:</span><span class="s2">"rodrigo.velazco@payments.com"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"phone_number"</span><span class="p">:</span><span class="s2">"4425667045"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"status"</span><span class="p">:</span><span class="s2">"active"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"balance"</span><span class="p">:</span><span class="mf">142.5</span><span class="w">
</span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="w">
   </span><span class="s2">"id"</span><span class="p">:</span><span class="s2">"cz4nkhrlcu9k7qd4lwqx"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"creation_date"</span><span class="p">:</span><span class="s2">"2013-11-07T14:54:46-06:00"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"name"</span><span class="p">:</span><span class="s2">"Eriberto"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"last_name"</span><span class="p">:</span><span class="s2">"Rodriguez Lopez"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"email"</span><span class="p">:</span><span class="s2">"eriberto.rodriguez@payments.com"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"phone_number"</span><span class="p">:</span><span class="s2">"442"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"status"</span><span class="p">:</span><span class="s2">"active"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"balance"</span><span class="p">:</span><span class="mi">103</span><span class="w">
</span><span class="p">}]</span><span class="w">
</span></pre>
<p>Regresa una lista de los cliente registrados, si desea delimitar el resultado se pueden utilizar los filtros.</p>

<h3 id="petición">Petición</h3>

<p>Puede realizar una búsqueda utilizando los siguiente parámetros como filtros.</p>

<table><thead>
<tr>
<th>Propiedad</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>creation</td>
<td><strong><em>date</em></strong> <br/>Igual a la fecha de creación del cliente. Formato yyyy-mm-dd</td>
</tr>
<tr>
<td>creation[gte]</td>
<td><strong><em>date</em></strong> <br/>Mayor a la fecha de creación del cliente .Formato yyyy-mm-dd</td>
</tr>
<tr>
<td>creation[lte]</td>
<td><strong><em>date</em></strong> <br/>Menor a la fecha de creación del cliente .Formato yyyy-mm-dd</td>
</tr>
<tr>
<td>offset</td>
<td><strong><em>numeric</em></strong> <br/>Número de registros a omitir al inicio, por defecto 0.</td>
</tr>
<tr>
<td>limit</td>
<td><strong><em>numeric</em></strong> <br/>Número de registros que se requieren, por defecto 10.</td>
</tr>
</tbody></table>

<h3 id="respuesta">Respuesta</h3>

<p>Regresa un arreglo de <a href="#objeto-cliente">objetos cliente</a>.</p>

<h1 id="transferencias">Transferencias</h1>

<p>Las transferencias permite transferir fondos entre las cuentas de tus clientes. </p>

<p><aside class="notice">
<strong>Nota:</strong> Si desea realizar una transferencia a un banco consulte la <a href="#pagos-o-retiros">sección de pagos</a>.
</aside></p>

<h2 id="transferir-entre-clientes">Transferir entre clientes</h2>

<blockquote>
<p>Definición</p>
</blockquote>
<pre class="highlight shell">POST https://sandbox-api.openpay.mx/v1/<span class="o">{</span>MERCHANT_ID<span class="o">}</span>/customers/<span class="o">{</span>CUSTOMER_ID<span class="o">}</span>/transfers
</pre><pre class="highlight php"><span class="cp">&lt;?</span>
<span class="nv">$customer</span> <span class="o">=</span> <span class="nv">$openpay</span><span class="o">-&gt;</span><span class="na">customers</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="nx">customerId</span><span class="p">);</span>
<span class="nv">$transfer</span> <span class="o">=</span> <span class="nv">$customer</span><span class="o">-&gt;</span><span class="na">transfers</span><span class="o">-&gt;</span><span class="na">create</span><span class="p">(</span><span class="nx">transferDataRequest</span><span class="p">);</span>
<span class="cp">?&gt;</span>
</pre><pre class="highlight java"><span class="n">openpayAPI</span><span class="o">.</span><span class="na">transfers</span><span class="o">().</span><span class="na">create</span><span class="o">(</span><span class="n">String</span> <span class="n">customerId</span><span class="o">,</span> <span class="n">CreateTransferParams</span> <span class="n">request</span><span class="o">);</span>
</pre><pre class="highlight csharp"><span class="n">openpayAPI</span><span class="p">.</span><span class="n">TransferService</span><span class="p">.</span><span class="nf">Create</span><span class="p">(</span><span class="kt">string</span> <span class="n">from_customer_id</span><span class="p">,</span> <span class="n">TransferRequest</span> <span class="n">request</span><span class="p">);</span>
</pre><pre class="highlight javascript"><span class="nx">openpay</span><span class="p">.</span><span class="nx">customers</span><span class="p">.</span><span class="nx">transfers</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="nx">customerId</span><span class="p">,</span> <span class="nx">transferRequest</span><span class="p">,</span> <span class="nx">callback</span><span class="p">);</span>
</pre><pre class="highlight ruby"><span class="vi">@transfers</span><span class="o">=</span><span class="vi">@openpay</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span><span class="ss">:transfers</span><span class="p">)</span>
<span class="vi">@transfers</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span><span class="n">request_hash</span><span class="p">,</span> <span class="n">from_customer_id</span><span class="p">)</span>
</pre>
<blockquote>
<p>Ejemplo de petición </p>
</blockquote>
<pre class="highlight shell">curl https://sandbox-api.openpay.mx/v1/mzdtln0bmtms6o3kck8f/customers/ag4nktpdzebjiye1tlze/transfers <span class="se">\</span>
   -u sk_e568c42a6c384b7ab02cd47d2e407cab: <span class="se">\</span>
   -H <span class="s2">"Content-type: application/json"</span> <span class="se">\</span>
   -X POST -d <span class="s1">'{                                            
     "customer_id" : "dvocf97jd20es3tw5laz",
     "amount" : 12.50,          
     "description" : "Transferencia entre cuentas",
     "order_id" : "oid-1245"
}'</span> 
</pre><pre class="highlight php"><span class="cp">&lt;?</span>
<span class="nv">$openpay</span> <span class="o">=</span> <span class="nx">Openpay</span><span class="o">::</span><span class="na">getInstance</span><span class="p">(</span><span class="s1">'moiep6umtcnanql3jrxp'</span><span class="p">,</span> <span class="s1">'sk_3433941e467c1055b178ce26348b0fac'</span><span class="p">);</span>

<span class="nv">$transferDataRequest</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">'customer_id'</span> <span class="o">=&gt;</span> <span class="s1">'aqedin0owpu0kexr2eor'</span><span class="p">,</span>
    <span class="s1">'amount'</span> <span class="o">=&gt;</span> <span class="mf">12.50</span><span class="p">,</span>
    <span class="s1">'description'</span> <span class="o">=&gt;</span> <span class="s1">'Cobro de Comisión'</span><span class="p">,</span>
    <span class="s1">'order_id'</span> <span class="o">=&gt;</span> <span class="s1">'ORDEN-00061'</span><span class="p">);</span>

<span class="nv">$customer</span> <span class="o">=</span> <span class="nv">$openpay</span><span class="o">-&gt;</span><span class="na">customers</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">'a9ualumwnrcxkl42l6mh'</span><span class="p">);</span>
<span class="nv">$transfer</span> <span class="o">=</span> <span class="nv">$customer</span><span class="o">-&gt;</span><span class="na">transfers</span><span class="o">-&gt;</span><span class="na">create</span><span class="p">(</span><span class="nv">$transferDataRequest</span><span class="p">);</span>
<span class="cp">?&gt;</span>
</pre><pre class="highlight java"><span class="n">OpenpayAPI</span> <span class="n">api</span> <span class="o">=</span> <span class="k">new</span> <span class="n">OpenpayAPI</span><span class="o">(</span><span class="s">"https://sandbox-api.openpay.mx"</span><span class="o">,</span> <span class="s">"sk_b05586ec98454522ac7d4ccdcaec9128"</span><span class="o">,</span> <span class="s">"maonhzpqm8xp2ydssovf"</span><span class="o">);</span>
<span class="n">CreateTransferParams</span> <span class="n">request</span> <span class="o">=</span> <span class="k">new</span> <span class="n">CreateTransferParams</span><span class="o">();</span>
<span class="n">request</span><span class="o">.</span><span class="na">toCustomerId</span><span class="o">(</span><span class="s">"ah1ki9jmb50mvlsf9gqn"</span><span class="o">);</span>
<span class="n">request</span><span class="o">.</span><span class="na">amount</span><span class="o">(</span><span class="k">new</span> <span class="n">BigDecimal</span><span class="o">(</span><span class="s">"100.00"</span><span class="o">));</span>
<span class="n">request</span><span class="o">.</span><span class="na">description</span><span class="o">(</span><span class="s">"Transferencia del Customer 1 al Customer 2"</span><span class="o">);</span>
<span class="n">request</span><span class="o">.</span><span class="na">orderId</span><span class="o">(</span><span class="s">"idOrdExt-0101"</span><span class="o">);</span>

<span class="n">Transfer</span> <span class="n">transfer</span> <span class="o">=</span> <span class="n">api</span><span class="o">.</span><span class="na">transfers</span><span class="o">().</span><span class="na">create</span><span class="o">(</span><span class="s">"a9pvykxz4g5rg0fplze0"</span><span class="o">,</span> <span class="n">request</span><span class="o">);</span>
</pre><pre class="highlight csharp"><span class="n">OpenpayAPI</span> <span class="n">api</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">OpenpayAPI</span><span class="p">(</span><span class="s">"sk_b05586ec98454522ac7d4ccdcaec9128"</span><span class="p">,</span> <span class="s">"maonhzpqm8xp2ydssovf"</span><span class="p">);</span>
<span class="n">TransferRequest</span> <span class="n">request</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">TransferRequest</span><span class="p">();</span>
<span class="n">request</span><span class="p">.</span><span class="n">CustomerId</span> <span class="p">=</span> <span class="s">"ah1ki9jmb50mvlsf9gqn"</span><span class="p">;</span>
<span class="n">request</span><span class="p">.</span><span class="n">Amount</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">Decimal</span><span class="p">(</span><span class="m">100.00</span><span class="p">);</span>
<span class="n">request</span><span class="p">.</span><span class="n">Description</span> <span class="p">=</span> <span class="s">"Transferencia del Customer 1 al Customer 2"</span><span class="p">;</span>
<span class="n">request</span><span class="p">.</span><span class="n">OrderId</span> <span class="p">=</span> <span class="s">"idOrdExt-0101"</span><span class="p">;</span>

<span class="n">Transfer</span> <span class="n">transfer</span> <span class="p">=</span> <span class="n">api</span><span class="p">.</span><span class="n">TransferService</span><span class="p">.</span><span class="nf">Create</span><span class="p">(</span><span class="s">"a9pvykxz4g5rg0fplze0"</span><span class="p">,</span> <span class="n">request</span><span class="p">);</span>
</pre><pre class="highlight javascript"><span class="kd">var</span> <span class="nx">transferRequest</span> <span class="o">=</span> <span class="p">{</span>                                          
  <span class="s1">'customer_id'</span> <span class="err">:</span> <span class="s1">'dvocf97jd20es3tw5laz'</span><span class="p">,</span>
  <span class="s1">'amount'</span> <span class="err">:</span> <span class="mf">12.50</span><span class="p">,</span>          
  <span class="s1">'description'</span> <span class="err">:</span> <span class="s1">'Transferencia entre cuentas'</span><span class="p">,</span>
  <span class="s1">'order_id'</span> <span class="err">:</span> <span class="s1">'oid-1245'</span>
<span class="p">};</span>

<span class="nx">openpay</span><span class="p">.</span><span class="nx">customers</span><span class="p">.</span><span class="nx">transfers</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="s1">'ag4nktpdzebjiye1tlze'</span><span class="p">,</span> <span class="nx">transferRequest</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">transfer</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// ...
</span><span class="p">});</span>
</pre><pre class="highlight ruby"><span class="vi">@openpay</span><span class="o">=</span><span class="no">OpenpayApi</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="s2">"mzdtln0bmtms6o3kck8f"</span><span class="p">,</span><span class="s2">"sk_e568c42a6c384b7ab02cd47d2e407cab"</span><span class="p">)</span>
<span class="vi">@transfers</span><span class="o">=</span><span class="vi">@openpay</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span><span class="ss">:transfers</span><span class="p">)</span>
<span class="n">request_hash</span><span class="o">=</span><span class="p">{</span>
     <span class="s2">"customer_id"</span> <span class="o">=&gt;</span> <span class="s2">"dvocf97jd20es3tw5laz"</span><span class="p">,</span>
     <span class="s2">"amount"</span> <span class="o">=&gt;</span> <span class="mi">12</span><span class="o">.</span><span class="mi">50</span><span class="p">,</span>
     <span class="s2">"description"</span> <span class="o">=&gt;</span> <span class="s2">"Transferencia entre cuentas"</span><span class="p">,</span>
     <span class="s2">"order_id"</span> <span class="o">=&gt;</span> <span class="s2">"oid-1245"</span>
   <span class="p">}</span>

<span class="n">response_hash</span><span class="o">=</span><span class="vi">@transfers</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span><span class="n">request_hash</span><span class="p">.</span><span class="nf">to_hash</span><span class="p">,</span> <span class="s2">"ag4nktpdzebjiye1tlze"</span><span class="p">)</span>
</pre>
<blockquote>
<p>Ejemplo de respuesta</p>
</blockquote>
<pre class="highlight json"><span class="p">{</span><span class="w">
   </span><span class="s2">"amount"</span><span class="p">:</span><span class="mf">12.50</span><span class="p">,</span><span class="w">
   </span><span class="s2">"authorization"</span><span class="p">:</span><span class="err">null</span><span class="p">,</span><span class="w">
   </span><span class="s2">"method"</span><span class="p">:</span><span class="s2">"customer"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"operation_type"</span><span class="p">:</span><span class="s2">"out"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"currency"</span><span class="p">:</span><span class="s2">"MXN"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"transaction_type"</span><span class="p">:</span><span class="s2">"transfer"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"status"</span><span class="p">:</span><span class="s2">"completed"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"id"</span><span class="p">:</span><span class="s2">"twpmbike2jejex3pahzd"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"creation_date"</span><span class="p">:</span><span class="s2">"2013-11-15T10:33:19-06:00"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"description"</span><span class="p">:</span><span class="s2">"Transferencia entre cuentas"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"error_message"</span><span class="p">:</span><span class="err">null</span><span class="p">,</span><span class="w">
   </span><span class="s2">"order_id"</span><span class="p">:</span><span class="s2">"oid-1245"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"customer_id"</span><span class="p">:</span><span class="s2">"a9pvykxz4g5rg0fplze0"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></pre>
<p>Realiza la transferencia de fondos de una cuenta de cliente a otra. Los fondos serán cargos a una cuenta origen y abonados a la cuenta destino, lo cual generá dos transacciones. </p>

<h3 id="petición">Petición</h3>

<table><thead>
<tr>
<th>Propiedad</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>customer_id</td>
<td><strong><em>string</em></strong> (requerido, longitud = 45) <br/>El ID de Openpay del cliente al que deseas enviarle los fondos.</td>
</tr>
<tr>
<td>amount</td>
<td><strong><em>numeric</em></strong> (requerido) <br/>Cantidad a transferir. Debe ser una cantidad mayor a un peso, con hasta dos dígitos decimales.</td>
</tr>
<tr>
<td>description</td>
<td><strong><em>string</em></strong> (requerido, longitud = 250) <br/>Una descripción asociada a la transferencia.</td>
</tr>
<tr>
<td>order_id</td>
<td><strong><em>string</em></strong> (opcional, longitud = 100) <br/>Identificador único de la transferencia. Será asignado a la transacción de retiro.</td>
</tr>
</tbody></table>

<h3 id="respuesta">Respuesta</h3>

<p>Si la transacción se realiza correctamente, la respuesta contendrá un <a href="#objeto-transacción">objeto de transacción</a>. Este objeto representará el retiro de fondos del cliente actual. En caso de error, se regresará el objeto de error.</p>

<h2 id="obtener-una-transferencia">Obtener una transferencia</h2>

<blockquote>
<p>Definición</p>
</blockquote>
<pre class="highlight shell">GET https://sandbox-api.openpay.mx/v1/<span class="o">{</span>MERCHANT_ID<span class="o">}</span>/customers/<span class="o">{</span>CUSTOMER_ID<span class="o">}</span>/transfers/<span class="o">{</span>TRANSACTION_ID<span class="o">}</span>
</pre><pre class="highlight php"><span class="cp">&lt;?</span>
<span class="nv">$customer</span> <span class="o">=</span> <span class="nv">$openpay</span><span class="o">-&gt;</span><span class="na">customers</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="nx">customerId</span><span class="p">);</span>
<span class="nv">$transfer</span> <span class="o">=</span> <span class="nv">$customer</span><span class="o">-&gt;</span><span class="na">transfers</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="nx">transactionId</span><span class="p">);</span>
<span class="cp">?&gt;</span>
</pre><pre class="highlight java"><span class="n">openpayAPI</span><span class="o">.</span><span class="na">transfers</span><span class="o">().</span><span class="na">get</span><span class="o">(</span><span class="n">String</span> <span class="n">customerId</span><span class="o">,</span> <span class="n">String</span> <span class="n">transactionId</span><span class="o">);</span>
</pre><pre class="highlight csharp"><span class="n">openpayAPI</span><span class="p">.</span><span class="n">TransferService</span><span class="p">.</span><span class="nf">Get</span><span class="p">(</span><span class="kt">string</span> <span class="n">customer_id</span><span class="p">,</span> <span class="kt">string</span> <span class="n">transaction_id</span><span class="p">);</span>
</pre><pre class="highlight javascript"><span class="nx">openpay</span><span class="p">.</span><span class="nx">customers</span><span class="p">.</span><span class="nx">transfers</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="nx">customerId</span><span class="p">,</span> <span class="nx">transactionId</span><span class="p">,</span> <span class="nx">callback</span><span class="p">);</span>
</pre><pre class="highlight ruby"><span class="vi">@transfers</span><span class="o">=</span><span class="vi">@openpay</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span><span class="ss">:transfers</span><span class="p">)</span>
<span class="vi">@transfers</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="n">transaction_id</span><span class="p">,</span> <span class="n">customer_id</span><span class="p">)</span>
</pre>
<blockquote>
<p>Ejemplo de petición </p>
</blockquote>
<pre class="highlight shell">curl https://sandbox-api.openpay.mx/v1/mzdtln0bmtms6o3kck8f/customers/ag4nktpdzebjiye1tlze/transfers/twpmbike2jejex3pahzd <span class="se">\</span>
   -u sk_e568c42a6c384b7ab02cd47d2e407cab: <span class="se">\</span>
   -H <span class="s2">"Content-type: application/json"</span> 
</pre><pre class="highlight php"><span class="cp">&lt;?</span>
<span class="nv">$openpay</span> <span class="o">=</span> <span class="nx">Openpay</span><span class="o">::</span><span class="na">getInstance</span><span class="p">(</span><span class="s1">'moiep6umtcnanql3jrxp'</span><span class="p">,</span> <span class="s1">'sk_3433941e467c1055b178ce26348b0fac'</span><span class="p">);</span>

<span class="nv">$customer</span> <span class="o">=</span> <span class="nv">$openpay</span><span class="o">-&gt;</span><span class="na">customers</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">'a9ualumwnrcxkl42l6mh'</span><span class="p">);</span>
<span class="nv">$transfer</span> <span class="o">=</span> <span class="nv">$customer</span><span class="o">-&gt;</span><span class="na">transfers</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">'tyxesptjtx1bodfdjmlb'</span><span class="p">);</span>
<span class="cp">?&gt;</span>
</pre><pre class="highlight java"><span class="n">OpenpayAPI</span> <span class="n">api</span> <span class="o">=</span> <span class="k">new</span> <span class="n">OpenpayAPI</span><span class="o">(</span><span class="s">"https://sandbox-api.openpay.mx"</span><span class="o">,</span> <span class="s">"sk_b05586ec98454522ac7d4ccdcaec9128"</span><span class="o">,</span> <span class="s">"maonhzpqm8xp2ydssovf"</span><span class="o">);</span>
<span class="n">Transfer</span> <span class="n">transfer</span> <span class="o">=</span> <span class="n">api</span><span class="o">.</span><span class="na">transfers</span><span class="o">().</span><span class="na">get</span><span class="o">(</span><span class="s">"a9pvykxz4g5rg0fplze0"</span><span class="o">,</span> <span class="s">"tr6cxbcefzatd10guvvw"</span><span class="o">);</span>
</pre><pre class="highlight csharp"><span class="n">OpenpayAPI</span> <span class="n">api</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">OpenpayAPI</span><span class="p">(</span><span class="s">"sk_b05586ec98454522ac7d4ccdcaec9128"</span><span class="p">,</span> <span class="s">"maonhzpqm8xp2ydssovf"</span><span class="p">);</span>
<span class="n">Transfer</span> <span class="n">transfer</span> <span class="p">=</span> <span class="n">api</span><span class="p">.</span><span class="n">TransferService</span><span class="p">.</span><span class="nf">Get</span><span class="p">(</span><span class="s">"a9pvykxz4g5rg0fplze0"</span><span class="p">,</span> <span class="s">"tr6cxbcefzatd10guvvw"</span><span class="p">);</span>
</pre><pre class="highlight javascript"><span class="nx">openpay</span><span class="p">.</span><span class="nx">customers</span><span class="p">.</span><span class="nx">transfers</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">'ag4nktpdzebjiye1tlze'</span><span class="p">,</span> <span class="s1">'twpmbike2jejex3pahzd'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">transfer</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// ...
</span><span class="p">});</span>
</pre><pre class="highlight ruby"><span class="vi">@openpay</span><span class="o">=</span><span class="no">OpenpayApi</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="s2">"mzdtln0bmtms6o3kck8f"</span><span class="p">,</span><span class="s2">"sk_e568c42a6c384b7ab02cd47d2e407cab"</span><span class="p">)</span>
<span class="vi">@transfers</span><span class="o">=</span><span class="vi">@openpay</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span><span class="ss">:transfers</span><span class="p">)</span>

<span class="n">response_hash</span><span class="o">=</span><span class="vi">@transfers</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="s2">"twpmbike2jejex3pahzd"</span><span class="p">,</span> <span class="s2">"ag4nktpdzebjiye1tlze"</span><span class="p">)</span>
</pre>
<blockquote>
<p>Ejemplo de respuesta</p>
</blockquote>
<pre class="highlight json"><span class="p">{</span><span class="w">
   </span><span class="s2">"amount"</span><span class="p">:</span><span class="mf">12.50</span><span class="p">,</span><span class="w">
   </span><span class="s2">"authorization"</span><span class="p">:</span><span class="err">null</span><span class="p">,</span><span class="w">
   </span><span class="s2">"method"</span><span class="p">:</span><span class="s2">"customer"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"operation_type"</span><span class="p">:</span><span class="s2">"out"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"currency"</span><span class="p">:</span><span class="s2">"MXN"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"transaction_type"</span><span class="p">:</span><span class="s2">"transfer"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"status"</span><span class="p">:</span><span class="s2">"completed"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"id"</span><span class="p">:</span><span class="s2">"twpmbike2jejex3pahzd"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"creation_date"</span><span class="p">:</span><span class="s2">"2013-11-15T10:33:19-06:00"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"description"</span><span class="p">:</span><span class="s2">"Transferencia entre cuentas"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"error_message"</span><span class="p">:</span><span class="err">null</span><span class="p">,</span><span class="w">
   </span><span class="s2">"order_id"</span><span class="p">:</span><span class="s2">"oid-1245"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"customer_id"</span><span class="p">:</span><span class="s2">"dvocf97jd20es3tw5laz"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></pre>
<p>Con el identificador del cliente y el identificador de la transferencia, se puede obtener el detalle de la transacción. La transacción de salida se encontrará en el cliente desde el cual se realizó la transferencia, y la transacción de entrada en el cliente que recibió el monto.</p>

<h3 id="petición">Petición</h3>

<table><thead>
<tr>
<th>Propiedad</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>customer_id</td>
<td><strong><em>string</em></strong> (requerido, longitud = 45) <br/> Identificador del cliente</td>
</tr>
<tr>
<td>transaction_id</td>
<td><strong><em>string</em></strong> (requerido, longitud = 45) <br/> Identificador de la transferencia</td>
</tr>
</tbody></table>

<h3 id="respuesta">Respuesta</h3>

<p>Regresa un <a href="#objeto-transacción">objeto de transacción</a></p>

<h2 id="listado-de-transferencias">Listado de transferencias</h2>

<blockquote>
<p>Definición</p>
</blockquote>
<pre class="highlight shell">GET https://sandbox-api.openpay.mx/v1/<span class="o">{</span>MERCHANT_ID<span class="o">}</span>/customers/<span class="o">{</span>CUSTOMER_ID<span class="o">}</span>/transfers
</pre><pre class="highlight php"><span class="cp">&lt;?</span>
<span class="nv">$customer</span> <span class="o">=</span> <span class="nv">$openpay</span><span class="o">-&gt;</span><span class="na">customers</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="nx">customerId</span><span class="p">);</span>
<span class="nv">$transferList</span> <span class="o">=</span> <span class="nv">$customer</span><span class="o">-&gt;</span><span class="na">transfers</span><span class="o">-&gt;</span><span class="na">getList</span><span class="p">(</span><span class="nx">findDataRequest</span><span class="p">);</span>
<span class="cp">?&gt;</span>
</pre><pre class="highlight java"><span class="n">openpayAPI</span><span class="o">.</span><span class="na">transfers</span><span class="o">().</span><span class="na">list</span><span class="o">(</span><span class="n">String</span> <span class="n">customerId</span><span class="o">,</span> <span class="n">SearchParams</span> <span class="n">request</span><span class="o">);</span>
</pre><pre class="highlight csharp"><span class="n">openpayAPI</span><span class="p">.</span><span class="n">TransferService</span><span class="p">.</span><span class="nf">List</span><span class="p">(</span><span class="kt">string</span> <span class="n">customer_id</span><span class="p">,</span> <span class="n">SearchParams</span> <span class="n">request</span> <span class="p">=</span> <span class="k">null</span><span class="p">);</span>
</pre><pre class="highlight javascript"><span class="nx">openpay</span><span class="p">.</span><span class="nx">customers</span><span class="p">.</span><span class="nx">transfers</span><span class="p">.</span><span class="nx">list</span><span class="p">(</span><span class="nx">customerId</span><span class="p">,</span> <span class="nx">callback</span><span class="p">);</span>
<span class="nx">openpay</span><span class="p">.</span><span class="nx">customers</span><span class="p">.</span><span class="nx">transfers</span><span class="p">.</span><span class="nx">list</span><span class="p">(</span><span class="nx">customerId</span><span class="p">,</span> <span class="nx">searchParams</span><span class="p">,</span> <span class="nx">callback</span><span class="p">);</span>
</pre><pre class="highlight ruby"><span class="vi">@transfers</span><span class="o">=</span><span class="vi">@openpay</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span><span class="ss">:transfers</span><span class="p">)</span>
<span class="vi">@transfers</span><span class="p">.</span><span class="nf">all</span><span class="p">(</span><span class="n">customer_id</span><span class="p">)</span>
</pre>
<blockquote>
<p>Ejemplo de petición </p>
</blockquote>
<pre class="highlight shell">curl -g <span class="s2">"https://sandbox-api.openpay.mx/v1/mzdtln0bmtms6o3kck8f/customers/ag4nktpdzebjiye1tlze/transfers?limit=2"</span> <span class="se">\</span>
   -u sk_e568c42a6c384b7ab02cd47d2e407cab: 
</pre><pre class="highlight php"><span class="cp">&lt;?</span>
<span class="nv">$openpay</span> <span class="o">=</span> <span class="nx">Openpay</span><span class="o">::</span><span class="na">getInstance</span><span class="p">(</span><span class="s1">'moiep6umtcnanql3jrxp'</span><span class="p">,</span> <span class="s1">'sk_3433941e467c1055b178ce26348b0fac'</span><span class="p">);</span>

<span class="nv">$findDataRequest</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">'creation[gte]'</span> <span class="o">=&gt;</span> <span class="s1">'2013-01-01'</span><span class="p">,</span>
    <span class="s1">'creation[lte]'</span> <span class="o">=&gt;</span> <span class="s1">'2013-12-31'</span><span class="p">,</span>
    <span class="s1">'offset'</span> <span class="o">=&gt;</span> <span class="mi">0</span><span class="p">,</span>
    <span class="s1">'limit'</span> <span class="o">=&gt;</span> <span class="mi">5</span><span class="p">);</span>

<span class="nv">$customer</span> <span class="o">=</span> <span class="nv">$openpay</span><span class="o">-&gt;</span><span class="na">customers</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">'a9ualumwnrcxkl42l6mh'</span><span class="p">);</span>
<span class="nv">$transferList</span> <span class="o">=</span> <span class="nv">$customer</span><span class="o">-&gt;</span><span class="na">transfers</span><span class="o">-&gt;</span><span class="na">getList</span><span class="p">(</span><span class="nv">$findDataRequest</span><span class="p">);</span>
<span class="cp">?&gt;</span>
</pre><pre class="highlight java"><span class="kd">final</span> <span class="n">Calendar</span> <span class="n">dateGte</span> <span class="o">=</span> <span class="n">Calendar</span><span class="o">.</span><span class="na">getInstance</span><span class="o">();</span>
<span class="kd">final</span> <span class="n">Calendar</span> <span class="n">dateLte</span> <span class="o">=</span> <span class="n">Calendar</span><span class="o">.</span><span class="na">getInstance</span><span class="o">();</span>
<span class="n">dateGte</span><span class="o">.</span><span class="na">set</span><span class="o">(</span><span class="mi">2014</span><span class="o">,</span> <span class="mi">5</span><span class="o">,</span> <span class="mi">1</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span> <span class="mi">0</span><span class="o">);</span>
<span class="n">dateLte</span><span class="o">.</span><span class="na">set</span><span class="o">(</span><span class="mi">2014</span><span class="o">,</span> <span class="mi">5</span><span class="o">,</span> <span class="mi">15</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span> <span class="mi">0</span><span class="o">);</span>

<span class="n">OpenpayAPI</span> <span class="n">api</span> <span class="o">=</span> <span class="k">new</span> <span class="n">OpenpayAPI</span><span class="o">(</span><span class="s">"https://sandbox-api.openpay.mx"</span><span class="o">,</span> <span class="s">"sk_b05586ec98454522ac7d4ccdcaec9128"</span><span class="o">,</span> <span class="s">"maonhzpqm8xp2ydssovf"</span><span class="o">);</span>
<span class="n">SearchParams</span> <span class="n">request</span> <span class="o">=</span> <span class="k">new</span> <span class="n">SearchParams</span><span class="o">();</span>
<span class="n">request</span><span class="o">.</span><span class="na">creationGte</span><span class="o">(</span><span class="n">dateGte</span><span class="o">.</span><span class="na">getTime</span><span class="o">());</span>
<span class="n">request</span><span class="o">.</span><span class="na">creationLte</span><span class="o">(</span><span class="n">dateLte</span><span class="o">.</span><span class="na">getTime</span><span class="o">());</span>
<span class="n">request</span><span class="o">.</span><span class="na">offset</span><span class="o">(</span><span class="mi">0</span><span class="o">);</span>
<span class="n">request</span><span class="o">.</span><span class="na">limit</span><span class="o">(</span><span class="mi">100</span><span class="o">);</span>

<span class="n">List</span><span class="o">&lt;</span><span class="n">Transfer</span><span class="o">&gt;</span> <span class="n">transfers</span> <span class="o">=</span> <span class="n">api</span><span class="o">.</span><span class="na">transfers</span><span class="o">().</span><span class="na">list</span><span class="o">(</span><span class="s">"a9pvykxz4g5rg0fplze0"</span><span class="o">,</span> <span class="n">request</span><span class="o">);</span>
</pre><pre class="highlight csharp"><span class="n">OpenpayAPI</span> <span class="n">api</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">OpenpayAPI</span><span class="p">(</span><span class="s">"sk_b05586ec98454522ac7d4ccdcaec9128"</span><span class="p">,</span> <span class="s">"maonhzpqm8xp2ydssovf"</span><span class="p">);</span>
<span class="n">SearchParams</span> <span class="n">request</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">SearchParams</span><span class="p">();</span>
<span class="n">request</span><span class="p">.</span><span class="n">CreationGte</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">Datetime</span><span class="p">(</span><span class="m">2014</span><span class="p">,</span> <span class="m">5</span><span class="p">,</span> <span class="m">1</span><span class="p">);</span>
<span class="n">request</span><span class="p">.</span><span class="n">CreationLte</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">DateTime</span><span class="p">(</span><span class="m">2014</span><span class="p">,</span> <span class="m">5</span><span class="p">,</span> <span class="m">15</span><span class="p">);</span>
<span class="n">request</span><span class="p">.</span><span class="n">Offset</span> <span class="p">=</span> <span class="m">0</span><span class="p">;</span>
<span class="n">request</span><span class="p">.</span><span class="n">Limit</span> <span class="p">=</span> <span class="m">100</span><span class="p">;</span>

<span class="n">List</span><span class="p">&lt;</span><span class="n">Transfer</span><span class="p">&gt;</span> <span class="n">transfers</span> <span class="p">=</span> <span class="n">api</span><span class="p">.</span><span class="n">TransferService</span><span class="p">.</span><span class="nf">List</span><span class="p">(</span><span class="s">"a9pvykxz4g5rg0fplze0"</span><span class="p">,</span> <span class="n">request</span><span class="p">);</span>
</pre><pre class="highlight javascript"><span class="kd">var</span> <span class="nx">searchParams</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s1">'limit'</span> <span class="err">:</span> <span class="mi">2</span>
<span class="p">};</span>

<span class="nx">openpay</span><span class="p">.</span><span class="nx">customers</span><span class="p">.</span><span class="nx">transfers</span><span class="p">.</span><span class="nx">list</span><span class="p">(</span><span class="s1">'ag4nktpdzebjiye1tlze'</span><span class="p">,</span> <span class="nx">searchParams</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">list</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// ...
</span><span class="p">});</span>
</pre><pre class="highlight ruby"><span class="vi">@openpay</span><span class="o">=</span><span class="no">OpenpayApi</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="s2">"mzdtln0bmtms6o3kck8f"</span><span class="p">,</span><span class="s2">"sk_e568c42a6c384b7ab02cd47d2e407cab"</span><span class="p">)</span>
<span class="vi">@transfers</span><span class="o">=</span><span class="vi">@openpay</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span><span class="ss">:transfers</span><span class="p">)</span>

<span class="n">response_hash</span><span class="o">=</span><span class="vi">@transfers</span><span class="p">.</span><span class="nf">all</span><span class="p">(</span><span class="s2">"asynwirguzkgq2bizogo"</span><span class="p">)</span>
</pre>
<blockquote>
<p>Ejemplo de respuesta</p>
</blockquote>
<pre class="highlight json"><span class="p">[</span><span class="w">
   </span><span class="p">{</span><span class="w">
      </span><span class="s2">"amount"</span><span class="p">:</span><span class="mf">130.00</span><span class="p">,</span><span class="w">
      </span><span class="s2">"authorization"</span><span class="p">:</span><span class="err">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"method"</span><span class="p">:</span><span class="s2">"customer"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"currency"</span><span class="p">:</span><span class="s2">"MXN"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"operation_type"</span><span class="p">:</span><span class="s2">"out"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"transaction_type"</span><span class="p">:</span><span class="s2">"transfer"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"status"</span><span class="p">:</span><span class="s2">"completed"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="s2">"a74mbe4e2j5gc6gfahzd"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"creation_date"</span><span class="p">:</span><span class="s2">"2013-09-18T00:31:19-06:00"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"description"</span><span class="p">:</span><span class="s2">"Una descripcion"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"error_message"</span><span class="p">:</span><span class="err">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"order_id"</span><span class="p">:</span><span class="s2">"20131115103317"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"customer_id"</span><span class="p">:</span><span class="s2">"afk4csrazjp1udezj1po"</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="p">{</span><span class="w">
      </span><span class="s2">"amount"</span><span class="p">:</span><span class="mf">130.00</span><span class="p">,</span><span class="w">
      </span><span class="s2">"authorization"</span><span class="p">:</span><span class="err">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"method"</span><span class="p">:</span><span class="s2">"customer"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"currency"</span><span class="p">:</span><span class="s2">"MXN"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"operation_type"</span><span class="p">:</span><span class="s2">"in"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"transaction_type"</span><span class="p">:</span><span class="s2">"transfer"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"status"</span><span class="p">:</span><span class="s2">"completed"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="s2">"a74mbe4e2j5gc6gfahzd"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"creation_date"</span><span class="p">:</span><span class="s2">"2013-09-18T00:31:19-06:00"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"description"</span><span class="p">:</span><span class="s2">"Una descripcion"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"error_message"</span><span class="p">:</span><span class="err">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"order_id"</span><span class="p">:</span><span class="err">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"customer_id"</span><span class="p">:</span><span class="s2">"agdn58ngcnogqmzruz1i"</span><span class="w">
   </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></pre>
<p>Permite consultar las transacciones de entrada y salida de un cliente.</p>

<h3 id="petición">Petición</h3>

<p>Puede realizar una búsqueda utilizando los siguiente parámetros como filtros.</p>

<table><thead>
<tr>
<th>Propiedad</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>creation</td>
<td><strong><em>date</em></strong> <br/>Igual a la fecha de creación. Formato yyyy-mm-dd</td>
</tr>
<tr>
<td>creation[gte]</td>
<td><strong><em>date</em></strong> <br/>Mayor a la fecha de creación. Formato yyyy-mm-dd</td>
</tr>
<tr>
<td>creation[lte]</td>
<td><strong><em>date</em></strong> <br/>Menor a la fecha de creación. Formato yyyy-mm-dd</td>
</tr>
<tr>
<td>offset</td>
<td><strong><em>numeric</em></strong> <br/>Número de registros a omitir al inicio, por defecto 0.</td>
</tr>
<tr>
<td>limit</td>
<td><strong><em>numeric</em></strong> <br/>Número de registros que se requieren, por defecto 10.</td>
</tr>
</tbody></table>

<h3 id="respuesta">Respuesta</h3>

<p>Listado de <a href="#objeto-transacción">objetos transacción</a> de las transferencias realizadas, cada uno con el identificador del cliente al que se le realizó. Las transacciones serán listadas en orden descendente por fecha de creación.</p>

<h1 id="tarjetas">Tarjetas</h1>

<p>Dentro de la plataforma Openpay podrás agregar tarjetas a la cuenta del cliente, eliminarlas, recuperar alguna en específico y listarlas​.</p>

<p>Se pueden almacenar multiples tarjetas de débito y/o crédito a nivel cliente o a nivel comercio para realizar cargos posteriormente sin la necesidad de introducir nuevamente la información.</p>

<h2 id="objeto-tarjeta">Objeto Tarjeta</h2>

<blockquote>
<p>Ejemplo de objeto </p>
</blockquote>
<pre class="highlight json"><span class="p">{</span><span class="w">
   </span><span class="s2">"type"</span><span class="p">:</span><span class="s2">"debit"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"brand"</span><span class="p">:</span><span class="s2">"mastercard"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"address"</span><span class="p">:{</span><span class="w">
      </span><span class="s2">"line1"</span><span class="p">:</span><span class="s2">"Av 5 de Febrero"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"line2"</span><span class="p">:</span><span class="s2">"Roble 207"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"line3"</span><span class="p">:</span><span class="s2">"col carrillo"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"state"</span><span class="p">:</span><span class="s2">"Queretaro"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"city"</span><span class="p">:</span><span class="s2">"Querétaro"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"postal_code"</span><span class="p">:</span><span class="s2">"76900"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"country_code"</span><span class="p">:</span><span class="s2">"MX"</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="s2">"id"</span><span class="p">:</span><span class="s2">"kgipbqixvjg3gbzowl7l"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"card_number"</span><span class="p">:</span><span class="s2">"1111"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"holder_name"</span><span class="p">:</span><span class="s2">"Juan Perez Ramirez"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"expiration_year"</span><span class="p">:</span><span class="s2">"20"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"expiration_month"</span><span class="p">:</span><span class="s2">"12"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"allows_charges"</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span><span class="w">
   </span><span class="s2">"allows_payouts"</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span><span class="w">
   </span><span class="s2">"creation_date"</span><span class="p">:</span><span class="s2">"2013-12-12T17:50:00-06:00"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"bank_name"</span><span class="p">:</span><span class="s2">"DESCONOCIDO"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"bank_code"</span><span class="p">:</span><span class="s2">"000"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"customer_id"</span><span class="p">:</span><span class="s2">"a2b79p8xmzeyvmolqfja"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></pre>
<table><thead>
<tr>
<th>Propiedad</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td><strong><em>string</em></strong> <br/>Identificador único de la tarjeta.</td>
</tr>
<tr>
<td>creation_date</td>
<td><strong><em>datetime</em></strong> <br/>Fecha y hora en que se creó la tarjeta en formato ISO 8601</td>
</tr>
<tr>
<td>holder_name</td>
<td><strong><em>string</em></strong>  <br/>Nombre del tarjeta habiente.</td>
</tr>
<tr>
<td>card_number</td>
<td><strong><em>numeric</em></strong>  <br/>Numero de tarjeta puede ser de 16 o 19 dígitos.</td>
</tr>
<tr>
<td>cvv2</td>
<td><strong><em>numeric</em></strong>  <br/>Código de seguridad como aparece en la parte de atrás de la tarjeta. Generalmente 3 dígitos.</td>
</tr>
<tr>
<td>expiration_month</td>
<td><strong><em>numeric</em></strong>  <br/>Mes de expiración tal como aparece en la tarjeta.</td>
</tr>
<tr>
<td>expiration_year</td>
<td><strong><em>numeric</em></strong>  <br/>Año de expiración tal como aparece en la tarjeta.</td>
</tr>
<tr>
<td><a href="#objeto-dirección">address</a></td>
<td><strong><em>object</em></strong> <br/>Dirección de facturación del tarjeta habiente.</td>
</tr>
<tr>
<td>allows_charges</td>
<td><strong><em>boolean</em></strong> <br/>Permite conocer si se pueden realizar cargos a la tarjeta.</td>
</tr>
<tr>
<td>allows_payouts</td>
<td><strong><em>boolean</em></strong> <br/>Permite conocer si se pueden realizar envío de pagos a la tarjeta.</td>
</tr>
<tr>
<td>brand</td>
<td><strong><em>string</em></strong> <br/>Marca de la tarjeta: visa, mastercard, carnet o american express.</td>
</tr>
<tr>
<td>type</td>
<td><strong><em>string</em></strong> <br/>Tipo de la tarjeta: debit, credit, cash, etc.</td>
</tr>
<tr>
<td>bank_name</td>
<td><strong><em>string</em></strong> <br/>Nombre del banco emisor.</td>
</tr>
<tr>
<td>bank_code</td>
<td><strong><em>string</em></strong> <br/>Código del banco emisor.</td>
</tr>
<tr>
<td>customer_id</td>
<td><strong><em>string</em></strong> <br/>Identificador del cliente al que pertenece la tarjeta. Si la tarjeta es a nivel comercio este valor será null.</td>
</tr>
</tbody></table>

<h2 id="crear-una-tarjeta">Crear una tarjeta</h2>

<blockquote>
<p>Definición</p>
</blockquote>
<pre class="highlight shell">Comercio
POST https://sandbox-api.openpay.mx/v1/<span class="o">{</span>MERCHANT_ID<span class="o">}</span>/cards

Cliente
POST https://sandbox-api.openpay.mx/v1/<span class="o">{</span>MERCHANT_ID<span class="o">}</span>/customers/<span class="o">{</span>CUSTOMER_ID<span class="o">}</span>/cards
</pre><pre class="highlight php"><span class="cp">&lt;?</span>
<span class="c1">//Cliente
</span><span class="nv">$customer</span> <span class="o">=</span> <span class="nv">$openpay</span><span class="o">-&gt;</span><span class="na">customers</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="nx">customerId</span><span class="p">);</span>
<span class="nv">$card</span> <span class="o">=</span> <span class="nv">$customer</span><span class="o">-&gt;</span><span class="na">cards</span><span class="o">-&gt;</span><span class="na">add</span><span class="p">(</span><span class="nx">cardDataRequest</span><span class="p">);</span>

<span class="c1">//Comercio
</span><span class="nv">$card</span> <span class="o">=</span> <span class="nv">$openpay</span><span class="o">-&gt;</span><span class="na">cards</span><span class="o">-&gt;</span><span class="na">add</span><span class="p">(</span><span class="nx">cardDataRequest</span><span class="p">);</span>
<span class="cp">?&gt;</span>
</pre><pre class="highlight java"><span class="c1">//Cliente</span>
<span class="n">openpayAPI</span><span class="o">.</span><span class="na">cards</span><span class="o">().</span><span class="na">create</span><span class="o">(</span><span class="n">String</span> <span class="n">customerId</span><span class="o">,</span> <span class="n">Card</span> <span class="n">request</span><span class="o">);</span>

<span class="c1">//Comercio</span>
<span class="n">openpayAPI</span><span class="o">.</span><span class="na">cards</span><span class="o">().</span><span class="na">create</span><span class="o">(</span><span class="n">Card</span> <span class="n">request</span><span class="o">);</span>
</pre><pre class="highlight csharp"><span class="c1">//Cliente
</span><span class="n">openpayAPI</span><span class="p">.</span><span class="n">CardService</span><span class="p">.</span><span class="nf">Create</span><span class="p">(</span><span class="kt">string</span> <span class="n">customer_id</span><span class="p">,</span> <span class="n">Card</span> <span class="n">card</span><span class="p">);</span>

<span class="c1">//Comercio
</span><span class="n">openpayAPI</span><span class="p">.</span><span class="n">CardService</span><span class="p">.</span><span class="nf">Create</span><span class="p">(</span><span class="n">Card</span> <span class="n">card</span><span class="p">);</span>
</pre><pre class="highlight javascript"><span class="c1">// Comercio
</span><span class="nx">openpay</span><span class="p">.</span><span class="nx">cards</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="nx">cardRequest</span><span class="p">,</span> <span class="nx">callback</span><span class="p">);</span>

<span class="c1">// Cliente
</span><span class="nx">openpay</span><span class="p">.</span><span class="nx">customers</span><span class="p">.</span><span class="nx">cards</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="nx">customerId</span><span class="p">,</span> <span class="nx">cardRequest</span><span class="p">,</span> <span class="nx">callback</span><span class="p">);</span>
</pre><pre class="highlight ruby"><span class="c1">#Cliente</span>
<span class="vi">@cards</span><span class="o">=</span><span class="vi">@openpay</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span><span class="ss">:cards</span><span class="p">)</span>
<span class="vi">@cards</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span><span class="n">request_hash</span><span class="p">,</span> <span class="n">customer_id</span><span class="p">)</span>

<span class="c1">#Comercio</span>
<span class="vi">@cards</span><span class="o">=</span><span class="vi">@openpay</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span><span class="ss">:cards</span><span class="p">)</span>
<span class="vi">@cards</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span><span class="n">request_hash</span><span class="p">)</span>
</pre>
<blockquote>
<p>Ejemplo de petición con cliente</p>
</blockquote>
<pre class="highlight shell">curl https://sandbox-api.openpay.mx/v1/mzdtln0bmtms6o3kck8f/customers/ag4nktpdzebjiye1tlze/cards <span class="se">\</span>
   -u sk_e568c42a6c384b7ab02cd47d2e407cab: <span class="se">\</span>
   -H <span class="s2">"Content-type: application/json"</span> <span class="se">\</span>
   -X POST -d <span class="s1">'{
   "card_number":"4111111111111111",
   "holder_name":"Juan Perez Ramirez",
   "expiration_year":"20",
   "expiration_month":"12",
   "cvv2":"110"
 }'</span> 
</pre><pre class="highlight php"><span class="cp">&lt;?</span>
<span class="nv">$openpay</span> <span class="o">=</span> <span class="nx">Openpay</span><span class="o">::</span><span class="na">getInstance</span><span class="p">(</span><span class="s1">'moiep6umtcnanql3jrxp'</span><span class="p">,</span> <span class="s1">'sk_3433941e467c1055b178ce26348b0fac'</span><span class="p">);</span>

<span class="nv">$cardDataRequest</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">'holder_name'</span> <span class="o">=&gt;</span> <span class="s1">'Teofilo Velazco'</span><span class="p">,</span>
    <span class="s1">'card_number'</span> <span class="o">=&gt;</span> <span class="s1">'4916394462033681'</span><span class="p">,</span>
    <span class="s1">'cvv2'</span> <span class="o">=&gt;</span> <span class="s1">'123'</span><span class="p">,</span>
    <span class="s1">'expiration_month'</span> <span class="o">=&gt;</span> <span class="s1">'12'</span><span class="p">,</span>
    <span class="s1">'expiration_year'</span> <span class="o">=&gt;</span> <span class="s1">'15'</span><span class="p">,</span>
    <span class="s1">'address'</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
            <span class="s1">'line1'</span> <span class="o">=&gt;</span> <span class="s1">'Privada Rio No. 12'</span><span class="p">,</span>
            <span class="s1">'line2'</span> <span class="o">=&gt;</span> <span class="s1">'Co. El Tintero'</span><span class="p">,</span>
            <span class="s1">'line3'</span> <span class="o">=&gt;</span> <span class="s1">''</span><span class="p">,</span>
            <span class="s1">'postal_code'</span> <span class="o">=&gt;</span> <span class="s1">'76920'</span><span class="p">,</span>
            <span class="s1">'state'</span> <span class="o">=&gt;</span> <span class="s1">'Querétaro'</span><span class="p">,</span>
            <span class="s1">'city'</span> <span class="o">=&gt;</span> <span class="s1">'Querétaro.'</span><span class="p">,</span>
            <span class="s1">'country_code'</span> <span class="o">=&gt;</span> <span class="s1">'MX'</span><span class="p">));</span>

<span class="nv">$customer</span> <span class="o">=</span> <span class="nv">$openpay</span><span class="o">-&gt;</span><span class="na">customers</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">'a9ualumwnrcxkl42l6mh'</span><span class="p">);</span>
<span class="nv">$card</span> <span class="o">=</span> <span class="nv">$customer</span><span class="o">-&gt;</span><span class="na">cards</span><span class="o">-&gt;</span><span class="na">add</span><span class="p">(</span><span class="nv">$cardDataRequest</span><span class="p">);</span>
<span class="cp">?&gt;</span>
</pre><pre class="highlight java"><span class="n">OpenpayAPI</span> <span class="n">api</span> <span class="o">=</span> <span class="k">new</span> <span class="n">OpenpayAPI</span><span class="o">(</span><span class="s">"https://sandbox-api.openpay.mx"</span><span class="o">,</span> <span class="s">"sk_b05586ec98454522ac7d4ccdcaec9128"</span><span class="o">,</span> <span class="s">"maonhzpqm8xp2ydssovf"</span><span class="o">);</span>
<span class="n">Card</span> <span class="n">request</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Card</span><span class="o">();</span>
<span class="n">request</span><span class="o">.</span><span class="na">holderName</span><span class="o">(</span><span class="s">"Juan Perez Ramirez"</span><span class="o">);</span>
<span class="n">request</span><span class="o">.</span><span class="na">cardNumber</span><span class="o">(</span><span class="s">"4111111111111111"</span><span class="o">);</span>
<span class="n">request</span><span class="o">.</span><span class="na">cvv2</span><span class="o">(</span><span class="s">"110"</span><span class="o">);</span>
<span class="n">request</span><span class="o">.</span><span class="na">expirationMonth</span><span class="o">(</span><span class="mi">12</span><span class="o">);</span>
<span class="n">request</span><span class="o">.</span><span class="na">expirationYear</span><span class="o">(</span><span class="mi">20</span><span class="o">);</span>
<span class="n">Address</span> <span class="n">address</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Address</span><span class="o">();</span>
<span class="n">address</span><span class="o">.</span><span class="na">city</span><span class="o">(</span><span class="s">"Queretaro"</span><span class="o">);</span>
<span class="n">address</span><span class="o">.</span><span class="na">countryCode</span><span class="o">(</span><span class="s">"10"</span><span class="o">);</span>
<span class="n">address</span><span class="o">.</span><span class="na">state</span><span class="o">(</span><span class="s">"Queretaro"</span><span class="o">);</span>
<span class="n">address</span><span class="o">.</span><span class="na">postalCode</span><span class="o">(</span><span class="s">"79125"</span><span class="o">);</span>
<span class="n">address</span><span class="o">.</span><span class="na">line1</span><span class="o">(</span><span class="s">"Av. Pie de la cuesta #12"</span><span class="o">);</span>
<span class="n">address</span><span class="o">.</span><span class="na">line2</span><span class="o">(</span><span class="s">"Desarrollo San Pablo"</span><span class="o">);</span>
<span class="n">address</span><span class="o">.</span><span class="na">line3</span><span class="o">(</span><span class="s">"Qro. Qro."</span><span class="o">);</span>
<span class="n">request</span><span class="o">.</span><span class="na">address</span><span class="o">(</span><span class="n">address</span><span class="o">);</span>

<span class="n">request</span> <span class="o">=</span> <span class="n">api</span><span class="o">.</span><span class="na">cards</span><span class="o">().</span><span class="na">create</span><span class="o">(</span><span class="s">"a9pvykxz4g5rg0fplze0"</span><span class="o">,</span> <span class="n">request</span><span class="o">);</span>
</pre><pre class="highlight csharp"><span class="n">OpenpayAPI</span> <span class="n">api</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">OpenpayAPI</span><span class="p">(</span><span class="s">"sk_b05586ec98454522ac7d4ccdcaec9128"</span><span class="p">,</span> <span class="s">"maonhzpqm8xp2ydssovf"</span><span class="p">);</span>
<span class="n">Card</span> <span class="n">request</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">Card</span><span class="p">();</span>
<span class="n">request</span><span class="p">.</span><span class="n">HolderName</span> <span class="p">=</span> <span class="s">"Juan Perez Ramirez"</span><span class="p">;</span>
<span class="n">request</span><span class="p">.</span><span class="n">CardNumber</span> <span class="p">=</span> <span class="s">"4111111111111111"</span><span class="p">;</span>
<span class="n">request</span><span class="p">.</span><span class="n">Cvv2</span> <span class="p">=</span> <span class="s">"110"</span><span class="p">;</span>
<span class="n">request</span><span class="p">.</span><span class="n">ExpirationMonth</span> <span class="p">=</span> <span class="s">"12"</span><span class="p">;</span>
<span class="n">request</span><span class="p">.</span><span class="n">ExpirationYear</span> <span class="p">=</span> <span class="s">"20"</span><span class="p">;</span>
<span class="n">Address</span> <span class="n">address</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">Address</span><span class="p">();</span>
<span class="n">address</span><span class="p">.</span><span class="n">City</span> <span class="p">=</span> <span class="s">"Queretaro"</span><span class="p">;</span>
<span class="n">address</span><span class="p">.</span><span class="n">CountryCode</span> <span class="p">=</span> <span class="s">"MX"</span><span class="p">;</span>
<span class="n">address</span><span class="p">.</span><span class="n">State</span> <span class="p">=</span> <span class="s">"Queretaro"</span><span class="p">;</span>
<span class="n">address</span><span class="p">.</span><span class="n">PostalCode</span> <span class="p">=</span> <span class="s">"79125"</span><span class="p">;</span>
<span class="n">address</span><span class="p">.</span><span class="n">Line1</span> <span class="p">=</span> <span class="s">"Av. Pie de la cuesta #12"</span><span class="p">;</span>
<span class="n">address</span><span class="p">.</span><span class="n">Line2</span> <span class="p">=</span> <span class="s">"Desarrollo San Pablo"</span><span class="p">;</span>
<span class="n">address</span><span class="p">.</span><span class="n">Line3</span> <span class="p">=</span> <span class="s">"Qro. Qro."</span><span class="p">;</span>
<span class="n">request</span><span class="p">.</span><span class="n">Address</span> <span class="p">=</span> <span class="n">address</span><span class="p">;</span>

<span class="n">request</span> <span class="p">=</span> <span class="n">api</span><span class="p">.</span><span class="n">CardService</span><span class="p">.</span><span class="nf">Create</span><span class="p">(</span><span class="s">"a9pvykxz4g5rg0fplze0"</span><span class="p">,</span> <span class="n">request</span><span class="p">);</span>
</pre><pre class="highlight javascript"><span class="kd">var</span> <span class="nx">cardRequest</span> <span class="o">=</span> <span class="p">{</span>
   <span class="s1">'card_number'</span><span class="err">:</span><span class="s1">'4111111111111111'</span><span class="p">,</span>
   <span class="s1">'holder_name'</span><span class="err">:</span><span class="s1">'Juan Perez Ramirez'</span><span class="p">,</span>
   <span class="s1">'expiration_year'</span><span class="err">:</span><span class="s1">'20'</span><span class="p">,</span>
   <span class="s1">'expiration_month'</span><span class="err">:</span><span class="s1">'12'</span><span class="p">,</span>
   <span class="s1">'cvv2'</span><span class="err">:</span><span class="s1">'110'</span>
<span class="p">};</span>

<span class="nx">openpay</span><span class="p">.</span><span class="nx">customers</span><span class="p">.</span><span class="nx">cards</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="s1">'a9pvykxz4g5rg0fplze0'</span><span class="p">,</span> <span class="nx">cardRequest</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">card</span><span class="p">)</span>  <span class="p">{</span>
    <span class="c1">// ...    
</span><span class="p">});</span>
</pre><pre class="highlight ruby"><span class="vi">@openpay</span><span class="o">=</span><span class="no">OpenpayApi</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="s2">"mzdtln0bmtms6o3kck8f"</span><span class="p">,</span><span class="s2">"sk_e568c42a6c384b7ab02cd47d2e407cab"</span><span class="p">)</span>
<span class="vi">@cards</span><span class="o">=</span><span class="vi">@openpay</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span><span class="ss">:cards</span><span class="p">)</span>
<span class="n">address_hash</span><span class="o">=</span><span class="p">{</span>
      <span class="s2">"line1"</span> <span class="o">=&gt;</span> <span class="s2">"Calle 10"</span><span class="p">,</span>
      <span class="s2">"line2"</span> <span class="o">=&gt;</span> <span class="s2">"col. san pablo"</span><span class="p">,</span>
      <span class="s2">"line3"</span> <span class="o">=&gt;</span> <span class="s2">"entre la calle 1 y la 2"</span><span class="p">,</span>
      <span class="s2">"state"</span> <span class="o">=&gt;</span> <span class="s2">"Queretaro"</span><span class="p">,</span>
      <span class="s2">"city"</span> <span class="o">=&gt;</span> <span class="s2">"Queretaro"</span><span class="p">,</span>
      <span class="s2">"postal_code"</span> <span class="o">=&gt;</span> <span class="s2">"76000"</span><span class="p">,</span>
      <span class="s2">"country_code"</span> <span class="o">=&gt;</span> <span class="s2">"MX"</span>
   <span class="p">}</span>
<span class="n">request_hash</span><span class="o">=</span><span class="p">{</span>
     <span class="s2">"holder_name"</span> <span class="o">=&gt;</span> <span class="s2">"Juan Perez Ramirez"</span><span class="p">,</span>
     <span class="s2">"card_number"</span> <span class="o">=&gt;</span> <span class="s2">"411111XXXXXX1111"</span><span class="p">,</span>
     <span class="s2">"cvv2"</span> <span class="o">=&gt;</span> <span class="s2">"110"</span><span class="p">,</span>
     <span class="s2">"expiration_month"</span> <span class="o">=&gt;</span> <span class="s2">"12"</span><span class="p">,</span>
     <span class="s2">"expiration_year"</span> <span class="o">=&gt;</span> <span class="s2">"20"</span><span class="p">,</span>
     <span class="s2">"address"</span> <span class="o">=&gt;</span> <span class="n">address_hash</span>
   <span class="p">}</span>

<span class="n">response_hash</span><span class="o">=</span><span class="vi">@cards</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span><span class="n">request_hash</span><span class="p">.</span><span class="nf">to_hash</span><span class="p">,</span> <span class="s2">"asynwirguzkgq2bizogo"</span><span class="p">)</span>
</pre>
<blockquote>
<p>Ejemplo de respuesta</p>
</blockquote>
<pre class="highlight json"><span class="p">{</span><span class="w">
   </span><span class="s2">"id"</span><span class="p">:</span><span class="s2">"ktrpvymgatocelsciak7"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"type"</span><span class="p">:</span><span class="s2">"debit"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"brand"</span><span class="p">:</span><span class="s2">"visa"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"card_number"</span><span class="p">:</span><span class="s2">"411111XXXXXX1111"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"holder_name"</span><span class="p">:</span><span class="s2">"Juan Perez Ramirez"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"expiration_year"</span><span class="p">:</span><span class="s2">"20"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"expiration_month"</span><span class="p">:</span><span class="s2">"12"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"allows_charges"</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span><span class="w">
   </span><span class="s2">"allows_payouts"</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span><span class="w">
   </span><span class="s2">"creation_date"</span><span class="p">:</span><span class="s2">"2014-05-21T17:31:01-05:00"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"bank_name"</span><span class="p">:</span><span class="s2">"Banamex"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"customer_id"</span><span class="p">:</span><span class="s2">"ag4nktpdzebjiye1tlze"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"bank_code"</span><span class="p">:</span><span class="s2">"002"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></pre>
<p>Cuando se crea una tarjeta debe especificarse cliente, si no se especifica el cliente la tarjeta quedará registrada para la cuenta del comercio. Una vez guardada la tarjeta no se puede obtener el número y código de seguridad.</p>

<p><aside class="notice">
<strong>Nota:</strong> Todas las tarjetas al momento de guardarse en Openpay son validadas haciendo un autorización por $10.00 los cuales son devueltos en el momento.
</aside></p>

<p>Al momento de guardar la tarjeta se generará un id que podrá ser usado para hacer cargos a la tarjeta, envíos a una tarjeta o simplemente obtener la información no sensible de la tarjeta.</p>

<h3 id="petición">Petición</h3>

<table><thead>
<tr>
<th>Propiedad</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>holder_name</td>
<td><strong><em>string</em></strong> (requerido, longitud = 80) <br/>Nombre del tarjeta habiente.</td>
</tr>
<tr>
<td>card_number</td>
<td><strong><em>numeric</em></strong> (requerido) <br/>Numero de tarjeta puede ser de 16 o 19 dígitos.</td>
</tr>
<tr>
<td>cvv2</td>
<td><strong><em>numeric</em></strong> (requerido) <br/>Código de seguridad como aparece en la parte de atrás de la tarjeta. Generalmente 3 dígitos.</td>
</tr>
<tr>
<td>expiration_month</td>
<td><strong><em>numeric</em></strong> (requerido) <br/>Mes de expiración tal como aparece en la tarjeta.</td>
</tr>
<tr>
<td>expiration_year</td>
<td><strong><em>numeric</em></strong> (requerido) <br/>Año de expiración tal como aparece en la tarjeta.</td>
</tr>
<tr>
<td><a href="#objeto-dirección">address</a></td>
<td><strong><em>object</em></strong> <br/>Dirección de facturación del tarjeta habiente.</td>
</tr>
</tbody></table>

<h3 id="respuesta">Respuesta</h3>

<p>Regresa un <a href="#objeto-tarjeta">objeto tarjeta</a> cuando se creó correctamente o una <a href="#objeto-error">respuesta de error</a> si ocurrió algún problema en la creación.</p>

<h2 id="crear-una-tarjeta-con-token">Crear una tarjeta con token</h2>

<blockquote>
<p>Definición</p>
</blockquote>
<pre class="highlight shell">Comercio
POST https://sandbox-api.openpay.mx/v1/<span class="o">{</span>MERCHANT_ID<span class="o">}</span>/cards

Cliente
POST https://sandbox-api.openpay.mx/v1/<span class="o">{</span>MERCHANT_ID<span class="o">}</span>/customers/<span class="o">{</span>CUSTOMER_ID<span class="o">}</span>/cards
</pre><pre class="highlight php"><span class="cp">&lt;?</span>
<span class="c1">//Cliente
</span><span class="nv">$customer</span> <span class="o">=</span> <span class="nv">$openpay</span><span class="o">-&gt;</span><span class="na">customers</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="nx">customerId</span><span class="p">);</span>
<span class="nv">$card</span> <span class="o">=</span> <span class="nv">$customer</span><span class="o">-&gt;</span><span class="na">cards</span><span class="o">-&gt;</span><span class="na">add</span><span class="p">(</span><span class="nx">cardDataRequest</span><span class="p">);</span>

<span class="c1">//Comercio
</span><span class="nv">$card</span> <span class="o">=</span> <span class="nv">$openpay</span><span class="o">-&gt;</span><span class="na">cards</span><span class="o">-&gt;</span><span class="na">add</span><span class="p">(</span><span class="nx">cardDataRequest</span><span class="p">);</span>
<span class="cp">?&gt;</span>
</pre><pre class="highlight java"><span class="c1">//Cliente</span>
<span class="n">openpayAPI</span><span class="o">.</span><span class="na">cards</span><span class="o">().</span><span class="na">create</span><span class="o">(</span><span class="n">String</span> <span class="n">customerId</span><span class="o">,</span> <span class="n">Card</span> <span class="n">card</span><span class="o">);</span>

<span class="c1">//Comercio</span>
<span class="n">openpayAPI</span><span class="o">.</span><span class="na">cards</span><span class="o">().</span><span class="na">create</span><span class="o">(</span><span class="n">Card</span> <span class="n">card</span><span class="o">);</span>
</pre><pre class="highlight csharp"><span class="c1">//Cliente
</span><span class="n">openpayAPI</span><span class="p">.</span><span class="n">CardService</span><span class="p">.</span><span class="nf">Create</span><span class="p">(</span><span class="kt">string</span> <span class="n">customer_id</span><span class="p">,</span> <span class="n">Card</span> <span class="n">request</span><span class="p">);</span>

<span class="c1">//Comercio
</span><span class="n">openpayAPI</span><span class="p">.</span><span class="n">CardService</span><span class="p">.</span><span class="nf">Create</span><span class="p">(</span><span class="n">Card</span> <span class="n">request</span><span class="p">);</span>
</pre><pre class="highlight javascript"><span class="c1">// Comercio
</span><span class="nx">openpay</span><span class="p">.</span><span class="nx">cards</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="nx">cardRequest</span><span class="p">,</span> <span class="nx">callback</span><span class="p">);</span>

<span class="c1">// Cliente
</span><span class="nx">openpay</span><span class="p">.</span><span class="nx">customers</span><span class="p">.</span><span class="nx">cards</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="nx">customerId</span><span class="p">,</span> <span class="nx">cardRequest</span><span class="p">,</span> <span class="nx">callback</span><span class="p">);</span>
</pre><pre class="highlight ruby"><span class="c1">#Cliente</span>
<span class="vi">@cards</span><span class="o">=</span><span class="vi">@openpay</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span><span class="ss">:cards</span><span class="p">)</span>
<span class="vi">@cards</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span><span class="n">request_hash</span><span class="p">,</span> <span class="n">customer_id</span><span class="p">)</span>

<span class="c1">#Comercio</span>
<span class="vi">@cards</span><span class="o">=</span><span class="vi">@openpay</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span><span class="ss">:cards</span><span class="p">)</span>
<span class="vi">@cards</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span><span class="n">request_hash</span><span class="p">)</span>
</pre>
<blockquote>
<p>Ejemplo de petición con cliente</p>
</blockquote>
<pre class="highlight shell">curl https://sandbox-api.openpay.mx/v1/mzdtln0bmtms6o3kck8f/customers/ag4nktpdzebjiye1tlze/cards <span class="se">\</span>
   -u sk_e568c42a6c384b7ab02cd47d2e407cab: <span class="se">\</span>
   -H <span class="s2">"Content-type: application/json"</span> <span class="se">\</span>
   -X POST -d <span class="s1">'{
      "token_id":"tokgslwpdcrkhlgxqi9a"
   }'</span> 
</pre><pre class="highlight php"><span class="cp">&lt;?</span>
<span class="nv">$openpay</span> <span class="o">=</span> <span class="nx">Openpay</span><span class="o">::</span><span class="na">getInstance</span><span class="p">(</span><span class="s1">'moiep6umtcnanql3jrxp'</span><span class="p">,</span> <span class="s1">'sk_3433941e467c1055b178ce26348b0fac'</span><span class="p">);</span>

<span class="nv">$cardDataRequest</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">'token_id'</span> <span class="o">=&gt;</span> <span class="s1">'tokgslwpdcrkhlgxqi9a'</span>
    <span class="p">);</span>

<span class="nv">$customer</span> <span class="o">=</span> <span class="nv">$openpay</span><span class="o">-&gt;</span><span class="na">customers</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">'a9ualumwnrcxkl42l6mh'</span><span class="p">);</span>
<span class="nv">$card</span> <span class="o">=</span> <span class="nv">$customer</span><span class="o">-&gt;</span><span class="na">cards</span><span class="o">-&gt;</span><span class="na">add</span><span class="p">(</span><span class="nv">$cardDataRequest</span><span class="p">);</span>
<span class="cp">?&gt;</span>
</pre><pre class="highlight java"><span class="n">OpenpayAPI</span> <span class="n">api</span> <span class="o">=</span> <span class="k">new</span> <span class="n">OpenpayAPI</span><span class="o">(</span><span class="s">"https://sandbox-api.openpay.mx"</span><span class="o">,</span> <span class="s">"sk_b05586ec98454522ac7d4ccdcaec9128"</span><span class="o">,</span> <span class="s">"maonhzpqm8xp2ydssovf"</span><span class="o">);</span>
<span class="n">Card</span> <span class="n">request</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Card</span><span class="o">();</span>
<span class="n">request</span><span class="o">.</span><span class="na">tokenId</span><span class="o">(</span><span class="s">"tokgslwpdcrkhlgxqi9a"</span><span class="o">);</span>

<span class="n">request</span> <span class="o">=</span> <span class="n">api</span><span class="o">.</span><span class="na">cards</span><span class="o">().</span><span class="na">create</span><span class="o">(</span><span class="s">"a9pvykxz4g5rg0fplze0"</span><span class="o">,</span> <span class="n">request</span><span class="o">);</span>
</pre><pre class="highlight csharp"><span class="n">OpenpayAPI</span> <span class="n">api</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">OpenpayAPI</span><span class="p">(</span><span class="s">"sk_b05586ec98454522ac7d4ccdcaec9128"</span><span class="p">,</span> <span class="s">"maonhzpqm8xp2ydssovf"</span><span class="p">);</span>
<span class="n">Card</span> <span class="n">request</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">Card</span><span class="p">();</span>
<span class="n">request</span><span class="p">.</span><span class="n">TokenId</span> <span class="p">=</span> <span class="s">"tokgslwpdcrkhlgxqi9a"</span><span class="p">;</span>

<span class="n">request</span> <span class="p">=</span> <span class="n">api</span><span class="p">.</span><span class="n">CardService</span><span class="p">.</span><span class="nf">Create</span><span class="p">(</span><span class="s">"a9pvykxz4g5rg0fplze0"</span><span class="p">,</span> <span class="n">request</span><span class="p">);</span>
</pre><pre class="highlight javascript"><span class="kd">var</span> <span class="nx">cardRequest</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s1">'token_id'</span> <span class="err">:</span> <span class="s1">'tokgslwpdcrkhlgxqi9a'</span>
<span class="p">}</span>

<span class="nx">openpay</span><span class="p">.</span><span class="nx">customers</span><span class="p">.</span><span class="nx">cards</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="s1">'a9pvykxz4g5rg0fplze0'</span><span class="p">,</span> <span class="nx">cardRequest</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">card</span><span class="p">)</span>  <span class="p">{</span>
  <span class="c1">// ...
</span><span class="p">});</span>
</pre><pre class="highlight ruby"><span class="vi">@openpay</span><span class="o">=</span><span class="no">OpenpayApi</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="s2">"mzdtln0bmtms6o3kck8f"</span><span class="p">,</span><span class="s2">"sk_e568c42a6c384b7ab02cd47d2e407cab"</span><span class="p">)</span>
<span class="vi">@cards</span><span class="o">=</span><span class="vi">@openpay</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span><span class="ss">:cards</span><span class="p">)</span>
<span class="n">request_hash</span><span class="o">=</span><span class="p">{</span>
     <span class="s2">"token_id"</span> <span class="o">=&gt;</span> <span class="s2">"tokgslwpdcrkhlgxqi9a"</span>
   <span class="p">}</span>

<span class="n">response_hash</span><span class="o">=</span><span class="vi">@cards</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span><span class="n">request_hash</span><span class="p">.</span><span class="nf">to_hash</span><span class="p">,</span> <span class="s2">"asynwirguzkgq2bizogo"</span><span class="p">)</span>
</pre>
<blockquote>
<p>Ejemplo de respuesta</p>
</blockquote>
<pre class="highlight json"><span class="p">{</span><span class="w">
   </span><span class="s2">"type"</span><span class="p">:</span><span class="s2">"credit"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"brand"</span><span class="p">:</span><span class="s2">"visa"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"id"</span><span class="p">:</span><span class="s2">"kso4st83wxaibffyt6su"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"card_number"</span><span class="p">:</span><span class="s2">"4242"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"holder_name"</span><span class="p">:</span><span class="s2">"Juan Perez Ramirez"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"expiration_year"</span><span class="p">:</span><span class="s2">"15"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"expiration_month"</span><span class="p">:</span><span class="s2">"12"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"allows_charges"</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span><span class="w">
   </span><span class="s2">"allows_payouts"</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span><span class="w">
   </span><span class="s2">"creation_date"</span><span class="p">:</span><span class="s2">"2014-02-12T10:57:09-06:00"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"bank_name"</span><span class="p">:</span><span class="s2">"BANCOMER"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"bank_code"</span><span class="p">:</span><span class="s2">"012"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"customer_id"</span><span class="p">:</span><span class="s2">"a2b79p8xmzeyvmolqfja"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></pre>
<p>Crea una tarjeta a partir de un token obtenido desde el navegador o dispositivo del cliente. Esta forma evita que la información sensible de la tarjeta pase por tus servidores.</p>

<h3 id="petición">Petición</h3>

<table><thead>
<tr>
<th>Propiedad</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>token_id</td>
<td><strong><em>string</em></strong> (requerido, longitud = 45) <br/> Identificador del token generado en el navegador o dispositivo del cliente.</td>
</tr>
</tbody></table>

<h3 id="respuesta">Respuesta</h3>

<p>Regresa un <a href="#objeto-tarjeta">objeto tarjeta</a></p>

<h2 id="obtener-una-tarjeta">Obtener una tarjeta</h2>

<blockquote>
<p>Definición</p>
</blockquote>
<pre class="highlight shell">Comercio
GET https://sandbox-api.openpay.mx/v1/<span class="o">{</span>MERCHANT_ID<span class="o">}</span>/cards/<span class="o">{</span>CARD_ID<span class="o">}</span>

Cliente
GET https://sandbox-api.openpay.mx/v1/<span class="o">{</span>MERCHANT_ID<span class="o">}</span>/customers/<span class="o">{</span>CUSTOMER_ID<span class="o">}</span>/cards/<span class="o">{</span>CARD_ID<span class="o">}</span>
</pre><pre class="highlight php"><span class="cp">&lt;?</span>
<span class="c1">//Cliente
</span><span class="nv">$customer</span> <span class="o">=</span> <span class="nv">$openpay</span><span class="o">-&gt;</span><span class="na">customers</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="nx">customerId</span><span class="p">);</span>
<span class="nv">$card</span> <span class="o">=</span> <span class="nv">$customer</span><span class="o">-&gt;</span><span class="na">cards</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="nx">cardId</span><span class="p">);</span>

<span class="c1">//Comercio
</span><span class="nv">$card</span> <span class="o">=</span> <span class="nv">$openpay</span><span class="o">-&gt;</span><span class="na">cards</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="nx">cardId</span><span class="p">);</span>
<span class="cp">?&gt;</span>
</pre><pre class="highlight java"><span class="c1">//Cliente</span>
<span class="n">openpayAPI</span><span class="o">.</span><span class="na">cards</span><span class="o">().</span><span class="na">get</span><span class="o">(</span><span class="n">String</span> <span class="n">customerId</span><span class="o">,</span> <span class="n">String</span> <span class="n">cardId</span><span class="o">);</span>

<span class="c1">//Comercio</span>
<span class="n">openpayAPI</span><span class="o">.</span><span class="na">cards</span><span class="o">().</span><span class="na">get</span><span class="o">(</span><span class="n">String</span> <span class="n">cardId</span><span class="o">);</span>
</pre><pre class="highlight csharp"><span class="c1">//Cliente
</span><span class="n">openpayAPI</span><span class="p">.</span><span class="n">CardService</span><span class="p">.</span><span class="nf">Get</span><span class="p">(</span><span class="kt">string</span> <span class="n">customer_id</span><span class="p">,</span> <span class="kt">string</span> <span class="n">card_id</span><span class="p">);</span>

<span class="c1">//Comercio
</span><span class="n">openpayAPI</span><span class="p">.</span><span class="n">CardService</span><span class="p">.</span><span class="nf">Get</span><span class="p">(</span><span class="kt">string</span> <span class="n">card_id</span><span class="p">);</span>
</pre><pre class="highlight javascript"><span class="c1">// Comercio
</span><span class="nx">openpay</span><span class="p">.</span><span class="nx">cards</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="nx">cardId</span><span class="p">,</span> <span class="nx">callback</span><span class="p">);</span>

<span class="c1">// Cliente
</span><span class="nx">openpay</span><span class="p">.</span><span class="nx">customers</span><span class="p">.</span><span class="nx">cards</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="nx">customerId</span><span class="p">,</span> <span class="nx">cardId</span><span class="p">,</span> <span class="nx">callback</span><span class="p">);</span>
</pre><pre class="highlight ruby"><span class="c1">#Cliente</span>
<span class="vi">@cards</span><span class="o">=</span><span class="vi">@openpay</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span><span class="ss">:cards</span><span class="p">)</span>
<span class="vi">@cards</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="n">card_id</span><span class="p">,</span> <span class="n">customer_id</span><span class="p">)</span>

<span class="c1">#Comercio</span>
<span class="vi">@cards</span><span class="o">=</span><span class="vi">@openpay</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span><span class="ss">:cards</span><span class="p">)</span>
<span class="vi">@cards</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="n">card_id</span><span class="p">)</span>
</pre>
<blockquote>
<p>Ejemplo de petición con cliente</p>
</blockquote>
<pre class="highlight shell">curl https://sandbox-api.openpay.mx/v1/mzdtln0bmtms6o3kck8f/customers/ag4nktpdzebjiye1tlze/cards/ktrpvymgatocelsciak7 <span class="se">\</span>
   -u sk_e568c42a6c384b7ab02cd47d2e407cab: <span class="se">\</span>
   -H <span class="s2">"Content-type: application/json"</span> 
</pre><pre class="highlight php"><span class="cp">&lt;?</span>
<span class="nv">$openpay</span> <span class="o">=</span> <span class="nx">Openpay</span><span class="o">::</span><span class="na">getInstance</span><span class="p">(</span><span class="s1">'moiep6umtcnanql3jrxp'</span><span class="p">,</span> <span class="s1">'sk_3433941e467c1055b178ce26348b0fac'</span><span class="p">);</span>

<span class="nv">$customer</span> <span class="o">=</span> <span class="nv">$openpay</span><span class="o">-&gt;</span><span class="na">customers</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">'a9ualumwnrcxkl42l6mh'</span><span class="p">);</span>
<span class="nv">$card</span> <span class="o">=</span> <span class="nv">$customer</span><span class="o">-&gt;</span><span class="na">cards</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">'k9pn8qtsvr7k7gxoq1r5'</span><span class="p">);</span>
<span class="cp">?&gt;</span>
</pre><pre class="highlight java"><span class="n">OpenpayAPI</span> <span class="n">api</span> <span class="o">=</span> <span class="k">new</span> <span class="n">OpenpayAPI</span><span class="o">(</span><span class="s">"https://sandbox-api.openpay.mx"</span><span class="o">,</span> <span class="s">"sk_b05586ec98454522ac7d4ccdcaec9128"</span><span class="o">,</span> <span class="s">"maonhzpqm8xp2ydssovf"</span><span class="o">);</span>
<span class="n">Card</span> <span class="n">card</span> <span class="o">=</span> <span class="n">api</span><span class="o">.</span><span class="na">cards</span><span class="o">().</span><span class="na">get</span><span class="o">(</span><span class="s">"a9pvykxz4g5rg0fplze0"</span><span class="o">,</span> <span class="s">"ktrpvymgatocelsciak7"</span><span class="o">);</span>
</pre><pre class="highlight csharp"><span class="n">OpenpayAPI</span> <span class="n">api</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">OpenpayAPI</span><span class="p">(</span><span class="s">"sk_b05586ec98454522ac7d4ccdcaec9128"</span><span class="p">,</span> <span class="s">"maonhzpqm8xp2ydssovf"</span><span class="p">);</span>
<span class="n">Card</span> <span class="n">card</span> <span class="p">=</span> <span class="n">api</span><span class="p">.</span><span class="n">CardService</span><span class="p">.</span><span class="nf">Get</span><span class="p">(</span><span class="s">"a9pvykxz4g5rg0fplze0"</span><span class="p">,</span> <span class="s">"ktrpvymgatocelsciak7"</span><span class="p">);</span>
</pre><pre class="highlight javascript"><span class="nx">openpay</span><span class="p">.</span><span class="nx">customers</span><span class="p">.</span><span class="nx">cards</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">'a9pvykxz4g5rg0fplze0'</span><span class="p">,</span> <span class="s1">'ktrpvymgatocelsciak7'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">card</span><span class="p">){</span>
  <span class="c1">// ...
</span><span class="p">});</span>
</pre><pre class="highlight ruby"><span class="vi">@openpay</span><span class="o">=</span><span class="no">OpenpayApi</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="s2">"mzdtln0bmtms6o3kck8f"</span><span class="p">,</span><span class="s2">"sk_e568c42a6c384b7ab02cd47d2e407cab"</span><span class="p">)</span>
<span class="vi">@cards</span><span class="o">=</span><span class="vi">@openpay</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span><span class="ss">:cards</span><span class="p">)</span>

<span class="n">response_hash</span><span class="o">=</span><span class="vi">@cards</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="s2">"ktrpvymgatocelsciak7"</span><span class="p">,</span> <span class="s2">"asynwirguzkgq2bizogo"</span><span class="p">)</span>
</pre>
<blockquote>
<p>Ejemplo de respuesta</p>
</blockquote>
<pre class="highlight json"><span class="p">{</span><span class="w">
   </span><span class="s2">"id"</span><span class="p">:</span><span class="s2">"ktrpvymgatocelsciak7"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"type"</span><span class="p">:</span><span class="s2">"debit"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"brand"</span><span class="p">:</span><span class="s2">"visa"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"card_number"</span><span class="p">:</span><span class="s2">"411111XXXXXX1111"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"holder_name"</span><span class="p">:</span><span class="s2">"Juan Perez Ramirez"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"expiration_year"</span><span class="p">:</span><span class="s2">"20"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"expiration_month"</span><span class="p">:</span><span class="s2">"12"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"allows_charges"</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span><span class="w">
   </span><span class="s2">"allows_payouts"</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span><span class="w">
   </span><span class="s2">"creation_date"</span><span class="p">:</span><span class="s2">"2014-05-21T17:31:01-05:00"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"bank_name"</span><span class="p">:</span><span class="s2">"Banamex"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"customer_id"</span><span class="p">:</span><span class="s2">"ag4nktpdzebjiye1tlze"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"bank_code"</span><span class="p">:</span><span class="s2">"002"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></pre>
<p>Obtiene los detalles de una tarjeta solicitándola con su id. </p>

<p><aside class="notice">
<strong>Nota:</strong> Nunca se regresarán datos sensibles como son el código de seguridad y del número de tarjeta sólo se mostraran los primeros 6 y los últimos 4 dígitos.
</aside></p>

<h3 id="petición">Petición</h3>

<table><thead>
<tr>
<th>Propiedad</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td><strong><em>string</em></strong> (requerido, longitud = 45) <br/> Identificador único de la tarjeta</td>
</tr>
</tbody></table>

<h3 id="respuesta">Respuesta</h3>

<p>Regresa un <a href="#objeto-tarjeta">objeto tarjeta</a></p>

<h2 id="eliminar-una-tarjeta">Eliminar una tarjeta</h2>

<blockquote>
<p>Definición</p>
</blockquote>
<pre class="highlight shell">Comercio
DELETE https://sandbox-api.openpay.mx/v1/<span class="o">{</span>MERCHANT_ID<span class="o">}</span>/cards/<span class="o">{</span>CARD_ID<span class="o">}</span>

Cliente
DELETE https://sandbox-api.openpay.mx/v1/<span class="o">{</span>MERCHANT_ID<span class="o">}</span>/customers/<span class="o">{</span>CUSTOMER_ID<span class="o">}</span>/cards/<span class="o">{</span>CARD_ID<span class="o">}</span>
</pre><pre class="highlight php"><span class="cp">&lt;?</span>
<span class="c1">//Cliente
</span><span class="nv">$customer</span> <span class="o">=</span> <span class="nv">$openpay</span><span class="o">-&gt;</span><span class="na">customers</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="nx">customerId</span><span class="p">);</span>
<span class="nv">$card</span> <span class="o">=</span> <span class="nv">$customer</span><span class="o">-&gt;</span><span class="na">cards</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="nx">cardId</span><span class="p">);</span>
<span class="nv">$card</span><span class="o">-&gt;</span><span class="na">delete</span><span class="p">();</span>

<span class="c1">//Comercio
</span><span class="nv">$card</span> <span class="o">=</span> <span class="nv">$openpay</span><span class="o">-&gt;</span><span class="na">cards</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="nx">cardId</span><span class="p">);</span>
<span class="nv">$card</span><span class="o">-&gt;</span><span class="na">delete</span><span class="p">();</span>
<span class="cp">?&gt;</span>
</pre><pre class="highlight java"><span class="c1">//Cliente</span>
<span class="n">openpayAPI</span><span class="o">.</span><span class="na">cards</span><span class="o">().</span><span class="na">delete</span><span class="o">(</span><span class="n">String</span> <span class="n">customerId</span><span class="o">,</span> <span class="n">String</span> <span class="n">cardId</span><span class="o">);</span>

<span class="c1">//Comercio</span>
<span class="n">openpayAPI</span><span class="o">.</span><span class="na">cards</span><span class="o">().</span><span class="na">delete</span><span class="o">(</span><span class="n">String</span> <span class="n">cardId</span><span class="o">);</span>
</pre><pre class="highlight csharp"><span class="c1">//Cliente
</span><span class="n">openpayAPI</span><span class="p">.</span><span class="n">CardService</span><span class="p">.</span><span class="nf">Delete</span><span class="p">(</span><span class="kt">string</span> <span class="n">customer_id</span><span class="p">,</span> <span class="kt">string</span> <span class="n">card_id</span><span class="p">);</span>

<span class="c1">//Comercio
</span><span class="n">openpayAPI</span><span class="p">.</span><span class="n">CardService</span><span class="p">.</span><span class="nf">Delete</span><span class="p">(</span><span class="kt">string</span> <span class="n">card_id</span><span class="p">);</span>
</pre><pre class="highlight javascript"><span class="c1">// Comercio
</span><span class="nx">openpay</span><span class="p">.</span><span class="nx">cards</span><span class="p">.</span><span class="k">delete</span><span class="p">(</span><span class="nx">cardId</span><span class="p">,</span> <span class="nx">callback</span><span class="p">);</span>

<span class="c1">// Cliente
</span><span class="nx">openpay</span><span class="p">.</span><span class="nx">customers</span><span class="p">.</span><span class="nx">cards</span><span class="p">.</span><span class="k">delete</span><span class="p">(</span><span class="nx">customerId</span><span class="p">,</span> <span class="nx">cardId</span><span class="p">,</span> <span class="nx">callback</span><span class="p">);</span>
</pre><pre class="highlight ruby"><span class="c1">#Cliente</span>
<span class="vi">@cards</span><span class="o">=</span><span class="vi">@openpay</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span><span class="ss">:cards</span><span class="p">)</span>
<span class="vi">@cards</span><span class="p">.</span><span class="nf">delete</span><span class="p">(</span><span class="n">card_id</span><span class="p">,</span> <span class="n">customer_id</span><span class="p">)</span>

<span class="c1">#Comercio</span>
<span class="vi">@cards</span><span class="o">=</span><span class="vi">@openpay</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span><span class="ss">:cards</span><span class="p">)</span>
<span class="vi">@cards</span><span class="p">.</span><span class="nf">delete</span><span class="p">(</span><span class="n">card_id</span><span class="p">)</span>
</pre>
<blockquote>
<p>Ejemplo de petición con cliente</p>
</blockquote>
<pre class="highlight shell">curl https://sandbox-api.openpay.mx/v1/mzdtln0bmtms6o3kck8f/customers/ag4nktpdzebjiye1tlze/cards/ktrpvymgatocelsciak7 <span class="se">\</span>
   -u sk_e568c42a6c384b7ab02cd47d2e407cab: <span class="se">\</span>
   -X DELETE
</pre><pre class="highlight php"><span class="cp">&lt;?</span>
<span class="nv">$openpay</span> <span class="o">=</span> <span class="nx">Openpay</span><span class="o">::</span><span class="na">getInstance</span><span class="p">(</span><span class="s1">'moiep6umtcnanql3jrxp'</span><span class="p">,</span> <span class="s1">'sk_3433941e467c1055b178ce26348b0fac'</span><span class="p">);</span>

<span class="nv">$customer</span> <span class="o">=</span> <span class="nv">$openpay</span><span class="o">-&gt;</span><span class="na">customers</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">'a9ualumwnrcxkl42l6mh'</span><span class="p">);</span>
<span class="nv">$card</span> <span class="o">=</span> <span class="nv">$customer</span><span class="o">-&gt;</span><span class="na">cards</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">'k9pn8qtsvr7k7gxoq1r5'</span><span class="p">);</span>
<span class="nv">$card</span><span class="o">-&gt;</span><span class="na">delete</span><span class="p">();</span>
<span class="cp">?&gt;</span>
</pre><pre class="highlight java"><span class="n">OpenpayAPI</span> <span class="n">api</span> <span class="o">=</span> <span class="k">new</span> <span class="n">OpenpayAPI</span><span class="o">(</span><span class="s">"https://sandbox-api.openpay.mx"</span><span class="o">,</span> <span class="s">"sk_b05586ec98454522ac7d4ccdcaec9128"</span><span class="o">,</span> <span class="s">"maonhzpqm8xp2ydssovf"</span><span class="o">);</span>
<span class="n">api</span><span class="o">.</span><span class="na">cards</span><span class="o">().</span><span class="na">delete</span><span class="o">(</span><span class="s">"a9pvykxz4g5rg0fplze0"</span><span class="o">,</span> <span class="s">"ktrpvymgatocelsciak7"</span><span class="o">);</span>
</pre><pre class="highlight csharp"><span class="n">OpenpayAPI</span> <span class="n">api</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">OpenpayAPI</span><span class="p">(</span><span class="s">"sk_b05586ec98454522ac7d4ccdcaec9128"</span><span class="p">,</span> <span class="s">"maonhzpqm8xp2ydssovf"</span><span class="p">);</span>
<span class="n">api</span><span class="p">.</span><span class="n">CardService</span><span class="p">.</span><span class="nf">Delete</span><span class="p">(</span><span class="s">"a9pvykxz4g5rg0fplze0"</span><span class="p">,</span> <span class="s">"ktrpvymgatocelsciak7"</span><span class="p">);</span>
</pre><pre class="highlight javascript"><span class="nx">openpay</span><span class="p">.</span><span class="nx">customers</span><span class="p">.</span><span class="nx">cards</span><span class="p">.</span><span class="k">delete</span><span class="p">(</span><span class="s1">'a9pvykxz4g5rg0fplze0'</span><span class="p">,</span> <span class="s1">'ktrpvymgatocelsciak7'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// ...
</span><span class="p">});</span>
</pre><pre class="highlight ruby"><span class="vi">@openpay</span><span class="o">=</span><span class="no">OpenpayApi</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="s2">"mzdtln0bmtms6o3kck8f"</span><span class="p">,</span><span class="s2">"sk_e568c42a6c384b7ab02cd47d2e407cab"</span><span class="p">)</span>
<span class="vi">@cards</span><span class="o">=</span><span class="vi">@openpay</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span><span class="ss">:cards</span><span class="p">)</span>

<span class="n">response_hash</span><span class="o">=</span><span class="vi">@cards</span><span class="p">.</span><span class="nf">delete</span><span class="p">(</span><span class="s2">"ktrpvymgatocelsciak7"</span><span class="p">,</span> <span class="s2">"asynwirguzkgq2bizogo"</span><span class="p">)</span>
</pre>
<p>Elimina una tarjeta del cliente o comercio. Una vez eliminada no se permitirá hacer movimientos, sin embargo, se mantendrán todos los registros de operaciones que haya realizado y se podrán consultar en el dashboard.</p>

<p>Para eliminarla sólo es necesario proporcionar el identificador de la tarjeta.</p>

<h3 id="petición">Petición</h3>

<table><thead>
<tr>
<th>Propiedad</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td><strong><em>string</em></strong> (requerido, longitud = 45) <br/> Identificador único de la tarjeta</td>
</tr>
</tbody></table>

<h3 id="respuesta">Respuesta</h3>

<p>Si la tarjeta se borra correctamente la respuesta es vacía, si no se puede borrar se regresa un <a href="#objeto-error">objeto error</a> indicando el motivo. </p>

<h2 id="listado-de-tarjetas">Listado de tarjetas</h2>

<blockquote>
<p>Definición</p>
</blockquote>
<pre class="highlight shell">Comercio
GET https://sandbox-api.openpay.mx/v1/<span class="o">{</span>MERCHANT_ID<span class="o">}</span>/customers

Cliente
GET https://sandbox-api.openpay.mx/v1/<span class="o">{</span>MERCHANT_ID<span class="o">}</span>/customers/<span class="o">{</span>CUSTOMER_ID<span class="o">}</span>/cards
</pre><pre class="highlight php"><span class="cp">&lt;?</span>
<span class="c1">//Clientes
</span><span class="nv">$customer</span> <span class="o">=</span> <span class="nv">$openpay</span><span class="o">-&gt;</span><span class="na">customers</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="nx">customerId</span><span class="p">);</span>
<span class="nv">$cardList</span> <span class="o">=</span> <span class="nv">$customer</span><span class="o">-&gt;</span><span class="na">cards</span><span class="o">-&gt;</span><span class="na">getList</span><span class="p">(</span><span class="nx">findDataRequest</span><span class="p">);</span>

<span class="c1">//Comercio
</span><span class="nv">$cardList</span> <span class="o">=</span> <span class="nv">$openpay</span><span class="o">-&gt;</span><span class="na">cards</span><span class="o">-&gt;</span><span class="na">getList</span><span class="p">(</span><span class="nx">findDataRequest</span><span class="p">);</span>
<span class="cp">?&gt;</span>
</pre><pre class="highlight java"><span class="c1">//Cliente</span>
<span class="n">openpayAPI</span><span class="o">.</span><span class="na">cards</span><span class="o">().</span><span class="na">list</span><span class="o">(</span><span class="n">String</span> <span class="n">customerId</span><span class="o">,</span> <span class="n">SearchParams</span> <span class="n">request</span><span class="o">);</span>

<span class="c1">//Comercio</span>
<span class="n">openpayAPI</span><span class="o">.</span><span class="na">cards</span><span class="o">().</span><span class="na">list</span><span class="o">(</span><span class="n">SearchParams</span> <span class="n">request</span><span class="o">);</span>
</pre><pre class="highlight csharp"><span class="c1">//Cliente
</span><span class="n">openpayAPI</span><span class="p">.</span><span class="n">CardService</span><span class="p">.</span><span class="nf">List</span><span class="p">(</span><span class="kt">string</span> <span class="n">customer_id</span><span class="p">,</span> <span class="n">SearchParams</span> <span class="n">request</span> <span class="p">=</span> <span class="k">null</span><span class="p">);</span>

<span class="c1">//Comercio
</span><span class="n">openpayAPI</span><span class="p">.</span><span class="n">CardService</span><span class="p">.</span><span class="nf">List</span><span class="p">(</span><span class="n">SearchParams</span> <span class="n">request</span> <span class="p">=</span> <span class="k">null</span><span class="p">);</span>
</pre><pre class="highlight javascript"><span class="c1">// Comercio
</span><span class="nx">openpay</span><span class="p">.</span><span class="nx">cards</span><span class="p">.</span><span class="nx">list</span><span class="p">(</span><span class="nx">callback</span><span class="p">);</span>
<span class="nx">openpay</span><span class="p">.</span><span class="nx">cards</span><span class="p">.</span><span class="nx">list</span><span class="p">(</span><span class="nx">searchParams</span><span class="p">,</span> <span class="nx">callback</span><span class="p">);</span>

<span class="c1">// Cliente
</span><span class="nx">openpay</span><span class="p">.</span><span class="nx">cards</span><span class="p">.</span><span class="nx">list</span><span class="p">(</span><span class="nx">customerId</span><span class="p">,</span> <span class="nx">callback</span><span class="p">);</span>
<span class="nx">openpay</span><span class="p">.</span><span class="nx">cards</span><span class="p">.</span><span class="nx">list</span><span class="p">(</span><span class="nx">customerId</span><span class="p">,</span> <span class="nx">searchParams</span><span class="p">,</span> <span class="nx">callback</span><span class="p">);</span>
</pre><pre class="highlight ruby"><span class="c1">#Cliente</span>
<span class="vi">@cards</span><span class="o">=</span><span class="vi">@openpay</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span><span class="ss">:cards</span><span class="p">)</span>
<span class="vi">@cards</span><span class="p">.</span><span class="nf">all</span><span class="p">(</span><span class="n">customer_id</span><span class="p">)</span>

<span class="c1">#Comercio</span>
<span class="vi">@cards</span><span class="o">=</span><span class="vi">@openpay</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span><span class="ss">:cards</span><span class="p">)</span>
<span class="vi">@cards</span><span class="p">.</span><span class="nf">all</span>
</pre>
<blockquote>
<p>Ejemplo de petición con cliente</p>
</blockquote>
<pre class="highlight shell">curl -g <span class="s2">"https://sandbox-api.openpay.mx/v1/mzdtln0bmtms6o3kck8f/customers/ag4nktpdzebjiye1tlze/cards?limit=2"</span> <span class="se">\</span>
   -u sk_e568c42a6c384b7ab02cd47d2e407cab: 
</pre><pre class="highlight php"><span class="cp">&lt;?</span>
<span class="nv">$openpay</span> <span class="o">=</span> <span class="nx">Openpay</span><span class="o">::</span><span class="na">getInstance</span><span class="p">(</span><span class="s1">'moiep6umtcnanql3jrxp'</span><span class="p">,</span> <span class="s1">'sk_3433941e467c1055b178ce26348b0fac'</span><span class="p">);</span>

<span class="nv">$findDataRequest</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">'creation[gte]'</span> <span class="o">=&gt;</span> <span class="s1">'2013-01-01'</span><span class="p">,</span>
    <span class="s1">'creation[lte]'</span> <span class="o">=&gt;</span> <span class="s1">'2013-12-31'</span><span class="p">,</span>
    <span class="s1">'offset'</span> <span class="o">=&gt;</span> <span class="mi">0</span><span class="p">,</span>
    <span class="s1">'limit'</span> <span class="o">=&gt;</span> <span class="mi">5</span><span class="p">);</span>

<span class="nv">$customer</span> <span class="o">=</span> <span class="nv">$openpay</span><span class="o">-&gt;</span><span class="na">customers</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">'a9ualumwnrcxkl42l6mh'</span><span class="p">);</span>
<span class="nv">$cardList</span> <span class="o">=</span> <span class="nv">$customer</span><span class="o">-&gt;</span><span class="na">cards</span><span class="o">-&gt;</span><span class="na">getList</span><span class="p">(</span><span class="nv">$findDataRequest</span><span class="p">);</span>
<span class="cp">?&gt;</span>
</pre><pre class="highlight java"><span class="kd">final</span> <span class="n">Calendar</span> <span class="n">dateGte</span> <span class="o">=</span> <span class="n">Calendar</span><span class="o">.</span><span class="na">getInstance</span><span class="o">();</span>
<span class="kd">final</span> <span class="n">Calendar</span> <span class="n">dateLte</span> <span class="o">=</span> <span class="n">Calendar</span><span class="o">.</span><span class="na">getInstance</span><span class="o">();</span>
<span class="n">dateGte</span><span class="o">.</span><span class="na">set</span><span class="o">(</span><span class="mi">2014</span><span class="o">,</span> <span class="mi">5</span><span class="o">,</span> <span class="mi">1</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span> <span class="mi">0</span><span class="o">);</span>
<span class="n">dateLte</span><span class="o">.</span><span class="na">set</span><span class="o">(</span><span class="mi">2014</span><span class="o">,</span> <span class="mi">5</span><span class="o">,</span> <span class="mi">15</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span> <span class="mi">0</span><span class="o">);</span>

<span class="n">OpenpayAPI</span> <span class="n">api</span> <span class="o">=</span> <span class="k">new</span> <span class="n">OpenpayAPI</span><span class="o">(</span><span class="s">"https://sandbox-api.openpay.mx"</span><span class="o">,</span> <span class="s">"sk_b05586ec98454522ac7d4ccdcaec9128"</span><span class="o">,</span> <span class="s">"maonhzpqm8xp2ydssovf"</span><span class="o">);</span>
<span class="n">SearchParams</span> <span class="n">request</span> <span class="o">=</span> <span class="k">new</span> <span class="n">SearchParams</span><span class="o">();</span>
<span class="n">request</span><span class="o">.</span><span class="na">creationGte</span><span class="o">(</span><span class="n">dateGte</span><span class="o">.</span><span class="na">getTime</span><span class="o">());</span>
<span class="n">request</span><span class="o">.</span><span class="na">creationLte</span><span class="o">(</span><span class="n">dateLte</span><span class="o">.</span><span class="na">getTime</span><span class="o">());</span>
<span class="n">request</span><span class="o">.</span><span class="na">offset</span><span class="o">(</span><span class="mi">0</span><span class="o">);</span>
<span class="n">request</span><span class="o">.</span><span class="na">limit</span><span class="o">(</span><span class="mi">100</span><span class="o">);</span>
<span class="n">List</span><span class="o">&lt;</span><span class="n">Card</span><span class="o">&gt;</span> <span class="n">cards</span> <span class="o">=</span> <span class="n">api</span><span class="o">.</span><span class="na">cards</span><span class="o">().</span><span class="na">list</span><span class="o">(</span><span class="s">"a9pvykxz4g5rg0fplze0"</span><span class="o">,</span> <span class="n">request</span><span class="o">);</span>
</pre><pre class="highlight csharp"><span class="n">OpenpayAPI</span> <span class="n">api</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">OpenpayAPI</span><span class="p">(</span><span class="s">"sk_b05586ec98454522ac7d4ccdcaec9128"</span><span class="p">,</span> <span class="s">"maonhzpqm8xp2ydssovf"</span><span class="p">);</span>
<span class="n">SearchParams</span> <span class="n">request</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">SearchParams</span><span class="p">();</span>
<span class="n">request</span><span class="p">.</span><span class="n">CreationGte</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">Datetime</span><span class="p">(</span><span class="m">2014</span><span class="p">,</span> <span class="m">5</span><span class="p">,</span> <span class="m">1</span><span class="p">);</span>
<span class="n">request</span><span class="p">.</span><span class="n">CreationLte</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">DateTime</span><span class="p">(</span><span class="m">2014</span><span class="p">,</span> <span class="m">5</span><span class="p">,</span> <span class="m">15</span><span class="p">);</span>
<span class="n">request</span><span class="p">.</span><span class="n">Offset</span> <span class="p">=</span> <span class="m">0</span><span class="p">;</span>
<span class="n">request</span><span class="p">.</span><span class="n">Limit</span> <span class="p">=</span> <span class="m">100</span><span class="p">;</span>

<span class="n">List</span><span class="p">&lt;</span><span class="n">Card</span><span class="p">&gt;</span> <span class="n">cards</span> <span class="p">=</span> <span class="n">api</span><span class="p">.</span><span class="n">CardService</span><span class="p">.</span><span class="nf">List</span><span class="p">(</span><span class="s">"a9pvykxz4g5rg0fplze0"</span><span class="p">,</span> <span class="n">request</span><span class="p">);</span>
</pre><pre class="highlight javascript"><span class="kd">var</span> <span class="nx">searchParams</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s1">'limit'</span> <span class="err">:</span> <span class="mi">2</span>
<span class="p">};</span>

<span class="nx">openpay</span><span class="p">.</span><span class="nx">customers</span><span class="p">.</span><span class="nx">cards</span><span class="p">.</span><span class="nx">list</span><span class="p">(</span><span class="s1">'ag4nktpdzebjiye1tlze'</span><span class="p">,</span> <span class="nx">searchParams</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">list</span><span class="p">){</span>
  <span class="c1">// ...
</span><span class="p">});</span>
</pre><pre class="highlight ruby"><span class="vi">@openpay</span><span class="o">=</span><span class="no">OpenpayApi</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="s2">"mzdtln0bmtms6o3kck8f"</span><span class="p">,</span><span class="s2">"sk_e568c42a6c384b7ab02cd47d2e407cab"</span><span class="p">)</span>
<span class="vi">@cards</span><span class="o">=</span><span class="vi">@openpay</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span><span class="ss">:cards</span><span class="p">)</span>

<span class="n">response_hash</span><span class="o">=</span><span class="vi">@cards</span><span class="p">.</span><span class="nf">all</span><span class="p">(</span><span class="s2">"asynwirguzkgq2bizogo"</span><span class="p">)</span>
</pre>
<blockquote>
<p>Ejemplo de respuesta</p>
</blockquote>
<pre class="highlight json"><span class="p">[</span><span class="w">
   </span><span class="p">{</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="s2">"kxq1rpdymlcpxekvjsxm"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"card_number"</span><span class="p">:</span><span class="s2">"1118"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"holder_name"</span><span class="p">:</span><span class="s2">"Pedro Paramo"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"expiration_year"</span><span class="p">:</span><span class="s2">"15"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"expiration_month"</span><span class="p">:</span><span class="s2">"12"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"allows_charges"</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="s2">"allows_payouts"</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="s2">"creation_date"</span><span class="p">:</span><span class="s2">"2013-11-20T09:22:25-06:00"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"bank_name"</span><span class="p">:</span><span class="s2">"BBVA BANCOMER"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"bank_code"</span><span class="p">:</span><span class="s2">"012"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"type"</span><span class="p">:</span><span class="s2">"debit"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"brand"</span><span class="p">:</span><span class="s2">"mastercard"</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="p">{</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="s2">"kgjy0jiami01kkpdoywr"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"card_number"</span><span class="p">:</span><span class="s2">"1111"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"holder_name"</span><span class="p">:</span><span class="s2">"Pedro Paramo"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"expiration_year"</span><span class="p">:</span><span class="s2">"15"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"expiration_month"</span><span class="p">:</span><span class="s2">"12"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"allows_charges"</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="s2">"allows_payouts"</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="s2">"creation_date"</span><span class="p">:</span><span class="s2">"2013-11-19T13:26:12-06:00"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"bank_name"</span><span class="p">:</span><span class="s2">"BBVA BANCOMER"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"bank_code"</span><span class="p">:</span><span class="s2">"012"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"type"</span><span class="p">:</span><span class="s2">"debit"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"brand"</span><span class="p">:</span><span class="s2">"mastercard"</span><span class="w">
   </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></pre>
<p>Regresa una lista de las tarjetas registrados por comercio o cliente, si desea delimitar el resultado se pueden utilizar los filtros. </p>

<h3 id="petición">Petición</h3>

<p>Puede realizar una búsqueda utilizando los siguiente parámetros como filtros.</p>

<table><thead>
<tr>
<th>Propiedad</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>creation</td>
<td><strong><em>date</em></strong> <br/>Igual a la fecha de creación. Formato yyyy-mm-dd</td>
</tr>
<tr>
<td>creation[gte]</td>
<td><strong><em>date</em></strong> <br/>Mayor a la fecha de creación. Formato yyyy-mm-dd</td>
</tr>
<tr>
<td>creation[lte]</td>
<td><strong><em>date</em></strong> <br/>Menor a la fecha de creación. Formato yyyy-mm-dd</td>
</tr>
<tr>
<td>offset</td>
<td><strong><em>numeric</em></strong> <br/>Número de registros a omitir al inicio, por defecto 0.</td>
</tr>
<tr>
<td>limit</td>
<td><strong><em>numeric</em></strong> <br/>Número de registros que se requieren, por defecto 10.</td>
</tr>
</tbody></table>

<h3 id="respuesta">Respuesta</h3>

<p>Listado de <a href="#objeto-tarjeta">objetos tarjeta</a> registrados de acuerdo a los parámetros proporcionados, ordenadas por fecha de creación en orden descendente.</p>

<h1 id="cuentas-bancarias">Cuentas Bancarias</h1>

<p>Se pueden almacenar múltiples cuentas bancarias por cliente o por comercio para posteriormente retirar fondos. </p>

<h2 id="objeto-cuenta-bancaria">Objeto Cuenta Bancaria</h2>

<blockquote>
<p>Ejemplo de objeto </p>
</blockquote>
<pre class="highlight json"><span class="p">{</span><span class="w">
   </span><span class="s2">"id"</span><span class="p">:</span><span class="s2">"brppwl9nwmruogk2do0j"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"clabe"</span><span class="p">:</span><span class="s2">"032180000118359719"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"bank_code"</span><span class="p">:</span><span class="s2">"032"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"bank_name"</span><span class="p">:</span><span class="s2">"IXE"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"alias"</span><span class="p">:</span><span class="err">null</span><span class="p">,</span><span class="w">
   </span><span class="s2">"holder_name"</span><span class="p">:</span><span class="s2">"Juan Hernández Sánchez"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"creation_date"</span><span class="p">:</span><span class="s2">"2013-11-14T12:29:18-06shell00"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></pre>
<table><thead>
<tr>
<th>Propiedad</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td><strong><em>string</em></strong> <br/>ID de la cuenta bancaria.</td>
</tr>
<tr>
<td>holder_name</td>
<td><strong><em>string</em></strong> <br/>Nombre completo del titular.</td>
</tr>
<tr>
<td>alias</td>
<td><strong><em>string</em></strong> <br/>Nombre por el cual el se identifica a la cuenta bancaria.</td>
</tr>
<tr>
<td>clabe</td>
<td><strong><em>string</em></strong> <br/>Número CLABE asignado a la cuenta bancaria.</td>
</tr>
<tr>
<td>bank_name</td>
<td><strong><em>string</em></strong> <br/>Nombre abreviado del banco donde radica la cuenta, en base al siguiente catálogo de <a href="http://es.wikipedia.org/wiki/CLABE#C.C3.B3digo_de_Banco">Códigos de Banco</a>.</td>
</tr>
<tr>
<td>bank_code</td>
<td><strong><em>string</em></strong> <br/>Código del banco donde radica la cuenta bancaria, en base al siguiente catálogo de <a href="http://es.wikipedia.org/wiki/CLABE#C.C3.B3digo_de_Banco">Códigos de Banco</a>.</td>
</tr>
<tr>
<td>creation_date </td>
<td><strong><em>datetime</em></strong> <br/>Fecha y hora en que se creó la cuenta bancaria en formato ISO 8601.</td>
</tr>
</tbody></table>

<h2 id="crear-una-cuenta-bancaria">Crear una cuenta bancaria</h2>

<blockquote>
<p>Definición</p>
</blockquote>
<pre class="highlight shell">POST https://sandbox-api.openpay.mx/v1/<span class="o">{</span>MERCHANT_ID<span class="o">}</span>/customers/<span class="o">{</span>CUSTOMER_ID<span class="o">}</span>/bankaccounts
</pre><pre class="highlight php"><span class="cp">&lt;?</span>
<span class="nv">$customer</span> <span class="o">=</span> <span class="nv">$openpay</span><span class="o">-&gt;</span><span class="na">customers</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="nx">customerId</span><span class="p">);</span>
<span class="nv">$bankaccount</span> <span class="o">=</span> <span class="nv">$customer</span><span class="o">-&gt;</span><span class="na">bankaccounts</span><span class="o">-&gt;</span><span class="na">add</span><span class="p">(</span><span class="nx">bankDataRequest</span><span class="p">);</span>
<span class="cp">?&gt;</span>
</pre><pre class="highlight java"><span class="c1">//Cliente</span>
<span class="n">openpayAPI</span><span class="o">.</span><span class="na">bankAccounts</span><span class="o">().</span><span class="na">create</span><span class="o">(</span><span class="n">String</span> <span class="n">customerId</span><span class="o">,</span> <span class="n">BankAccount</span> <span class="n">request</span><span class="o">);</span>
</pre><pre class="highlight csharp"><span class="c1">//Cliente
</span><span class="n">openpayAPI</span><span class="p">.</span><span class="n">BankAccountService</span><span class="p">.</span><span class="nf">Create</span><span class="p">(</span><span class="kt">string</span> <span class="n">customer_id</span><span class="p">,</span> <span class="n">BankAccount</span> <span class="n">request</span><span class="p">);</span>
</pre><pre class="highlight javascript"><span class="nx">openpay</span><span class="p">.</span><span class="nx">customers</span><span class="p">.</span><span class="nx">bankaccounts</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="nx">customerId</span><span class="p">,</span> <span class="nx">bankaccountRequest</span><span class="p">,</span> <span class="nx">callback</span><span class="p">);</span>
</pre><pre class="highlight ruby"><span class="c1">#Cliente</span>
<span class="vi">@bank_accounts</span><span class="o">=</span><span class="vi">@openpay</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span><span class="ss">:bankaccounts</span><span class="p">)</span>
<span class="vi">@bank_accounts</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span><span class="n">request_hash</span><span class="p">,</span> <span class="n">customer_id</span><span class="p">)</span>
</pre>
<blockquote>
<p>Ejemplo de petición con cliente</p>
</blockquote>
<pre class="highlight shell">curl https://sandbox-api.openpay.mx/v1/mzdtln0bmtms6o3kck8f/customers/ag4nktpdzebjiye1tlze/bankaccounts <span class="se">\</span>
   -u sk_e568c42a6c384b7ab02cd47d2e407cab: <span class="se">\</span>
   -H <span class="s2">"Content-type: application/json"</span> <span class="se">\</span>
   -X POST -d <span class="s1">'{
   "clabe":"032180000118359719",
   "alias":"Cuenta principal",
   "holder_name":"Juan Hernández Sánchez"
}'</span>
</pre><pre class="highlight php"><span class="cp">&lt;?</span>
<span class="nv">$openpay</span> <span class="o">=</span> <span class="nx">Openpay</span><span class="o">::</span><span class="na">getInstance</span><span class="p">(</span><span class="s1">'moiep6umtcnanql3jrxp'</span><span class="p">,</span> <span class="s1">'sk_3433941e467c1055b178ce26348b0fac'</span><span class="p">);</span>

<span class="nv">$bankDataRequest</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">'clabe'</span> <span class="o">=&gt;</span> <span class="s1">'072910007380090615'</span><span class="p">,</span>
    <span class="s1">'alias'</span> <span class="o">=&gt;</span> <span class="s1">'Cuenta principal'</span><span class="p">,</span>
    <span class="s1">'holder_name'</span> <span class="o">=&gt;</span> <span class="s1">'Teofilo Velazco'</span><span class="p">);</span>

<span class="nv">$customer</span> <span class="o">=</span> <span class="nv">$openpay</span><span class="o">-&gt;</span><span class="na">customers</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">'a9ualumwnrcxkl42l6mh'</span><span class="p">);</span>
<span class="nv">$bankaccount</span> <span class="o">=</span> <span class="nv">$customer</span><span class="o">-&gt;</span><span class="na">bankaccounts</span><span class="o">-&gt;</span><span class="na">add</span><span class="p">(</span><span class="nv">$bankDataRequest</span><span class="p">);</span>
<span class="cp">?&gt;</span>
</pre><pre class="highlight java"><span class="n">OpenpayAPI</span> <span class="n">api</span> <span class="o">=</span> <span class="k">new</span> <span class="n">OpenpayAPI</span><span class="o">(</span><span class="s">"https://sandbox-api.openpay.mx"</span><span class="o">,</span> <span class="s">"sk_b05586ec98454522ac7d4ccdcaec9128"</span><span class="o">,</span> <span class="s">"maonhzpqm8xp2ydssovf"</span><span class="o">);</span>
<span class="n">BankAccount</span> <span class="n">request</span> <span class="o">=</span> <span class="k">new</span> <span class="n">BankAccount</span><span class="o">();</span>
<span class="n">request</span><span class="o">.</span><span class="na">holderName</span><span class="o">(</span><span class="s">"Juan Hernández Sánchez"</span><span class="o">);</span>
<span class="n">request</span><span class="o">.</span><span class="na">alias</span><span class="o">(</span><span class="s">"Cuenta principal"</span><span class="o">);</span>
<span class="n">request</span><span class="o">.</span><span class="na">clabe</span><span class="o">(</span><span class="s">"032XXXXXXXXXX59719"</span><span class="o">);</span>

<span class="n">request</span> <span class="o">=</span> <span class="n">api</span><span class="o">.</span><span class="na">bankAccounts</span><span class="o">().</span><span class="na">create</span><span class="o">(</span><span class="s">"a9pvykxz4g5rg0fplze0"</span><span class="o">,</span> <span class="n">request</span><span class="o">);</span>
</pre><pre class="highlight csharp"><span class="n">OpenpayAPI</span> <span class="n">api</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">OpenpayAPI</span><span class="p">(</span><span class="s">"sk_b05586ec98454522ac7d4ccdcaec9128"</span><span class="p">,</span> <span class="s">"maonhzpqm8xp2ydssovf"</span><span class="p">);</span>
<span class="n">BankAccount</span> <span class="n">request</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">BankAccount</span><span class="p">();</span>
<span class="n">request</span><span class="p">.</span><span class="n">HolderName</span> <span class="p">=</span> <span class="s">"Juan Hernández Sánchez"</span><span class="p">;</span>
<span class="n">request</span><span class="p">.</span><span class="n">Alias</span> <span class="p">=</span> <span class="s">"Cuenta principal"</span><span class="p">;</span>
<span class="n">request</span><span class="p">.</span><span class="n">CLABE</span> <span class="p">=</span> <span class="s">"032XXXXXXXXXX59719"</span><span class="p">;</span>

<span class="n">request</span> <span class="p">=</span> <span class="n">api</span><span class="p">.</span><span class="n">BankAccountService</span><span class="p">.</span><span class="nf">Create</span><span class="p">(</span><span class="s">"a9pvykxz4g5rg0fplze0"</span><span class="p">,</span> <span class="n">request</span><span class="p">);</span>
</pre><pre class="highlight javascript"><span class="kd">var</span> <span class="nx">bankaccountRequest</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s1">'clabe'</span> <span class="err">:</span> <span class="s1">'032180000118359719'</span><span class="p">,</span>
  <span class="s1">'alias'</span> <span class="err">:</span> <span class="s1">'Cuenta principal'</span><span class="p">,</span>
  <span class="s1">'holder_name'</span> <span class="err">:</span> <span class="s1">'Juan Hernández Sánchez'</span>
<span class="p">};</span>

<span class="nx">openpay</span><span class="p">.</span><span class="nx">customers</span><span class="p">.</span><span class="nx">bankaccounts</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="s1">'a9pvykxz4g5rg0fplze0'</span><span class="p">,</span> <span class="nx">bankaccountRequest</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">bankaccount</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// ...
</span><span class="p">});</span>
</pre><pre class="highlight ruby"><span class="vi">@openpay</span><span class="o">=</span><span class="no">OpenpayApi</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="s2">"mzdtln0bmtms6o3kck8f"</span><span class="p">,</span><span class="s2">"sk_e568c42a6c384b7ab02cd47d2e407cab"</span><span class="p">)</span>
<span class="vi">@bank_accounts</span><span class="o">=</span><span class="vi">@openpay</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span><span class="ss">:bankaccounts</span><span class="p">)</span>
<span class="n">request_hash</span><span class="o">=</span><span class="p">{</span>
     <span class="s2">"holder_name"</span> <span class="o">=&gt;</span> <span class="s2">"Juan Hernández Sánchez"</span><span class="p">,</span>
     <span class="s2">"alias"</span> <span class="o">=&gt;</span> <span class="s2">"Cuenta principal"</span><span class="p">,</span>
     <span class="s2">"clabe"</span> <span class="o">=&gt;</span> <span class="s2">"032XXXXXXXXXX59719"</span>
   <span class="p">}</span>

<span class="n">response_hash</span><span class="o">=</span><span class="vi">@bank_accounts</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span><span class="n">request_hash</span><span class="p">.</span><span class="nf">to_hash</span><span class="p">,</span> <span class="s2">"asynwirguzkgq2bizogo"</span><span class="p">)</span>
</pre>
<blockquote>
<p>Ejemplo de respuesta</p>
</blockquote>
<pre class="highlight json"><span class="p">{</span><span class="w">
   </span><span class="s2">"id"</span><span class="p">:</span><span class="s2">"buyj4apkwilpp2jfxr9r"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"clabe"</span><span class="p">:</span><span class="s2">"032XXXXXXXXXX59719"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"bank_code"</span><span class="p">:</span><span class="s2">"032"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"bank_name"</span><span class="p">:</span><span class="s2">"IXE"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"alias"</span><span class="p">:</span><span class="s2">"Cuenta principal"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"holder_name"</span><span class="p">:</span><span class="s2">"Juan Hernández Sánchez"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"creation_date"</span><span class="p">:</span><span class="s2">"2014-05-22T11:02:10-05:00"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></pre>
<p>Crea y asigna una cuenta bancaria al cliente espeficado.</p>

<h3 id="petición">Petición</h3>

<table><thead>
<tr>
<th>Propiedad</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>holder_name</td>
<td><strong><em>string</em></strong> (requerido, longitud = 80) <br/>Nombre completo del titular.</td>
</tr>
<tr>
<td>alias</td>
<td><strong><em>string</em></strong> (opcional, longitud = 45)<br/>Nombre por el cual el se identifica a la cuenta bancaria.</td>
</tr>
<tr>
<td>clabe</td>
<td><strong><em>string</em></strong> (requerido, longitud = 45) <br/>Número CLABE asignado a la cuenta bancaria.</td>
</tr>
</tbody></table>

<h3 id="respuesta">Respuesta</h3>

<p>Regresa un <a href="#objeto-cuenta-bancaria">objeto cuenta bancaria</a> creado o un error en caso de ocurrir algún problema.</p>

<h2 id="obtener-una-cuenta-bancaria">Obtener una cuenta bancaria</h2>

<blockquote>
<p>Definición</p>
</blockquote>
<pre class="highlight shell">GET https://sandbox-api.openpay.mx/v1/<span class="o">{</span>MERCHANT_ID<span class="o">}</span>/customers/<span class="o">{</span>CUSTOMER_ID<span class="o">}</span>/bankaccounts/<span class="o">{</span>BANK_ACCOUNT_ID<span class="o">}</span>
</pre><pre class="highlight php"><span class="cp">&lt;?</span>
<span class="nv">$customer</span> <span class="o">=</span> <span class="nv">$openpay</span><span class="o">-&gt;</span><span class="na">customers</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="nx">customerId</span><span class="p">);</span>
<span class="nv">$bankaccount</span> <span class="o">=</span> <span class="nv">$customer</span><span class="o">-&gt;</span><span class="na">bankaccounts</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="nx">bankAccountId</span><span class="p">);</span>
<span class="cp">?&gt;</span>
</pre><pre class="highlight java"><span class="c1">//Cliente</span>
<span class="n">openpayAPI</span><span class="o">.</span><span class="na">bankAccounts</span><span class="o">().</span><span class="na">get</span><span class="o">(</span><span class="n">String</span> <span class="n">customerId</span><span class="o">,</span> <span class="n">String</span> <span class="n">bankAccountId</span><span class="o">);</span>
</pre><pre class="highlight csharp"><span class="c1">//Cliente
</span><span class="n">openpayAPI</span><span class="p">.</span><span class="n">BankAccountService</span><span class="p">.</span><span class="nf">Get</span><span class="p">(</span><span class="kt">string</span> <span class="n">customer_id</span><span class="p">,</span> <span class="kt">string</span> <span class="n">bank_account_id</span><span class="p">);</span>
</pre><pre class="highlight javascript"><span class="nx">openpay</span><span class="p">.</span><span class="nx">customers</span><span class="p">.</span><span class="nx">bankaccounts</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="nx">customerId</span><span class="p">,</span> <span class="nx">bankaccountId</span><span class="p">,</span> <span class="nx">callback</span><span class="p">);</span>
</pre><pre class="highlight ruby"><span class="c1">#Cliente </span>
<span class="vi">@bank_accounts</span><span class="o">=</span><span class="vi">@openpay</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span><span class="ss">:bankaccounts</span><span class="p">)</span>
<span class="vi">@bank_accounts</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="n">customer_id</span><span class="p">,</span> <span class="n">bankaccount_id</span><span class="p">)</span>
</pre>
<blockquote>
<p>Ejemplo de petición con cliente</p>
</blockquote>
<pre class="highlight shell">curl https://sandbox-api.openpay.mx/v1/mzdtln0bmtms6o3kck8f/customers/ag4nktpdzebjiye1tlze/bankaccounts/buyj4apkwilpp2jfxr9r <span class="se">\</span>
   -u sk_e568c42a6c384b7ab02cd47d2e407cab:
</pre><pre class="highlight php"><span class="cp">&lt;?</span>
<span class="nv">$openpay</span> <span class="o">=</span> <span class="nx">Openpay</span><span class="o">::</span><span class="na">getInstance</span><span class="p">(</span><span class="s1">'moiep6umtcnanql3jrxp'</span><span class="p">,</span> <span class="s1">'sk_3433941e467c1055b178ce26348b0fac'</span><span class="p">);</span>

<span class="nv">$customer</span> <span class="o">=</span> <span class="nv">$openpay</span><span class="o">-&gt;</span><span class="na">customers</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">'a9ualumwnrcxkl42l6mh'</span><span class="p">);</span>
<span class="nv">$bankaccount</span> <span class="o">=</span> <span class="nv">$customer</span><span class="o">-&gt;</span><span class="na">bankaccounts</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">'b4vcouaavwuvkpufh0so'</span><span class="p">);</span>
<span class="cp">?&gt;</span>
</pre><pre class="highlight java"><span class="n">OpenpayAPI</span> <span class="n">api</span> <span class="o">=</span> <span class="k">new</span> <span class="n">OpenpayAPI</span><span class="o">(</span><span class="s">"https://sandbox-api.openpay.mx"</span><span class="o">,</span> <span class="s">"sk_b05586ec98454522ac7d4ccdcaec9128"</span><span class="o">,</span> <span class="s">"maonhzpqm8xp2ydssovf"</span><span class="o">);</span>
<span class="n">BankAccount</span> <span class="n">bankAccount</span> <span class="o">=</span> <span class="n">api</span><span class="o">.</span><span class="na">bankAccounts</span><span class="o">().</span><span class="na">get</span><span class="o">(</span><span class="s">"a9pvykxz4g5rg0fplze0"</span><span class="o">,</span> <span class="s">"buyj4apkwilpp2jfxr9r"</span><span class="o">);</span>
</pre><pre class="highlight csharp"><span class="n">OpenpayAPI</span> <span class="n">api</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">OpenpayAPI</span><span class="p">(</span><span class="s">"sk_b05586ec98454522ac7d4ccdcaec9128"</span><span class="p">,</span> <span class="s">"maonhzpqm8xp2ydssovf"</span><span class="p">);</span>
<span class="n">BankAccount</span> <span class="n">bankAccount</span> <span class="p">=</span> <span class="n">api</span><span class="p">.</span><span class="n">BankAccountService</span><span class="p">.</span><span class="nf">Get</span><span class="p">(</span><span class="s">"a9pvykxz4g5rg0fplze0"</span><span class="p">,</span> <span class="s">"buyj4apkwilpp2jfxr9r"</span><span class="p">);</span>
</pre><pre class="highlight javascript"><span class="nx">openpay</span><span class="p">.</span><span class="nx">customers</span><span class="p">.</span><span class="nx">bankaccounts</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">'a9pvykxz4g5rg0fplze0'</span><span class="p">,</span> <span class="s1">'buyj4apkwilpp2jfxr9r'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">bankaccount</span><span class="p">){</span>
  <span class="c1">// ...
</span><span class="p">});</span>
</pre><pre class="highlight ruby"><span class="vi">@openpay</span><span class="o">=</span><span class="no">OpenpayApi</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="s2">"mzdtln0bmtms6o3kck8f"</span><span class="p">,</span><span class="s2">"sk_e568c42a6c384b7ab02cd47d2e407cab"</span><span class="p">)</span>
<span class="vi">@bank_accounts</span><span class="o">=</span><span class="vi">@openpay</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span><span class="ss">:bankaccounts</span><span class="p">)</span>

<span class="n">response_hash</span><span class="o">=</span><span class="vi">@bank_accounts</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="s2">"asynwirguzkgq2bizogo"</span><span class="p">,</span> <span class="s2">"buyj4apkwilpp2jfxr9r"</span><span class="p">)</span>
</pre>
<blockquote>
<p>Ejemplo de respuesta</p>
</blockquote>
<pre class="highlight json"><span class="p">{</span><span class="w">
   </span><span class="s2">"id"</span><span class="p">:</span><span class="s2">"buyj4apkwilpp2jfxr9r"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"clabe"</span><span class="p">:</span><span class="s2">"032XXXXXXXXXX59719"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"bank_code"</span><span class="p">:</span><span class="s2">"032"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"bank_name"</span><span class="p">:</span><span class="s2">"IXE"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"alias"</span><span class="p">:</span><span class="s2">"Cuenta principal"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"holder_name"</span><span class="p">:</span><span class="s2">"Juan Hernández Sánchez"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"creation_date"</span><span class="p">:</span><span class="s2">"2014-05-22T11:02:10-05:00"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></pre>
<p>Obtiene los detalles de una cuenta bancaria asignada a un cliente. </p>

<h3 id="petición">Petición</h3>

<table><thead>
<tr>
<th>Propiedad</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td><strong><em>string</em></strong> (requerido, longitud = 45) <br/> Identificador único de la cuenta bancaria</td>
</tr>
</tbody></table>

<h3 id="respuesta">Respuesta</h3>

<p>Regresa un <a href="#objeto-cuenta-bancaria">objeto cuenta bancaria</a></p>

<h2 id="eliminar-una-cuenta-bancaria">Eliminar una cuenta bancaria</h2>

<blockquote>
<p>Definición</p>
</blockquote>
<pre class="highlight shell">DELETE https://sandbox-api.openpay.mx/v1/<span class="o">{</span>MERCHANT_ID<span class="o">}</span>/customers/<span class="o">{</span>CUSTOMER_ID<span class="o">}</span>/bankaccounts/<span class="o">{</span>BANK_ACCOUNT_ID<span class="o">}</span>
</pre><pre class="highlight php"><span class="cp">&lt;?</span>
<span class="nv">$customer</span> <span class="o">=</span> <span class="nv">$openpay</span><span class="o">-&gt;</span><span class="na">customers</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="nx">customerId</span><span class="p">);</span>
<span class="nv">$bankaccount</span> <span class="o">=</span> <span class="nv">$customer</span><span class="o">-&gt;</span><span class="na">bankaccounts</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="nx">bankAccountId</span><span class="p">);</span>
<span class="nv">$bankaccount</span><span class="o">-&gt;</span><span class="na">delete</span><span class="p">();</span>
<span class="cp">?&gt;</span>
</pre><pre class="highlight java"><span class="c1">//Cliente</span>
<span class="n">openpayAPI</span><span class="o">.</span><span class="na">bankAccounts</span><span class="o">().</span><span class="na">delete</span><span class="o">(</span><span class="n">String</span> <span class="n">customerId</span><span class="o">,</span> <span class="n">String</span> <span class="n">bankAccountId</span><span class="o">);</span>
</pre><pre class="highlight csharp"><span class="c1">//Cliente
</span><span class="n">openpayAPI</span><span class="p">.</span><span class="n">BankAccountService</span><span class="p">.</span><span class="nf">Delete</span><span class="p">(</span><span class="kt">string</span> <span class="n">customer_id</span><span class="p">,</span> <span class="kt">string</span> <span class="n">bank_account_id</span><span class="p">);</span>
</pre><pre class="highlight javascript"><span class="nx">openpay</span><span class="p">.</span><span class="nx">customers</span><span class="p">.</span><span class="nx">bankaccounts</span><span class="p">.</span><span class="k">delete</span><span class="p">(</span><span class="nx">customerId</span><span class="p">,</span><span class="nx">bankaccountId</span><span class="p">,</span> <span class="nx">callback</span><span class="p">);</span>
</pre><pre class="highlight ruby"><span class="c1">#Cliente</span>
<span class="vi">@bank_accounts</span><span class="o">=</span><span class="vi">@openpay</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span><span class="ss">:bankaccounts</span><span class="p">)</span>
<span class="vi">@bank_accounts</span><span class="p">.</span><span class="nf">delete</span><span class="p">(</span><span class="n">customer_id</span><span class="p">,</span> <span class="n">bankaccount_id</span><span class="p">)</span>
</pre>
<blockquote>
<p>Ejemplo de petición con cliente</p>
</blockquote>
<pre class="highlight shell">curl https://sandbox-api.openpay.mx/v1/mzdtln0bmtms6o3kck8f/customers/ag4nktpdzebjiye1tlze/bankaccounts/buyj4apkwilpp2jfxr9r <span class="se">\</span>
   -u sk_e568c42a6c384b7ab02cd47d2e407cab: <span class="se">\</span>
   -X DELETE
</pre><pre class="highlight php"><span class="cp">&lt;?</span>
<span class="nv">$openpay</span> <span class="o">=</span> <span class="nx">Openpay</span><span class="o">::</span><span class="na">getInstance</span><span class="p">(</span><span class="s1">'moiep6umtcnanql3jrxp'</span><span class="p">,</span> <span class="s1">'sk_3433941e467c1055b178ce26348b0fac'</span><span class="p">);</span>

<span class="nv">$customer</span> <span class="o">=</span> <span class="nv">$openpay</span><span class="o">-&gt;</span><span class="na">customers</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">'a9ualumwnrcxkl42l6mh'</span><span class="p">);</span>
<span class="nv">$bankaccount</span> <span class="o">=</span> <span class="nv">$customer</span><span class="o">-&gt;</span><span class="na">bankaccounts</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">'b4vcouaavwuvkpufh0so'</span><span class="p">);</span>
<span class="nv">$bankaccount</span><span class="o">-&gt;</span><span class="na">delete</span><span class="p">();</span>
<span class="cp">?&gt;</span>
</pre><pre class="highlight java"><span class="n">OpenpayAPI</span> <span class="n">api</span> <span class="o">=</span> <span class="k">new</span> <span class="n">OpenpayAPI</span><span class="o">(</span><span class="s">"https://sandbox-api.openpay.mx"</span><span class="o">,</span> <span class="s">"sk_b05586ec98454522ac7d4ccdcaec9128"</span><span class="o">,</span> <span class="s">"maonhzpqm8xp2ydssovf"</span><span class="o">);</span>
<span class="n">api</span><span class="o">.</span><span class="na">bankAccounts</span><span class="o">().</span><span class="na">delete</span><span class="o">(</span><span class="s">"a9pvykxz4g5rg0fplze0"</span><span class="o">,</span> <span class="s">"buyj4apkwilpp2jfxr9r"</span><span class="o">);</span>
</pre><pre class="highlight csharp"><span class="n">OpenpayAPI</span> <span class="n">api</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">OpenpayAPI</span><span class="p">(</span><span class="s">"sk_b05586ec98454522ac7d4ccdcaec9128"</span><span class="p">,</span> <span class="s">"maonhzpqm8xp2ydssovf"</span><span class="p">);</span>
<span class="n">api</span><span class="p">.</span><span class="n">BankAccountService</span><span class="p">.</span><span class="nf">Delete</span><span class="p">(</span><span class="s">"a9pvykxz4g5rg0fplze0"</span><span class="p">,</span> <span class="s">"buyj4apkwilpp2jfxr9r"</span><span class="p">);</span>
</pre><pre class="highlight javascript"><span class="nx">openpay</span><span class="p">.</span><span class="nx">customers</span><span class="p">.</span><span class="nx">bankaccounts</span><span class="p">.</span><span class="k">delete</span><span class="p">(</span><span class="s1">'a9pvykxz4g5rg0fplze0'</span><span class="p">,</span><span class="s1">'buyj4apkwilpp2jfxr9r'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">error</span><span class="p">){</span>
  <span class="c1">// ...
</span><span class="p">});</span>
</pre><pre class="highlight ruby"><span class="vi">@openpay</span><span class="o">=</span><span class="no">OpenpayApi</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="s2">"mzdtln0bmtms6o3kck8f"</span><span class="p">,</span><span class="s2">"sk_e568c42a6c384b7ab02cd47d2e407cab"</span><span class="p">)</span>
<span class="vi">@bank_accounts</span><span class="o">=</span><span class="vi">@openpay</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span><span class="ss">:bankaccounts</span><span class="p">)</span>

<span class="n">response_hash</span><span class="o">=</span><span class="vi">@bank_accounts</span><span class="p">.</span><span class="nf">delete</span><span class="p">(</span><span class="s2">"asynwirguzkgq2bizogo"</span><span class="p">,</span> <span class="s2">"buyj4apkwilpp2jfxr9r"</span><span class="p">)</span>
</pre>
<p>Elimina la cuenta bancaria asociada al cliente. Las transacciones que se encuentran asociadas a esta cuenta no sufren cambios y se podrán seguir consultando.</p>

<h3 id="petición">Petición</h3>

<table><thead>
<tr>
<th>Propiedad</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td><strong><em>string</em></strong> (requerido, longitud = 45) <br/> Identificador único de la cuenta bancaria.</td>
</tr>
</tbody></table>

<h3 id="respuesta">Respuesta</h3>

<p>Si la cuenta bancaria se borra correctamente la respuesta es vacía, si no se puede borrar se regresa un <a href="#objeto-error">objeto error</a> indicando el motivo. </p>

<h2 id="listado-de-cuentas-bancarias">Listado de cuentas bancarias</h2>

<blockquote>
<p>Definición</p>
</blockquote>
<pre class="highlight shell">GET https://sandbox-api.openpay.mx/v1/<span class="o">{</span>MERCHANT_ID<span class="o">}</span>/customers/<span class="o">{</span>CUSTOMER_ID<span class="o">}</span>/bankaccounts
</pre><pre class="highlight php"><span class="cp">&lt;?</span>
<span class="nv">$customer</span> <span class="o">=</span> <span class="nv">$openpay</span><span class="o">-&gt;</span><span class="na">customers</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="nx">customerId</span><span class="p">);</span>
<span class="nv">$bankaccountList</span> <span class="o">=</span> <span class="nv">$customer</span><span class="o">-&gt;</span><span class="na">bankaccounts</span><span class="o">-&gt;</span><span class="na">getList</span><span class="p">(</span><span class="nx">findDataRequest</span><span class="p">);</span>
<span class="cp">?&gt;</span>
</pre><pre class="highlight java"><span class="c1">//Cliente</span>
<span class="n">openpayAPI</span><span class="o">.</span><span class="na">bankAccounts</span><span class="o">().</span><span class="na">list</span><span class="o">(</span><span class="n">String</span> <span class="n">customerId</span><span class="o">,</span> <span class="n">SearchParams</span> <span class="n">request</span><span class="o">);</span>
</pre><pre class="highlight csharp"><span class="c1">//Cliente
</span><span class="n">openpayAPI</span><span class="p">.</span><span class="n">BankAccountService</span><span class="p">.</span><span class="nf">List</span><span class="p">(</span><span class="kt">string</span> <span class="n">customer_id</span><span class="p">,</span> <span class="n">SearchParams</span> <span class="n">request</span> <span class="p">=</span> <span class="k">null</span><span class="p">);</span>
</pre><pre class="highlight javascript"><span class="nx">openpay</span><span class="p">.</span><span class="nx">customers</span><span class="p">.</span><span class="nx">bankaccounts</span><span class="p">.</span><span class="nx">list</span><span class="p">(</span><span class="nx">customerId</span><span class="p">,</span> <span class="nx">callback</span><span class="p">);</span>
<span class="nx">openpay</span><span class="p">.</span><span class="nx">customers</span><span class="p">.</span><span class="nx">bankaccounts</span><span class="p">.</span><span class="nx">list</span><span class="p">(</span><span class="nx">customerId</span><span class="p">,</span> <span class="nx">searchParams</span><span class="p">,</span> <span class="nx">callback</span><span class="p">);</span>
</pre><pre class="highlight ruby"><span class="c1">#Cliente</span>
<span class="vi">@bank_accounts</span><span class="o">=</span><span class="vi">@openpay</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span><span class="ss">:bankaccounts</span><span class="p">)</span>
<span class="vi">@bank_accounts</span><span class="p">.</span><span class="nf">all</span><span class="p">(</span><span class="n">customer_id</span><span class="p">)</span>
</pre>
<blockquote>
<p>Ejemplo de petición con cliente</p>
</blockquote>
<pre class="highlight shell">curl -g <span class="s2">"https://sandbox-api.openpay.mx/v1/mzdtln0bmtms6o3kck8f/customers/ag4nktpdzebjiye1tlze/bankaccounts?limit=2"</span> <span class="se">\</span>
   -u sk_e568c42a6c384b7ab02cd47d2e407cab: 
</pre><pre class="highlight php"><span class="cp">&lt;?</span>
<span class="nv">$openpay</span> <span class="o">=</span> <span class="nx">Openpay</span><span class="o">::</span><span class="na">getInstance</span><span class="p">(</span><span class="s1">'moiep6umtcnanql3jrxp'</span><span class="p">,</span> <span class="s1">'sk_3433941e467c1055b178ce26348b0fac'</span><span class="p">);</span>

<span class="nv">$findDataRequest</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">'creation[gte]'</span> <span class="o">=&gt;</span> <span class="s1">'2013-01-01'</span><span class="p">,</span>
    <span class="s1">'creation[lte]'</span> <span class="o">=&gt;</span> <span class="s1">'2013-12-31'</span><span class="p">,</span>
    <span class="s1">'offset'</span> <span class="o">=&gt;</span> <span class="mi">0</span><span class="p">,</span>
    <span class="s1">'limit'</span> <span class="o">=&gt;</span> <span class="mi">5</span><span class="p">);</span>

<span class="nv">$customer</span> <span class="o">=</span> <span class="nv">$openpay</span><span class="o">-&gt;</span><span class="na">customers</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">'a9ualumwnrcxkl42l6mh'</span><span class="p">);</span>
<span class="nv">$bankaccountList</span> <span class="o">=</span> <span class="nv">$customer</span><span class="o">-&gt;</span><span class="na">bankaccounts</span><span class="o">-&gt;</span><span class="na">getList</span><span class="p">(</span><span class="nv">$findDataRequest</span><span class="p">);</span>
<span class="cp">?&gt;</span>
</pre><pre class="highlight java"><span class="kd">final</span> <span class="n">Calendar</span> <span class="n">dateGte</span> <span class="o">=</span> <span class="n">Calendar</span><span class="o">.</span><span class="na">getInstance</span><span class="o">();</span>
<span class="kd">final</span> <span class="n">Calendar</span> <span class="n">dateLte</span> <span class="o">=</span> <span class="n">Calendar</span><span class="o">.</span><span class="na">getInstance</span><span class="o">();</span>
<span class="n">dateGte</span><span class="o">.</span><span class="na">set</span><span class="o">(</span><span class="mi">2014</span><span class="o">,</span> <span class="mi">5</span><span class="o">,</span> <span class="mi">1</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span> <span class="mi">0</span><span class="o">);</span>
<span class="n">dateLte</span><span class="o">.</span><span class="na">set</span><span class="o">(</span><span class="mi">2014</span><span class="o">,</span> <span class="mi">5</span><span class="o">,</span> <span class="mi">15</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span> <span class="mi">0</span><span class="o">);</span>

<span class="n">OpenpayAPI</span> <span class="n">api</span> <span class="o">=</span> <span class="k">new</span> <span class="n">OpenpayAPI</span><span class="o">(</span><span class="s">"https://sandbox-api.openpay.mx"</span><span class="o">,</span> <span class="s">"sk_b05586ec98454522ac7d4ccdcaec9128"</span><span class="o">,</span> <span class="s">"maonhzpqm8xp2ydssovf"</span><span class="o">);</span>
<span class="n">SearchParams</span> <span class="n">request</span> <span class="o">=</span> <span class="k">new</span> <span class="n">SearchParams</span><span class="o">();</span>
<span class="n">request</span><span class="o">.</span><span class="na">creationGte</span><span class="o">(</span><span class="n">dateGte</span><span class="o">.</span><span class="na">getTime</span><span class="o">());</span>
<span class="n">request</span><span class="o">.</span><span class="na">creationLte</span><span class="o">(</span><span class="n">dateLte</span><span class="o">.</span><span class="na">getTime</span><span class="o">());</span>
<span class="n">request</span><span class="o">.</span><span class="na">offset</span><span class="o">(</span><span class="mi">0</span><span class="o">);</span>
<span class="n">request</span><span class="o">.</span><span class="na">limit</span><span class="o">(</span><span class="mi">100</span><span class="o">);</span>

<span class="n">List</span><span class="o">&lt;</span><span class="n">BankAccount</span><span class="o">&gt;</span> <span class="n">bankAccounts</span> <span class="o">=</span> <span class="n">api</span><span class="o">.</span><span class="na">bankAccounts</span><span class="o">().</span><span class="na">list</span><span class="o">(</span><span class="s">"a9pvykxz4g5rg0fplze0"</span><span class="o">,</span> <span class="n">request</span><span class="o">);</span>
</pre><pre class="highlight csharp"><span class="n">OpenpayAPI</span> <span class="n">api</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">OpenpayAPI</span><span class="p">(</span><span class="s">"sk_b05586ec98454522ac7d4ccdcaec9128"</span><span class="p">,</span> <span class="s">"maonhzpqm8xp2ydssovf"</span><span class="p">);</span>
<span class="n">SearchParams</span> <span class="n">request</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">SearchParams</span><span class="p">();</span>
<span class="n">request</span><span class="p">.</span><span class="n">CreationGte</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">Datetime</span><span class="p">(</span><span class="m">2014</span><span class="p">,</span> <span class="m">5</span><span class="p">,</span> <span class="m">1</span><span class="p">);</span>
<span class="n">request</span><span class="p">.</span><span class="n">CreationLte</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">DateTime</span><span class="p">(</span><span class="m">2014</span><span class="p">,</span> <span class="m">5</span><span class="p">,</span> <span class="m">15</span><span class="p">);</span>
<span class="n">request</span><span class="p">.</span><span class="n">Offset</span> <span class="p">=</span> <span class="m">0</span><span class="p">;</span>
<span class="n">request</span><span class="p">.</span><span class="n">Limit</span> <span class="p">=</span> <span class="m">100</span><span class="p">;</span>

<span class="n">List</span><span class="p">&lt;</span><span class="n">BankAccount</span><span class="p">&gt;</span> <span class="n">banckAccounts</span> <span class="p">=</span> <span class="n">api</span><span class="p">.</span><span class="n">BankAccountService</span><span class="p">.</span><span class="nf">List</span><span class="p">(</span><span class="s">"a9pvykxz4g5rg0fplze0"</span><span class="p">,</span> <span class="n">request</span><span class="p">);</span>
</pre><pre class="highlight javascript"><span class="kd">var</span> <span class="nx">searchParams</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s1">'limit'</span> <span class="err">:</span> <span class="mi">2</span>
<span class="p">};</span>

<span class="nx">openpay</span><span class="p">.</span><span class="nx">customers</span><span class="p">.</span><span class="nx">bankaccounts</span><span class="p">.</span><span class="nx">list</span><span class="p">(</span><span class="s1">'ag4nktpdzebjiye1tlze'</span><span class="p">,</span> <span class="nx">searchParams</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">list</span><span class="p">){</span>
  <span class="c1">// ...
</span><span class="p">});</span>
</pre><pre class="highlight ruby"><span class="vi">@openpay</span><span class="o">=</span><span class="no">OpenpayApi</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="s2">"mzdtln0bmtms6o3kck8f"</span><span class="p">,</span><span class="s2">"sk_e568c42a6c384b7ab02cd47d2e407cab"</span><span class="p">)</span>
<span class="vi">@bank_accounts</span><span class="o">=</span><span class="vi">@openpay</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span><span class="ss">:bankaccounts</span><span class="p">)</span>

<span class="n">response_hash</span><span class="o">=</span><span class="vi">@bank_accounts</span><span class="p">.</span><span class="nf">all</span><span class="p">(</span><span class="s2">"asynwirguzkgq2bizogo"</span><span class="p">)</span>
</pre>
<blockquote>
<p>Ejemplo de respuesta</p>
</blockquote>
<pre class="highlight json"><span class="p">[{</span><span class="w">
   </span><span class="s2">"id"</span><span class="p">:</span><span class="s2">"brppwl9nwmruogk2do0j"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"clabe"</span><span class="p">:</span><span class="s2">"032180000118359719"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"bank_code"</span><span class="p">:</span><span class="s2">"032"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"bank_name"</span><span class="p">:</span><span class="s2">"IXE"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"alias"</span><span class="p">:</span><span class="err">null</span><span class="p">,</span><span class="w">
   </span><span class="s2">"holder_name"</span><span class="p">:</span><span class="s2">"Juan Hernández Sánchez"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"creation_date"</span><span class="p">:</span><span class="s2">"2013-11-14T12:29:18-06:00"</span><span class="w">
</span><span class="p">},</span><span class="w">
</span><span class="p">{</span><span class="w">
   </span><span class="s2">"id"</span><span class="p">:</span><span class="s2">"bb0zt72rxoyiwz9jzzai"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"clabe"</span><span class="p">:</span><span class="s2">"012680012426485980"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"bank_code"</span><span class="p">:</span><span class="s2">"012"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"bank_name"</span><span class="p">:</span><span class="s2">"BANCOMER"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"alias"</span><span class="p">:</span><span class="err">null</span><span class="p">,</span><span class="w">
   </span><span class="s2">"holder_name"</span><span class="p">:</span><span class="s2">"Juan Hernández Sánchez"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"creation_date"</span><span class="p">:</span><span class="s2">"2013-11-14T18:07:45-06:00"</span><span class="w">
</span><span class="p">}]</span><span class="w">
</span></pre>
<p>Regresa los detalles de todas las cuentas bancarias del cliente especificado en la petición. </p>

<h3 id="petición">Petición</h3>

<p>Puede realizar una búsqueda utilizando los siguiente parámetros como filtros.</p>

<table><thead>
<tr>
<th>Propiedad</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>creation</td>
<td><strong><em>date</em></strong> <br/>Igual a la fecha de creación. Formato yyyy-mm-dd</td>
</tr>
<tr>
<td>creation[gte]</td>
<td><strong><em>date</em></strong> <br/>Mayor a la fecha de creación. Formato yyyy-mm-dd</td>
</tr>
<tr>
<td>creation[lte]</td>
<td><strong><em>date</em></strong> <br/>Menor a la fecha de creación. Formato yyyy-mm-dd</td>
</tr>
<tr>
<td>offset</td>
<td><strong><em>numeric</em></strong> <br/>Número de registros a omitir al inicio, por defecto 0.</td>
</tr>
<tr>
<td>limit</td>
<td><strong><em>numeric</em></strong> <br/>Número de registros que se requieren, por defecto 10.</td>
</tr>
</tbody></table>

<h3 id="respuesta">Respuesta</h3>

<p>Listado de <a href="#objeto-cuenta-bancaria">objetos cuenta bancaria</a> registrados de acuerdo a los parámetros proporcionados, ordenadas por fecha de creación en orden descendente.</p>

<h1 id="planes">Planes</h1>

<p>Los planes son recursos en Openpay que permiten crear plantillas para las suscripciones. Con ellos podrás definir la cantidad y frecuencia con la que se realizarán los cargos recurrentes. </p>

<h2 id="objeto-plan">Objeto Plan</h2>

<blockquote>
<p>Ejemplo de objeto </p>
</blockquote>
<pre class="highlight json"><span class="p">{</span><span class="w">
    </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Curso de ingles"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"active"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">150</span><span class="p">,</span><span class="w">
    </span><span class="s2">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MXN"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"patpflacwilazguj6bem"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"creation_date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2013-12-13T09:43:52-06:00"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"repeat_every"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="s2">"repeat_unit"</span><span class="p">:</span><span class="w"> </span><span class="s2">"month"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"retry_times"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
    </span><span class="s2">"status_after_retry"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cancelled"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"trial_days"</span><span class="p">:</span><span class="w"> </span><span class="mi">30</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></pre>
<table><thead>
<tr>
<th>Propiedad</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td><strong><em>string</em></strong> <br/> Identificador único del Plan.</td>
</tr>
<tr>
<td>creation_date</td>
<td><strong><em>datetime</em></strong> <br/> Fecha y hora en que se creó el Plan  en formato ISO 8601</td>
</tr>
<tr>
<td>name</td>
<td><strong><em>string</em></strong> <br/> Nombre del Plan.</td>
</tr>
<tr>
<td>amount</td>
<td><strong><em>numeric</em></strong> <br/> Monto que se aplicara cada vez que se cobre la suscripción. Debe ser una cantidad mayor a cero, con hasta 2 dígitos decimales.</td>
</tr>
<tr>
<td>currency</td>
<td><strong><em>string</em></strong> <br/> Moneda usada en la operación, por default es MXN</td>
</tr>
<tr>
<td>repeat_every</td>
<td><strong><em>numeric</em></strong> <br/> Número de unidades tiempo entre los que se cobrara la suscripción. Por ejemplo, repeat_unit=month y repeat_every=2 indica que se cobrara cada 2 meses.</td>
</tr>
<tr>
<td>repeat_unit</td>
<td><strong><em>string</em></strong> <br/> Especifica la frecuencia de cobro. Puede ser semanal(week), mensual(month) o anual(year).</td>
</tr>
<tr>
<td>retry_times</td>
<td><strong><em>numeric</em></strong> <br/>  Numero de reintentos de cobro de la suscripción. Cuando se agotan los intentos se pone en el estatus determinado por el campo status_after_retry.</td>
</tr>
<tr>
<td>status</td>
<td><strong><em>string</em></strong> <br/> Estatus del Plan puede ser active o deleted. Si el plan se encuentra en estado deleted no se permite registrar nuevas suscripciones, pero las que ya están registradas, se siguen cobrando.</td>
</tr>
<tr>
<td>status_after_retry</td>
<td><strong><em>string</em></strong> <br/> Este campo especifica el status en el que se pondrá la suscripción una vez que se agotaron los intentos. Puede ser: unpaid o cancelled</td>
</tr>
<tr>
<td>trial_days</td>
<td><strong><em>numeric</em></strong> <br/> Numero de días de prueba por defecto que tendrá la suscripción.</td>
</tr>
</tbody></table>

<h2 id="crear-un-nuevo-plan">Crear un nuevo plan</h2>

<blockquote>
<p>Definición</p>
</blockquote>
<pre class="highlight shell">POST https://sandbox-api.openpay.mx/v1/<span class="o">{</span>MERCHANT_ID<span class="o">}</span>/plans
</pre><pre class="highlight php"><span class="cp">&lt;?</span>
<span class="nv">$plan</span> <span class="o">=</span> <span class="nv">$openpay</span><span class="o">-&gt;</span><span class="na">plans</span><span class="o">-&gt;</span><span class="na">add</span><span class="p">(</span><span class="nx">planDataRequest</span><span class="p">);</span>
<span class="cp">?&gt;</span>
</pre><pre class="highlight java"><span class="n">openpayAPI</span><span class="o">.</span><span class="na">plans</span><span class="o">().</span><span class="na">create</span><span class="o">(</span><span class="n">Plan</span> <span class="n">request</span><span class="o">);</span>
</pre><pre class="highlight csharp"><span class="n">openpayAPI</span><span class="p">.</span><span class="n">PlanService</span><span class="p">.</span><span class="nf">Create</span><span class="p">(</span><span class="n">Plan</span> <span class="n">plan</span><span class="p">);</span>
</pre><pre class="highlight javascript"><span class="nx">openpay</span><span class="p">.</span><span class="nx">plans</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="nx">planRequest</span><span class="p">,</span> <span class="nx">callback</span><span class="p">);</span>
</pre><pre class="highlight ruby"><span class="c1">#Cliente</span>
<span class="vi">@plans</span><span class="o">=</span><span class="vi">@openpay</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span><span class="ss">:plans</span><span class="p">)</span>
<span class="vi">@plans</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span><span class="n">request_hash</span><span class="p">)</span>
</pre>
<blockquote>
<p>Ejemplo de petición </p>
</blockquote>
<pre class="highlight shell">curl https://sandbox-api.openpay.mx/v1/mzdtln0bmtms6o3kck8f/plans <span class="se">\</span>
   -u sk_e568c42a6c384b7ab02cd47d2e407cab: <span class="se">\</span>
   -H <span class="s2">"Content-type: application/json"</span> <span class="se">\</span>
   -X POST -d <span class="s1">'{
  "amount": 150.00,
  "status_after_retry": "cancelled",
  "retry_times": 2,
  "name": "Curso de ingles",
  "repeat_unit": "month",
  "trial_days": "30",
  "repeat_every": "1"
}'</span> 
</pre><pre class="highlight php"><span class="cp">&lt;?</span>
<span class="nv">$openpay</span> <span class="o">=</span> <span class="nx">Openpay</span><span class="o">::</span><span class="na">getInstance</span><span class="p">(</span><span class="s1">'moiep6umtcnanql3jrxp'</span><span class="p">,</span> <span class="s1">'sk_3433941e467c1055b178ce26348b0fac'</span><span class="p">);</span>

<span class="nv">$planDataRequest</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">'amount'</span> <span class="o">=&gt;</span> <span class="mf">150.00</span><span class="p">,</span>
    <span class="s1">'status_after_retry'</span> <span class="o">=&gt;</span> <span class="s1">'cancelled'</span><span class="p">,</span>
    <span class="s1">'retry_times'</span> <span class="o">=&gt;</span> <span class="mi">2</span><span class="p">,</span>
    <span class="s1">'name'</span> <span class="o">=&gt;</span> <span class="s1">'Plan Curso Verano'</span><span class="p">,</span>
    <span class="s1">'repeat_unit'</span> <span class="o">=&gt;</span> <span class="s1">'month'</span><span class="p">,</span>
    <span class="s1">'trial_days'</span> <span class="o">=&gt;</span> <span class="s1">'30'</span><span class="p">,</span>
    <span class="s1">'repeat_every'</span> <span class="o">=&gt;</span> <span class="s1">'1'</span><span class="p">,</span>
    <span class="s1">'currency'</span> <span class="o">=&gt;</span> <span class="s1">'MXN'</span><span class="p">);</span>

<span class="nv">$plan</span> <span class="o">=</span> <span class="nv">$openpay</span><span class="o">-&gt;</span><span class="na">plans</span><span class="o">-&gt;</span><span class="na">add</span><span class="p">(</span><span class="nv">$planDataRequest</span><span class="p">);</span>
<span class="cp">?&gt;</span>
</pre><pre class="highlight java"><span class="n">OpenpayAPI</span> <span class="n">api</span> <span class="o">=</span> <span class="k">new</span> <span class="n">OpenpayAPI</span><span class="o">(</span><span class="s">"https://sandbox-api.openpay.mx"</span><span class="o">,</span> <span class="s">"sk_b05586ec98454522ac7d4ccdcaec9128"</span><span class="o">,</span> <span class="s">"maonhzpqm8xp2ydssovf"</span><span class="o">);</span>
<span class="n">Plan</span> <span class="n">request</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Plan</span><span class="o">();</span>
<span class="n">request</span><span class="o">.</span><span class="na">name</span><span class="o">(</span><span class="s">"Curso de ingles"</span><span class="o">);</span>
<span class="n">request</span><span class="o">.</span><span class="na">amount</span><span class="o">(</span><span class="k">new</span> <span class="n">BigDecimal</span><span class="o">(</span><span class="s">"100.00"</span><span class="o">));</span>
<span class="n">request</span><span class="o">.</span><span class="na">repeatEvery</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="n">PlanRepeatUnit</span><span class="o">.</span><span class="na">WEEK</span><span class="o">);</span>
<span class="n">request</span><span class="o">.</span><span class="na">retryTimes</span><span class="o">(</span><span class="mi">3</span><span class="o">);</span>
<span class="n">request</span><span class="o">.</span><span class="na">statusAfterRetry</span><span class="o">(</span><span class="n">PlanStatusAfterRetry</span><span class="o">.</span><span class="na">UNPAID</span><span class="o">);</span>
<span class="n">request</span><span class="o">.</span><span class="na">trialDays</span><span class="o">(</span><span class="mi">30</span><span class="o">);</span>

<span class="n">request</span> <span class="o">=</span> <span class="n">api</span><span class="o">.</span><span class="na">plans</span><span class="o">().</span><span class="na">create</span><span class="o">(</span><span class="n">request</span><span class="o">);</span>
</pre><pre class="highlight csharp"><span class="n">OpenpayAPI</span> <span class="n">api</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">OpenpayAPI</span><span class="p">(</span><span class="s">"sk_b05586ec98454522ac7d4ccdcaec9128"</span><span class="p">,</span> <span class="s">"maonhzpqm8xp2ydssovf"</span><span class="p">);</span>
<span class="n">Plan</span> <span class="n">request</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">Plan</span><span class="p">();</span>
<span class="n">request</span><span class="p">.</span><span class="n">Name</span> <span class="p">=</span> <span class="s">"Curso de ingles"</span><span class="p">;</span>
<span class="n">request</span><span class="p">.</span><span class="n">Amount</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">Decimal</span><span class="p">(</span><span class="m">100.00</span><span class="p">);</span>
<span class="n">request</span><span class="p">.</span><span class="n">RepeatEvery</span> <span class="p">=</span> <span class="m">1</span><span class="p">;</span>
<span class="n">request</span><span class="p">.</span><span class="n">RepeatUnit</span> <span class="p">=</span> <span class="s">"week"</span><span class="p">;</span>
<span class="n">request</span><span class="p">.</span><span class="n">RetryTimes</span> <span class="p">=</span> <span class="m">2</span><span class="p">;</span>
<span class="n">request</span><span class="p">.</span><span class="n">StatusAfterRetry</span> <span class="p">=</span> <span class="s">"unpaid"</span><span class="p">;</span>
<span class="n">request</span><span class="p">.</span><span class="n">TrialDays</span> <span class="p">=</span> <span class="m">30</span><span class="p">;</span>

<span class="n">request</span> <span class="p">=</span> <span class="n">api</span><span class="p">.</span><span class="n">PlanService</span><span class="p">.</span><span class="nf">Create</span><span class="p">(</span><span class="n">request</span><span class="p">);</span>
</pre><pre class="highlight javascript"><span class="kd">var</span> <span class="nx">planRequest</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s1">'amount'</span><span class="err">:</span> <span class="mf">150.00</span><span class="p">,</span>
  <span class="s1">'status_after_retry'</span><span class="err">:</span> <span class="s1">'cancelled'</span><span class="p">,</span>
  <span class="s1">'retry_times'</span><span class="err">:</span> <span class="mi">2</span><span class="p">,</span>
  <span class="s1">'name'</span><span class="err">:</span> <span class="s1">'Curso de ingles'</span><span class="p">,</span>
  <span class="s1">'repeat_unit'</span><span class="err">:</span> <span class="s1">'month'</span><span class="p">,</span>
  <span class="s1">'trial_days'</span><span class="err">:</span> <span class="s1">'30'</span><span class="p">,</span>
  <span class="s1">'repeat_every'</span><span class="err">:</span> <span class="s1">'1'</span>
<span class="p">};</span>

<span class="nx">openpay</span><span class="p">.</span><span class="nx">plans</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="nx">planRequest</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">plan</span><span class="p">){</span>
  <span class="c1">// ...
</span><span class="p">});</span>
</pre><pre class="highlight ruby"><span class="vi">@openpay</span><span class="o">=</span><span class="no">OpenpayApi</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="s2">"mzdtln0bmtms6o3kck8f"</span><span class="p">,</span><span class="s2">"sk_e568c42a6c384b7ab02cd47d2e407cab"</span><span class="p">)</span>
<span class="vi">@plans</span><span class="o">=</span><span class="vi">@openpay</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span><span class="ss">:plans</span><span class="p">)</span>
<span class="n">request_hash</span><span class="o">=</span><span class="p">{</span>
     <span class="s2">"name"</span> <span class="o">=&gt;</span> <span class="s2">"Curso de ingles"</span><span class="p">,</span>
     <span class="s2">"amount"</span> <span class="o">=&gt;</span> <span class="mi">150</span><span class="o">.</span><span class="mo">00</span><span class="p">,</span>
     <span class="s2">"repeat_every"</span> <span class="o">=&gt;</span> <span class="s2">"1"</span><span class="p">,</span>
     <span class="s2">"repeat_unit"</span> <span class="o">=&gt;</span> <span class="s2">"month"</span><span class="p">,</span>
     <span class="s2">"retry_times"</span> <span class="o">=&gt;</span> <span class="mi">2</span><span class="p">,</span>
     <span class="s2">"status_after_retry"</span> <span class="o">=&gt;</span> <span class="s2">"cancelled"</span><span class="p">,</span>
     <span class="s2">"trial_days"</span> <span class="o">=&gt;</span> <span class="s2">"30"</span>
   <span class="p">}</span>

<span class="n">response_hash</span><span class="o">=</span><span class="vi">@plans</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span><span class="n">request_hash</span><span class="p">.</span><span class="nf">to_hash</span><span class="p">)</span>
</pre>
<blockquote>
<p>Ejemplo de respuesta</p>
</blockquote>
<pre class="highlight json"><span class="p">{</span><span class="w">
   </span><span class="s2">"id"</span><span class="p">:</span><span class="s2">"p8e6x3hafqqsbmnoevrt"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"name"</span><span class="p">:</span><span class="s2">"Curso de ingles"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"status"</span><span class="p">:</span><span class="s2">"active"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"amount"</span><span class="p">:</span><span class="mf">150.00</span><span class="p">,</span><span class="w">
   </span><span class="s2">"currency"</span><span class="p">:</span><span class="s2">"MXN"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"creation_date"</span><span class="p">:</span><span class="s2">"2014-05-22T12:29:31-05:00"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"repeat_every"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w">
   </span><span class="s2">"repeat_unit"</span><span class="p">:</span><span class="s2">"month"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"retry_times"</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span><span class="w">
   </span><span class="s2">"status_after_retry"</span><span class="p">:</span><span class="s2">"cancelled"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"trial_days"</span><span class="p">:</span><span class="mi">30</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></pre>
<p>Crea un nuevo plan al se podrán suscribir uno o varios clientes.</p>

<h3 id="petición">Petición</h3>

<table><thead>
<tr>
<th>Propiedad</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>name</td>
<td><strong><em>string</em></strong> (requerido, longitud = 255) <br/>Nombre del Plan.</td>
</tr>
<tr>
<td>amount</td>
<td><strong><em>numeric</em></strong> (requerido) <br/>Monto que se aplicara cada vez que se cobre la suscripción. Debe ser una cantidad mayor a cero, con hasta 2 dígitos decimales.</td>
</tr>
<tr>
<td>repeat_every</td>
<td><strong><em>numeric</em></strong> (requerido) <br/>Número de unidades tiempo entre los que se cobrara la suscripción. Por ejemplo, repeat_unit=month y repeat_every=2 indica que se cobrara cada 2 meses.</td>
</tr>
<tr>
<td>repeat_unit</td>
<td><strong><em>numeric</em></strong> (requerido) <br/>Especifica la frecuencia de cobro. Puede ser semanal(week), mensual(month) o anual(year).</td>
</tr>
<tr>
<td>retry_times</td>
<td><strong><em>numeric</em></strong> (opcional) <br/> Numero de reintentos de cobro de la suscripción. Cuando se agotan los intentos se pone en el estado determinado por el campo status_after_retry.</td>
</tr>
<tr>
<td>status_after_retry</td>
<td><strong><em>string</em></strong> (requerido, valores = &ldquo;UNPAID/CANCELLED&rdquo;) <br/>Este campo especifica el status en el que se pondrá la suscripción una vez que se agotaron los intentos. Puede ser: unpaid o cancelled</td>
</tr>
<tr>
<td>trial_days</td>
<td><strong><em>numeric</em></strong> (requerido) <br/>Numero de días de prueba por defecto que tendrán las suscripciones que se creen a partir del plan creado.</td>
</tr>
</tbody></table>

<h3 id="respuesta">Respuesta</h3>

<p>Regresa un <a href="#objeto-plan">objeto plan</a> creado o un error en caso de ocurrir algún problema.</p>

<h2 id="actualizar-un-plan-existente">Actualizar un plan existente</h2>

<blockquote>
<p>Definición</p>
</blockquote>
<pre class="highlight shell">PUT https://sandbox-api.openpay.mx/v1/<span class="o">{</span>MERCHANT_ID<span class="o">}</span>/plans/<span class="o">{</span>PLAN_ID<span class="o">}</span>
</pre><pre class="highlight php"><span class="cp">&lt;?</span>
<span class="nv">$plan</span> <span class="o">=</span> <span class="nv">$openpay</span><span class="o">-&gt;</span><span class="na">plans</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="nx">planId</span><span class="p">);</span>
<span class="nv">$plan</span><span class="o">-&gt;</span><span class="na">save</span><span class="p">();</span>
<span class="cp">?&gt;</span>
</pre><pre class="highlight java"><span class="n">openpayAPI</span><span class="o">.</span><span class="na">plans</span><span class="o">().</span><span class="na">update</span><span class="o">(</span><span class="n">Plan</span> <span class="n">request</span><span class="o">);</span>
</pre><pre class="highlight csharp"><span class="n">openpayAPI</span><span class="p">.</span><span class="n">PlanService</span><span class="p">.</span><span class="nf">Update</span><span class="p">(</span><span class="n">Plan</span> <span class="n">plan</span><span class="p">);</span>
</pre><pre class="highlight javascript"><span class="nx">openpay</span><span class="p">.</span><span class="nx">plans</span><span class="p">.</span><span class="nx">update</span><span class="p">(</span><span class="nx">planId</span><span class="p">,</span> <span class="nx">planRequest</span><span class="p">,</span> <span class="nx">callback</span><span class="p">);</span>
</pre><pre class="highlight ruby"><span class="c1">#Cliente</span>
<span class="vi">@plans</span><span class="o">=</span><span class="vi">@openpay</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span><span class="ss">:plans</span><span class="p">)</span>
<span class="vi">@plans</span><span class="p">.</span><span class="nf">update</span><span class="p">(</span><span class="n">request_hash</span><span class="p">,</span> <span class="n">plan_id</span><span class="p">)</span>
</pre>
<blockquote>
<p>Ejemplo de petición </p>
</blockquote>
<pre class="highlight shell">curl https://sandbox-api.openpay.mx/v1/mzdtln0bmtms6o3kck8f/plans/p8e6x3hafqqsbmnoevrt <span class="se">\</span>
   -u sk_e568c42a6c384b7ab02cd47d2e407cab: <span class="se">\</span>
   -H <span class="s2">"Content-type: application/json"</span> <span class="se">\</span>
   -X PUT -d <span class="s1">'{
      "name": "Curso de aleman",
      "trial_days": "60"
   }'</span> 
</pre><pre class="highlight php"><span class="cp">&lt;?</span>
<span class="nv">$openpay</span> <span class="o">=</span> <span class="nx">Openpay</span><span class="o">::</span><span class="na">getInstance</span><span class="p">(</span><span class="s1">'moiep6umtcnanql3jrxp'</span><span class="p">,</span> <span class="s1">'sk_3433941e467c1055b178ce26348b0fac'</span><span class="p">);</span>

<span class="nv">$plan</span> <span class="o">=</span> <span class="nv">$openpay</span><span class="o">-&gt;</span><span class="na">plans</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">'pduar9iitv4enjftuwyl'</span><span class="p">);</span>
<span class="nv">$plan</span><span class="o">-&gt;</span><span class="na">name</span> <span class="o">=</span> <span class="s1">'Plan Curso de Verano 2014'</span><span class="p">;</span>
<span class="nv">$plan</span><span class="o">-&gt;</span><span class="na">save</span><span class="p">();</span>
<span class="cp">?&gt;</span>
</pre><pre class="highlight java"><span class="n">OpenpayAPI</span> <span class="n">api</span> <span class="o">=</span> <span class="k">new</span> <span class="n">OpenpayAPI</span><span class="o">(</span><span class="s">"https://sandbox-api.openpay.mx"</span><span class="o">,</span> <span class="s">"sk_b05586ec98454522ac7d4ccdcaec9128"</span><span class="o">,</span> <span class="s">"maonhzpqm8xp2ydssovf"</span><span class="o">);</span>
<span class="n">Plan</span> <span class="n">request</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Plan</span><span class="o">();</span>
<span class="n">request</span><span class="o">.</span><span class="na">setId</span><span class="o">(</span><span class="s">"p8e6x3hafqqsbmnoevrt"</span><span class="o">);</span>
<span class="n">request</span><span class="o">.</span><span class="na">name</span><span class="o">(</span><span class="s">"Curso de ingles"</span><span class="o">);</span>
<span class="n">request</span><span class="o">.</span><span class="na">trialDays</span><span class="o">(</span><span class="mi">30</span><span class="o">);</span>

<span class="n">request</span> <span class="o">=</span> <span class="n">api</span><span class="o">.</span><span class="na">plans</span><span class="o">().</span><span class="na">update</span><span class="o">(</span><span class="n">request</span><span class="o">);</span>
</pre><pre class="highlight csharp"><span class="n">OpenpayAPI</span> <span class="n">api</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">OpenpayAPI</span><span class="p">(</span><span class="s">"sk_b05586ec98454522ac7d4ccdcaec9128"</span><span class="p">,</span> <span class="s">"maonhzpqm8xp2ydssovf"</span><span class="p">);</span>
<span class="n">Plan</span> <span class="n">request</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">Plan</span><span class="p">();</span>
<span class="n">request</span><span class="p">.</span><span class="n">Id</span> <span class="p">=</span> <span class="s">"p8e6x3hafqqsbmnoevrt"</span><span class="p">;</span>
<span class="n">request</span><span class="p">.</span><span class="n">Name</span> <span class="p">=</span> <span class="s">"Curso de ingles"</span><span class="p">;</span>
<span class="n">request</span><span class="p">.</span><span class="n">TrialDays</span> <span class="p">=</span> <span class="m">30</span><span class="p">;</span>

<span class="n">request</span> <span class="p">=</span> <span class="n">api</span><span class="p">.</span><span class="n">PlanService</span><span class="p">.</span><span class="nf">Update</span><span class="p">(</span><span class="n">request</span><span class="p">);</span>
</pre><pre class="highlight javascript"><span class="kd">var</span> <span class="nx">planRequest</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s1">'name'</span><span class="err">:</span> <span class="s1">'Curso de aleman'</span><span class="p">,</span>
  <span class="s1">'trial_days'</span><span class="err">:</span> <span class="mi">60</span>
<span class="p">};</span>

<span class="nx">openpay</span><span class="p">.</span><span class="nx">plans</span><span class="p">.</span><span class="nx">update</span><span class="p">(</span><span class="nx">planId</span><span class="p">,</span> <span class="nx">planRequest</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">plan</span><span class="p">){</span>
  <span class="c1">// ...
</span><span class="p">});</span>
</pre><pre class="highlight ruby"><span class="vi">@openpay</span><span class="o">=</span><span class="no">OpenpayApi</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="s2">"mzdtln0bmtms6o3kck8f"</span><span class="p">,</span><span class="s2">"sk_e568c42a6c384b7ab02cd47d2e407cab"</span><span class="p">)</span>
<span class="vi">@plans</span><span class="o">=</span><span class="vi">@openpay</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span><span class="ss">:plans</span><span class="p">)</span>
<span class="n">request_hash</span><span class="o">=</span><span class="p">{</span>
     <span class="s2">"name"</span> <span class="o">=&gt;</span> <span class="s2">"Curso de ingles"</span><span class="p">,</span>
     <span class="s2">"trial_days"</span> <span class="o">=&gt;</span> <span class="s2">"30"</span>
   <span class="p">}</span>

<span class="n">response_hash</span><span class="o">=</span><span class="vi">@plans</span><span class="p">.</span><span class="nf">update</span><span class="p">(</span><span class="n">request_hash</span><span class="p">.</span><span class="nf">to_hash</span><span class="p">,</span> <span class="s2">"p8e6x3hafqqsbmnoevrt"</span><span class="p">)</span>
</pre>
<blockquote>
<p>Ejemplo de respuesta</p>
</blockquote>
<pre class="highlight json"><span class="p">{</span><span class="w">
   </span><span class="s2">"id"</span><span class="p">:</span><span class="s2">"p8e6x3hafqqsbmnoevrt"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"name"</span><span class="p">:</span><span class="s2">"Curso de aleman"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"status"</span><span class="p">:</span><span class="s2">"active"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"amount"</span><span class="p">:</span><span class="mf">150.00</span><span class="p">,</span><span class="w">
   </span><span class="s2">"currency"</span><span class="p">:</span><span class="s2">"MXN"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"creation_date"</span><span class="p">:</span><span class="s2">"2014-05-22T12:29:31-05:00"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"repeat_every"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w">
   </span><span class="s2">"repeat_unit"</span><span class="p">:</span><span class="s2">"month"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"retry_times"</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span><span class="w">
   </span><span class="s2">"status_after_retry"</span><span class="p">:</span><span class="s2">"cancelled"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"trial_days"</span><span class="p">:</span><span class="mi">60</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></pre>
<p>Actualiza la información de un plan. Se requiere tener el id del plan y solo se puede actualizar cierta información.</p>

<h3 id="petición">Petición</h3>

<table><thead>
<tr>
<th>Propiedad</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>name</td>
<td><strong><em>string</em></strong> (opcional, longitud = 80) <br/>Nombre del Plan.</td>
</tr>
<tr>
<td>trial_days</td>
<td><strong><em>numeric</em></strong> (opcional) <br/>Numero de días de prueba por defecto que tendrán las suscripciones que se creen a partir del plan creado.</td>
</tr>
</tbody></table>

<h3 id="respuesta">Respuesta</h3>

<p>Regresa un <a href="#objeto-plan">objeto plan</a> con la información actualizada o una <a href="#objeto-error">respuesta de error</a> si ocurrió algún problema en la actualización.</p>

<h2 id="obtener-un-plan">Obtener un plan</h2>

<blockquote>
<p>Definición</p>
</blockquote>
<pre class="highlight shell">GET https://sandbox-api.openpay.mx/v1/<span class="o">{</span>MERCHANT_ID<span class="o">}</span>/plans/<span class="o">{</span>PLAN_ID<span class="o">}</span>
</pre><pre class="highlight php"><span class="cp">&lt;?</span>
<span class="nv">$plan</span> <span class="o">=</span> <span class="nv">$openpay</span><span class="o">-&gt;</span><span class="na">plans</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="nx">planId</span><span class="p">);</span>
<span class="cp">?&gt;</span>
</pre><pre class="highlight java"><span class="n">openpayAPI</span><span class="o">.</span><span class="na">plans</span><span class="o">().</span><span class="na">get</span><span class="o">(</span><span class="n">String</span> <span class="n">planId</span><span class="o">);</span>
</pre><pre class="highlight csharp"><span class="n">openpayAPI</span><span class="p">.</span><span class="n">PlanService</span><span class="p">.</span><span class="nf">Get</span><span class="p">(</span><span class="kt">string</span> <span class="n">plan_id</span><span class="p">);</span>
</pre><pre class="highlight javascript"><span class="nx">openpay</span><span class="p">.</span><span class="nx">plans</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="nx">planId</span><span class="p">,</span> <span class="nx">callback</span><span class="p">);</span>
</pre><pre class="highlight ruby"><span class="c1">#Cliente</span>
<span class="vi">@plans</span><span class="o">=</span><span class="vi">@openpay</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span><span class="ss">:plans</span><span class="p">)</span>
<span class="vi">@plans</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="n">plan_id</span><span class="p">)</span>
</pre>
<blockquote>
<p>Ejemplo de petición </p>
</blockquote>
<pre class="highlight shell">curl https://sandbox-api.openpay.mx/v1/mzdtln0bmtms6o3kck8f/plans/p8e6x3hafqqsbmnoevrt <span class="se">\</span>
   -u sk_e568c42a6c384b7ab02cd47d2e407cab:
</pre><pre class="highlight php"><span class="cp">&lt;?</span>
<span class="nv">$openpay</span> <span class="o">=</span> <span class="nx">Openpay</span><span class="o">::</span><span class="na">getInstance</span><span class="p">(</span><span class="s1">'moiep6umtcnanql3jrxp'</span><span class="p">,</span> <span class="s1">'sk_3433941e467c1055b178ce26348b0fac'</span><span class="p">);</span>

<span class="nv">$plan</span> <span class="o">=</span> <span class="nv">$openpay</span><span class="o">-&gt;</span><span class="na">plans</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">'pduar9iitv4enjftuwyl'</span><span class="p">);</span>
<span class="cp">?&gt;</span>
</pre><pre class="highlight java"><span class="n">OpenpayAPI</span> <span class="n">api</span> <span class="o">=</span> <span class="k">new</span> <span class="n">OpenpayAPI</span><span class="o">(</span><span class="s">"https://sandbox-api.openpay.mx"</span><span class="o">,</span> <span class="s">"sk_b05586ec98454522ac7d4ccdcaec9128"</span><span class="o">,</span> <span class="s">"maonhzpqm8xp2ydssovf"</span><span class="o">);</span>
<span class="n">Plan</span> <span class="n">plan</span> <span class="o">=</span> <span class="n">api</span><span class="o">.</span><span class="na">plans</span><span class="o">().</span><span class="na">get</span><span class="o">(</span><span class="s">"p8e6x3hafqqsbmnoevrt"</span><span class="o">);</span>
</pre><pre class="highlight csharp"><span class="n">OpenpayAPI</span> <span class="n">api</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">OpenpayAPI</span><span class="p">(</span><span class="s">"sk_b05586ec98454522ac7d4ccdcaec9128"</span><span class="p">,</span> <span class="s">"maonhzpqm8xp2ydssovf"</span><span class="p">);</span>
<span class="n">Plan</span> <span class="n">plan</span> <span class="p">=</span> <span class="n">api</span><span class="p">.</span><span class="n">PlanService</span><span class="p">.</span><span class="nf">Get</span><span class="p">(</span><span class="s">"p8e6x3hafqqsbmnoevrt"</span><span class="p">);</span>
</pre><pre class="highlight javascript"><span class="nx">openpay</span><span class="p">.</span><span class="nx">plans</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">'p8e6x3hafqqsbmnoevrt'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">plan</span><span class="p">){</span>
  <span class="c1">// ...
</span><span class="p">});</span>
</pre><pre class="highlight ruby"><span class="vi">@openpay</span><span class="o">=</span><span class="no">OpenpayApi</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="s2">"mzdtln0bmtms6o3kck8f"</span><span class="p">,</span><span class="s2">"sk_e568c42a6c384b7ab02cd47d2e407cab"</span><span class="p">)</span>
<span class="vi">@plans</span><span class="o">=</span><span class="vi">@openpay</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span><span class="ss">:plans</span><span class="p">)</span>

<span class="n">response_hash</span><span class="o">=</span><span class="vi">@plans</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="s2">"p8e6x3hafqqsbmnoevrt"</span><span class="p">)</span>
</pre>
<blockquote>
<p>Ejemplo de respuesta</p>
</blockquote>
<pre class="highlight json"><span class="p">{</span><span class="w">
   </span><span class="s2">"id"</span><span class="p">:</span><span class="s2">"p8e6x3hafqqsbmnoevrt"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"name"</span><span class="p">:</span><span class="s2">"Curso de aleman"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"status"</span><span class="p">:</span><span class="s2">"active"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"amount"</span><span class="p">:</span><span class="mf">150.00</span><span class="p">,</span><span class="w">
   </span><span class="s2">"currency"</span><span class="p">:</span><span class="s2">"MXN"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"creation_date"</span><span class="p">:</span><span class="s2">"2014-05-22T12:29:31-05:00"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"repeat_every"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w">
   </span><span class="s2">"repeat_unit"</span><span class="p">:</span><span class="s2">"month"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"retry_times"</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span><span class="w">
   </span><span class="s2">"status_after_retry"</span><span class="p">:</span><span class="s2">"cancelled"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"trial_days"</span><span class="p">:</span><span class="mi">60</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></pre>
<p>Obtiene los detalles de un plan.</p>

<h3 id="petición">Petición</h3>

<table><thead>
<tr>
<th>Propiedad</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td><strong><em>string</em></strong> (requerido, longitud = 45) <br/> Identificador del plan.</td>
</tr>
</tbody></table>

<h3 id="respuesta">Respuesta</h3>

<p>Regresa un <a href="#objeto-plan">objeto plan</a></p>

<h2 id="eliminar-un-plan">Eliminar un plan</h2>

<blockquote>
<p>Definición</p>
</blockquote>
<pre class="highlight shell">DELETE https://sandbox-api.openpay.mx/v1/<span class="o">{</span>MERCHANT_ID<span class="o">}</span>/plans/<span class="o">{</span>PLAN_ID<span class="o">}</span>
</pre><pre class="highlight php"><span class="cp">&lt;?</span>
<span class="nv">$customer</span> <span class="o">=</span> <span class="nv">$openpay</span><span class="o">-&gt;</span><span class="na">customers</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="nx">customerId</span><span class="p">);</span>
<span class="nv">$plan</span> <span class="o">=</span> <span class="nv">$openpay</span><span class="o">-&gt;</span><span class="na">plans</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="nx">planId</span><span class="p">);</span>
<span class="nv">$plan</span><span class="o">-&gt;</span><span class="na">delete</span><span class="p">();</span>
<span class="cp">?&gt;</span>
</pre><pre class="highlight java"><span class="n">openpayAPI</span><span class="o">.</span><span class="na">plans</span><span class="o">().</span><span class="na">delete</span><span class="o">(</span><span class="n">String</span> <span class="n">planId</span><span class="o">);</span>
</pre><pre class="highlight csharp"><span class="n">openpayAPI</span><span class="p">.</span><span class="n">PlanService</span><span class="p">.</span><span class="nf">Delete</span><span class="p">(</span><span class="kt">string</span> <span class="n">plan_id</span><span class="p">);</span>
</pre><pre class="highlight javascript"><span class="nx">openpay</span><span class="p">.</span><span class="nx">plans</span><span class="p">.</span><span class="k">delete</span><span class="p">(</span><span class="nx">planId</span><span class="p">,</span> <span class="nx">callback</span><span class="p">);</span>
</pre><pre class="highlight ruby"><span class="c1">#Cliente</span>
<span class="vi">@plans</span><span class="o">=</span><span class="vi">@openpay</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span><span class="ss">:plans</span><span class="p">)</span>
<span class="vi">@plans</span><span class="p">.</span><span class="nf">delete</span><span class="p">(</span><span class="n">plan_id</span><span class="p">)</span>
</pre>
<blockquote>
<p>Ejemplo de petición </p>
</blockquote>
<pre class="highlight shell">curl https://sandbox-api.openpay.mx/v1/mzdtln0bmtms6o3kck8f/plans/p8e6x3hafqqsbmnoevrt <span class="se">\</span>
   -u sk_e568c42a6c384b7ab02cd47d2e407cab: <span class="se">\</span>
   -X DELETE
</pre><pre class="highlight php"><span class="cp">&lt;?</span>
<span class="nv">$openpay</span> <span class="o">=</span> <span class="nx">Openpay</span><span class="o">::</span><span class="na">getInstance</span><span class="p">(</span><span class="s1">'moiep6umtcnanql3jrxp'</span><span class="p">,</span> <span class="s1">'sk_3433941e467c1055b178ce26348b0fac'</span><span class="p">);</span>

<span class="nv">$customer</span> <span class="o">=</span> <span class="nv">$openpay</span><span class="o">-&gt;</span><span class="na">customers</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">'a9ualumwnrcxkl42l6mh'</span><span class="p">);</span>
<span class="nv">$plan</span> <span class="o">=</span> <span class="nv">$openpay</span><span class="o">-&gt;</span><span class="na">plans</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">'pduar9iitv4enjftuwyl'</span><span class="p">);</span>
<span class="nv">$plan</span><span class="o">-&gt;</span><span class="na">delete</span><span class="p">();</span>
<span class="cp">?&gt;</span>
</pre><pre class="highlight java"><span class="n">OpenpayAPI</span> <span class="n">api</span> <span class="o">=</span> <span class="k">new</span> <span class="n">OpenpayAPI</span><span class="o">(</span><span class="s">"https://sandbox-api.openpay.mx"</span><span class="o">,</span> <span class="s">"sk_b05586ec98454522ac7d4ccdcaec9128"</span><span class="o">,</span> <span class="s">"maonhzpqm8xp2ydssovf"</span><span class="o">);</span>
<span class="n">api</span><span class="o">.</span><span class="na">plans</span><span class="o">().</span><span class="na">delete</span><span class="o">(</span><span class="s">"p8e6x3hafqqsbmnoevrt"</span><span class="o">);</span>
</pre><pre class="highlight csharp"><span class="n">OpenpayAPI</span> <span class="n">api</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">OpenpayAPI</span><span class="p">(</span><span class="s">"sk_b05586ec98454522ac7d4ccdcaec9128"</span><span class="p">,</span> <span class="s">"maonhzpqm8xp2ydssovf"</span><span class="p">);</span>
<span class="n">api</span><span class="p">.</span><span class="n">PlanService</span><span class="p">.</span><span class="nf">Delete</span><span class="p">(</span><span class="s">"p8e6x3hafqqsbmnoevrt"</span><span class="p">);</span>
</pre><pre class="highlight javascript"><span class="nx">openpay</span><span class="p">.</span><span class="nx">plans</span><span class="p">.</span><span class="k">delete</span><span class="p">(</span><span class="s1">'p8e6x3hafqqsbmnoevrt'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">error</span><span class="p">){</span>
  <span class="c1">// ...
</span><span class="p">});</span>
</pre><pre class="highlight ruby"><span class="vi">@openpay</span><span class="o">=</span><span class="no">OpenpayApi</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="s2">"mzdtln0bmtms6o3kck8f"</span><span class="p">,</span><span class="s2">"sk_e568c42a6c384b7ab02cd47d2e407cab"</span><span class="p">)</span>
<span class="vi">@plans</span><span class="o">=</span><span class="vi">@openpay</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span><span class="ss">:plans</span><span class="p">)</span>

<span class="n">response_hash</span><span class="o">=</span><span class="vi">@plans</span><span class="p">.</span><span class="nf">delete</span><span class="p">(</span><span class="s2">"p8e6x3hafqqsbmnoevrt"</span><span class="p">)</span>
</pre>
<p>Al eliminar un plan no se permitirán crear mas suscripciones asociadas a él, sin embargo las suscripciones ya asociadas se mantienen y se continuan cobrando.</p>

<h3 id="petición">Petición</h3>

<table><thead>
<tr>
<th>Propiedad</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td><strong><em>string</em></strong> (requerido, longitud = 45) <br/> Identificador del plan a eliminar</td>
</tr>
</tbody></table>

<h3 id="respuesta">Respuesta</h3>

<p>Si el plan se borra correctamente la respuesta es vacía, si no se puede borrar se regresa un <a href="#objeto-error">objeto error</a> indicando el motivo. </p>

<h2 id="listado-de-planes">Listado de planes</h2>

<blockquote>
<p>Definición</p>
</blockquote>
<pre class="highlight shell">GET https://sandbox-api.openpay.mx/v1/<span class="o">{</span>MERCHANT_ID<span class="o">}</span>/plans
</pre><pre class="highlight php"><span class="cp">&lt;?</span>
<span class="nv">$planList</span> <span class="o">=</span> <span class="nv">$openpay</span><span class="o">-&gt;</span><span class="na">plans</span><span class="o">-&gt;</span><span class="na">getList</span><span class="p">(</span><span class="nx">findDataRequest</span><span class="p">);</span>
<span class="cp">?&gt;</span>
</pre><pre class="highlight java"><span class="n">openpayAPI</span><span class="o">.</span><span class="na">plans</span><span class="o">().</span><span class="na">list</span><span class="o">(</span><span class="n">SearchParams</span> <span class="n">request</span><span class="o">);</span>
</pre><pre class="highlight csharp"><span class="n">openpayAPI</span><span class="p">.</span><span class="n">PlanService</span><span class="p">.</span><span class="nf">List</span><span class="p">(</span><span class="n">SearchParams</span> <span class="n">request</span> <span class="p">=</span> <span class="k">null</span><span class="p">);</span>
</pre><pre class="highlight javascript"><span class="nx">openpay</span><span class="p">.</span><span class="nx">plans</span><span class="p">.</span><span class="nx">list</span><span class="p">(</span><span class="nx">callback</span><span class="p">);</span>
<span class="nx">openpay</span><span class="p">.</span><span class="nx">plans</span><span class="p">.</span><span class="nx">list</span><span class="p">(</span><span class="nx">searchParams</span><span class="p">,</span> <span class="nx">callback</span><span class="p">);</span>
</pre><pre class="highlight ruby"><span class="c1">#Cliente</span>
<span class="vi">@plans</span><span class="o">=</span><span class="vi">@openpay</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span><span class="ss">:plans</span><span class="p">)</span>
<span class="vi">@plans</span><span class="p">.</span><span class="nf">all</span>
</pre>
<blockquote>
<p>Ejemplo de petición </p>
</blockquote>
<pre class="highlight shell">curl -g <span class="s2">"https://sandbox-api.openpay.mx/v1/mzdtln0bmtms6o3kck8f/plans?limit=10"</span> <span class="se">\</span>
   -u sk_e568c42a6c384b7ab02cd47d2e407cab: 
</pre><pre class="highlight php"><span class="cp">&lt;?</span>
<span class="nv">$openpay</span> <span class="o">=</span> <span class="nx">Openpay</span><span class="o">::</span><span class="na">getInstance</span><span class="p">(</span><span class="s1">'moiep6umtcnanql3jrxp'</span><span class="p">,</span> <span class="s1">'sk_3433941e467c1055b178ce26348b0fac'</span><span class="p">);</span>

<span class="nv">$findDataRequest</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">'creation[gte]'</span> <span class="o">=&gt;</span> <span class="s1">'2013-01-01'</span><span class="p">,</span>
    <span class="s1">'creation[lte]'</span> <span class="o">=&gt;</span> <span class="s1">'2013-12-31'</span><span class="p">,</span>
    <span class="s1">'offset'</span> <span class="o">=&gt;</span> <span class="mi">0</span><span class="p">,</span>
    <span class="s1">'limit'</span> <span class="o">=&gt;</span> <span class="mi">5</span><span class="p">);</span>

<span class="nv">$planList</span> <span class="o">=</span> <span class="nv">$openpay</span><span class="o">-&gt;</span><span class="na">plans</span><span class="o">-&gt;</span><span class="na">getList</span><span class="p">(</span><span class="nv">$findDataRequest</span><span class="p">);</span>
<span class="cp">?&gt;</span>
</pre><pre class="highlight java"><span class="kd">final</span> <span class="n">Calendar</span> <span class="n">dateGte</span> <span class="o">=</span> <span class="n">Calendar</span><span class="o">.</span><span class="na">getInstance</span><span class="o">();</span>
<span class="kd">final</span> <span class="n">Calendar</span> <span class="n">dateLte</span> <span class="o">=</span> <span class="n">Calendar</span><span class="o">.</span><span class="na">getInstance</span><span class="o">();</span>
<span class="n">dateGte</span><span class="o">.</span><span class="na">set</span><span class="o">(</span><span class="mi">2014</span><span class="o">,</span> <span class="mi">5</span><span class="o">,</span> <span class="mi">1</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span> <span class="mi">0</span><span class="o">);</span>
<span class="n">dateLte</span><span class="o">.</span><span class="na">set</span><span class="o">(</span><span class="mi">2014</span><span class="o">,</span> <span class="mi">5</span><span class="o">,</span> <span class="mi">15</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span> <span class="mi">0</span><span class="o">);</span>

<span class="n">OpenpayAPI</span> <span class="n">api</span> <span class="o">=</span> <span class="k">new</span> <span class="n">OpenpayAPI</span><span class="o">(</span><span class="s">"https://sandbox-api.openpay.mx"</span><span class="o">,</span> <span class="s">"sk_b05586ec98454522ac7d4ccdcaec9128"</span><span class="o">,</span> <span class="s">"maonhzpqm8xp2ydssovf"</span><span class="o">);</span>
<span class="n">SearchParams</span> <span class="n">request</span> <span class="o">=</span> <span class="k">new</span> <span class="n">SearchParams</span><span class="o">();</span>
<span class="n">request</span><span class="o">.</span><span class="na">creationGte</span><span class="o">(</span><span class="n">dateGte</span><span class="o">.</span><span class="na">getTime</span><span class="o">());</span>
<span class="n">request</span><span class="o">.</span><span class="na">creationLte</span><span class="o">(</span><span class="n">dateLte</span><span class="o">.</span><span class="na">getTime</span><span class="o">());</span>
<span class="n">request</span><span class="o">.</span><span class="na">offset</span><span class="o">(</span><span class="mi">0</span><span class="o">);</span>
<span class="n">request</span><span class="o">.</span><span class="na">limit</span><span class="o">(</span><span class="mi">100</span><span class="o">);</span>

<span class="n">List</span><span class="o">&lt;</span><span class="n">Plan</span><span class="o">&gt;</span> <span class="n">plans</span> <span class="o">=</span> <span class="n">api</span><span class="o">.</span><span class="na">plans</span><span class="o">().</span><span class="na">list</span><span class="o">(</span><span class="n">request</span><span class="o">);</span>
</pre><pre class="highlight csharp"><span class="n">OpenpayAPI</span> <span class="n">api</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">OpenpayAPI</span><span class="p">(</span><span class="s">"sk_b05586ec98454522ac7d4ccdcaec9128"</span><span class="p">,</span> <span class="s">"maonhzpqm8xp2ydssovf"</span><span class="p">);</span>
<span class="n">SearchParams</span> <span class="n">request</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">SearchParams</span><span class="p">();</span>
<span class="n">request</span><span class="p">.</span><span class="n">CreationGte</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">Datetime</span><span class="p">(</span><span class="m">2014</span><span class="p">,</span> <span class="m">5</span><span class="p">,</span> <span class="m">1</span><span class="p">);</span>
<span class="n">request</span><span class="p">.</span><span class="n">CreationLte</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">DateTime</span><span class="p">(</span><span class="m">2014</span><span class="p">,</span> <span class="m">5</span><span class="p">,</span> <span class="m">15</span><span class="p">);</span>
<span class="n">request</span><span class="p">.</span><span class="n">Offset</span> <span class="p">=</span> <span class="m">0</span><span class="p">;</span>
<span class="n">request</span><span class="p">.</span><span class="n">Limit</span> <span class="p">=</span> <span class="m">100</span><span class="p">;</span>

<span class="n">List</span><span class="p">&lt;</span><span class="n">Plan</span><span class="p">&gt;</span> <span class="n">plans</span> <span class="p">=</span> <span class="n">api</span><span class="p">.</span><span class="n">PlanService</span><span class="p">.</span><span class="nf">List</span><span class="p">(</span><span class="n">request</span><span class="p">);</span>
</pre><pre class="highlight javascript"><span class="kd">var</span> <span class="nx">searchParams</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s1">'limit'</span> <span class="err">:</span> <span class="mi">10</span>
<span class="p">};</span>

<span class="nx">openpay</span><span class="p">.</span><span class="nx">plans</span><span class="p">.</span><span class="nx">list</span><span class="p">(</span><span class="nx">searchParams</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">list</span><span class="p">){</span>
  <span class="c1">// ...
</span><span class="p">});</span>
</pre><pre class="highlight ruby"><span class="vi">@openpay</span><span class="o">=</span><span class="no">OpenpayApi</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="s2">"mzdtln0bmtms6o3kck8f"</span><span class="p">,</span><span class="s2">"sk_e568c42a6c384b7ab02cd47d2e407cab"</span><span class="p">)</span>
<span class="vi">@plans</span><span class="o">=</span><span class="vi">@openpay</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span><span class="ss">:plans</span><span class="p">)</span>

<span class="n">response_hash</span><span class="o">=</span><span class="vi">@plans</span><span class="p">.</span><span class="nf">all</span>
</pre>
<blockquote>
<p>Ejemplo de respuesta</p>
</blockquote>
<pre class="highlight json"><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
        </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Curso de aleman"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"active"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">150</span><span class="p">,</span><span class="w">
        </span><span class="s2">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MXN"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"patpflacwilazguj6bem"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"creation_date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2013-12-13T09:43:52-06:00"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"repeat_every"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="s2">"repeat_unit"</span><span class="p">:</span><span class="w"> </span><span class="s2">"month"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"retry_times"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
        </span><span class="s2">"status_after_retry"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cancelled"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"trial_days"</span><span class="p">:</span><span class="w"> </span><span class="mi">60</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
        </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Curso de ingles"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"active"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">150</span><span class="p">,</span><span class="w">
        </span><span class="s2">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MXN"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"pjl7wfryrrd1tznr0fnl"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"creation_date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2013-12-13T11:36:40-06:00"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"repeat_every"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="s2">"repeat_unit"</span><span class="p">:</span><span class="w"> </span><span class="s2">"month"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"retry_times"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
        </span><span class="s2">"status_after_retry"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cancelled"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"trial_days"</span><span class="p">:</span><span class="w"> </span><span class="mi">30</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></pre>
<p>Regresa los detalles de todos los planes que están activos.</p>

<h3 id="petición">Petición</h3>

<p>Se puede realizar búsquedas utilizando los siguiente parámetros.</p>

<table><thead>
<tr>
<th>Propiedad</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>creation</td>
<td><strong><em>date</em></strong> <br/>Igual a la fecha de creación. Formato yyyy-mm-dd</td>
</tr>
<tr>
<td>creation[gte]</td>
<td><strong><em>date</em></strong> <br/>Mayor a la fecha de creación. Formato yyyy-mm-dd</td>
</tr>
<tr>
<td>creation[lte]</td>
<td><strong><em>date</em></strong> <br/>Menor a la fecha de creación. Formato yyyy-mm-dd</td>
</tr>
<tr>
<td>offset</td>
<td><strong><em>numeric</em></strong> <br/>Número de registros a omitir al inicio, por defecto 0.</td>
</tr>
<tr>
<td>limit</td>
<td><strong><em>numeric</em></strong> <br/>Número de registros que se requieren, por defecto 10.</td>
</tr>
</tbody></table>

<h3 id="respuesta">Respuesta</h3>

<p>Listado de <a href="#objeto-plan">objetos plan</a> registrados de acuerdo a los parámetros proporcionados, ordenadas por fecha de creación en orden descendente.</p>

<h1 id="suscripciones">Suscripciones</h1>

<p>Las suscripciones permiten asociar un cliente y una tarjeta para que se pueden realizar cargos recurrentes.</p>

<p>Para poder suscribir algún cliente es necesario primero <a href="#crear-una-nuevo-plan">crear un plan</a>.</p>

<h2 id="objeto-suscripción">Objeto Suscripción</h2>

<blockquote>
<p>Ejemplo de objeto </p>
</blockquote>
<pre class="highlight json"><span class="p">{</span><span class="w">
    </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"trial"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"card"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"debit"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"brand"</span><span class="p">:</span><span class="w"> </span><span class="s2">"mastercard"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"card_number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1111"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"holder_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Juan Perez Ramirez"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"expiration_year"</span><span class="p">:</span><span class="w"> </span><span class="s2">"20"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"expiration_month"</span><span class="p">:</span><span class="w"> </span><span class="s2">"12"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"allows_charges"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
        </span><span class="s2">"allows_payouts"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="s2">"creation_date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2013-12-13T12:39:46-06:00"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"bank_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"DESCONOCIDO"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"customer_id"</span><span class="p">:</span><span class="w"> </span><span class="err">null</span><span class="p">,</span><span class="w">
        </span><span class="s2">"bank_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"000"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"svxdm1suclzipbi4pavm"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"cancel_at_period_end"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="s2">"charge_date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2014-01-12"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"creation_date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2013-12-13T12:39:46-06:00"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"current_period_number"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"period_end_date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2014-01-11"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"trial_end_date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2014-01-11"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"plan_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"pjl7wfryrrd1tznr0fnl"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"customer_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"a2b79p8xmzeyvmolqfja"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></pre>
<table><thead>
<tr>
<th>Propiedad</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td><strong><em>string</em></strong> <br/> Identificador único del Plan.</td>
</tr>
<tr>
<td>creation_date</td>
<td><strong><em>datetime</em></strong> <br/> Fecha y hora en que se creó la suscripción  en formato ISO 8601</td>
</tr>
<tr>
<td>cancel_at_period_end</td>
<td><strong><em>string</em></strong> <br/> Indica si se cancela la suscripción al terminar el periodo.</td>
</tr>
<tr>
<td>charge_date</td>
<td><strong><em>numeric</em></strong> <br/> Fecha en la que se cobrar la suscripción.</td>
</tr>
<tr>
<td>current_period_number</td>
<td><strong><em>string</em></strong> <br/> Indica el periodo actual a cobrar.</td>
</tr>
<tr>
<td>period_end_date</td>
<td><strong><em>numeric</em></strong> <br/> Fecha en la que se termina el periodo actual, un día antes del siguiente cobro.</td>
</tr>
<tr>
<td>trial_end_date</td>
<td><strong><em>string</em></strong> <br/> Fecha en la que termina el periodo de prueba. Un día después de esta fecha, se realiza el primer cargo.</td>
</tr>
<tr>
<td>plan_id</td>
<td><strong><em>numeric</em></strong> <br/>  Identificador del plan sobre el que se crea la suscripción.</td>
</tr>
<tr>
<td>status</td>
<td><strong><em>string</em></strong> <br/> Estado de la suscripción puede ser active, &ldquo;trial&rdquo;, &ldquo;past_due&rdquo;, &ldquo;unpaid&rdquo;, o &ldquo;cancelled&rdquo;. Si la suscripción tiene periodo de prueba, se pone en status &ldquo;trial&rdquo;, si no tiene periodo de prueba, o cuando termino el periodo de prueba y se logro efectuar el primer pago, se pone en &ldquo;active&rdquo;, cuando el cobro no logro efectuarse, se coloca en &ldquo;past_due&rdquo;, y cuando se agotan los intentos de cobro, se coloca de acuerdo a la configuración del plan, en &ldquo;unpaid&rdquo; o en &ldquo;cancelled&rdquo;. Cuando se coloca en &ldquo;unpaid&rdquo;, y se quiere reactivar la suscripción, es necesario actualizar el medio de pago (tarjeta) de la suscripción. En cualquier otro caso, el status se establece como &ldquo;cancelled&rdquo;.</td>
</tr>
<tr>
<td>customer_id</td>
<td><strong><em>string</em></strong> <br/> Identificador del customer al que pertenece la suscripción.</td>
</tr>
<tr>
<td>card</td>
<td><strong><em>object</em></strong> <br/> Medio de pago con el cual se cobrará la suscripción. Ver <a href="#objeto-tarjeta">objeto tarjeta</a></td>
</tr>
</tbody></table>

<h2 id="crear-una-nueva-suscripción">Crear una nueva suscripción</h2>

<blockquote>
<p>Definición</p>
</blockquote>
<pre class="highlight shell">POST https://sandbox-api.openpay.mx/v1/<span class="o">{</span>MERCHANT_ID<span class="o">}</span>/customers/<span class="o">{</span>CUSTOMER_ID<span class="o">}</span>/subscriptions
</pre><pre class="highlight php"><span class="cp">&lt;?</span>
<span class="nv">$customer</span> <span class="o">=</span> <span class="nv">$openpay</span><span class="o">-&gt;</span><span class="na">customers</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="nx">customerId</span><span class="p">);</span>
<span class="nv">$subscription</span> <span class="o">=</span> <span class="nv">$customer</span><span class="o">-&gt;</span><span class="na">subscriptions</span><span class="o">-&gt;</span><span class="na">add</span><span class="p">(</span><span class="nx">subscriptionDataRequest</span><span class="p">);</span>
<span class="cp">?&gt;</span>
</pre><pre class="highlight java"><span class="n">openpayAPI</span><span class="o">.</span><span class="na">subscriptions</span><span class="o">().</span><span class="na">create</span><span class="o">(</span><span class="n">String</span> <span class="n">customerId</span><span class="o">,</span> <span class="n">Subscription</span> <span class="n">request</span><span class="o">);</span>
</pre><pre class="highlight csharp"><span class="n">openpayAPI</span><span class="p">.</span><span class="n">SubscriptionService</span><span class="p">.</span><span class="nf">Create</span><span class="p">(</span><span class="kt">string</span> <span class="n">customer_id</span><span class="p">,</span> <span class="n">Subscription</span> <span class="n">request</span><span class="p">);</span>
</pre><pre class="highlight javascript"><span class="nx">openpay</span><span class="p">.</span><span class="nx">customers</span><span class="p">.</span><span class="nx">subscriptions</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="nx">customerId</span><span class="p">,</span> <span class="nx">subscriptionRequest</span><span class="p">,</span> <span class="nx">callback</span><span class="p">);</span>
</pre><pre class="highlight ruby"><span class="c1">#Cliente</span>
<span class="vi">@subscriptions</span><span class="o">=</span><span class="vi">@openpay</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span><span class="ss">:subscriptions</span><span class="p">)</span>
<span class="vi">@subscriptions</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span><span class="n">request_hash</span><span class="p">,</span> <span class="n">customer_id</span><span class="p">)</span>
</pre>
<blockquote>
<p>Ejemplo de petición </p>
</blockquote>
<pre class="highlight shell">curl https://sandbox-api.openpay.mx/v1/mzdtln0bmtms6o3kck8f/customers/ag4nktpdzebjiye1tlze/subscriptions <span class="se">\</span>
   -u sk_e568c42a6c384b7ab02cd47d2e407cab: <span class="se">\</span>
   -H <span class="s2">"Content-type: application/json"</span> <span class="se">\</span>
   -X POST -d <span class="s1">'{
   "card":{
      "card_number":"4111111111111111",
      "holder_name":"Juan Perez Ramirez",
      "expiration_year":"20",
      "expiration_month":"12",
      "cvv2":"110"
   },
   "plan_id":"pbi4kb8hpb64x0uud2eb"
}'</span> 
</pre><pre class="highlight php"><span class="cp">&lt;?</span>
<span class="nv">$openpay</span> <span class="o">=</span> <span class="nx">Openpay</span><span class="o">::</span><span class="na">getInstance</span><span class="p">(</span><span class="s1">'moiep6umtcnanql3jrxp'</span><span class="p">,</span> <span class="s1">'sk_3433941e467c1055b178ce26348b0fac'</span><span class="p">);</span>

<span class="nv">$subscriptionDataRequest</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s2">"trial_end_date"</span> <span class="o">=&gt;</span> <span class="s2">"2014-01-01"</span><span class="p">,</span> 
    <span class="s1">'plan_id'</span> <span class="o">=&gt;</span> <span class="s1">'pduar9iitv4enjftuwyl'</span><span class="p">,</span>
    <span class="s1">'card_id'</span> <span class="o">=&gt;</span> <span class="s1">'konvkvcd5ih8ta65umie'</span><span class="p">);</span>

<span class="nv">$customer</span> <span class="o">=</span> <span class="nv">$openpay</span><span class="o">-&gt;</span><span class="na">customers</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">'a9ualumwnrcxkl42l6mh'</span><span class="p">);</span>
<span class="nv">$subscription</span> <span class="o">=</span> <span class="nv">$customer</span><span class="o">-&gt;</span><span class="na">subscriptions</span><span class="o">-&gt;</span><span class="na">add</span><span class="p">(</span><span class="nv">$subscriptionDataRequest</span><span class="p">);</span>
<span class="cp">?&gt;</span>
</pre><pre class="highlight java"><span class="kd">final</span> <span class="n">Calendar</span> <span class="n">trialEndDate</span> <span class="o">=</span> <span class="n">Calendar</span><span class="o">.</span><span class="na">getInstance</span><span class="o">();</span>
<span class="n">trialEndDate</span><span class="o">.</span><span class="na">set</span><span class="o">(</span><span class="mi">2014</span><span class="o">,</span> <span class="mi">5</span><span class="o">,</span> <span class="mi">1</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span> <span class="mi">0</span><span class="o">);</span>

<span class="n">OpenpayAPI</span> <span class="n">api</span> <span class="o">=</span> <span class="k">new</span> <span class="n">OpenpayAPI</span><span class="o">(</span><span class="s">"https://sandbox-api.openpay.mx"</span><span class="o">,</span> <span class="s">"sk_b05586ec98454522ac7d4ccdcaec9128"</span><span class="o">,</span> <span class="s">"maonhzpqm8xp2ydssovf"</span><span class="o">);</span>
<span class="n">Subscription</span> <span class="n">request</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Subscription</span><span class="o">();</span>
<span class="n">request</span><span class="o">.</span><span class="na">planId</span><span class="o">(</span><span class="s">"idPlan-01001"</span><span class="o">);</span>
<span class="n">request</span><span class="o">.</span><span class="na">trialEndDate</span><span class="o">(</span><span class="n">trialEndDate</span><span class="o">.</span><span class="na">getTime</span><span class="o">());</span>
<span class="n">request</span><span class="o">.</span><span class="na">sourceId</span><span class="o">(</span><span class="s">"ktrpvymgatocelsciak7"</span><span class="o">);</span>

<span class="n">request</span> <span class="o">=</span> <span class="n">api</span><span class="o">.</span><span class="na">subscriptions</span><span class="o">().</span><span class="na">create</span><span class="o">(</span><span class="s">"a9pvykxz4g5rg0fplze0"</span><span class="o">,</span> <span class="n">request</span><span class="o">);</span>
</pre><pre class="highlight csharp"><span class="n">OpenpayAPI</span> <span class="n">api</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">OpenpayAPI</span><span class="p">(</span><span class="s">"sk_b05586ec98454522ac7d4ccdcaec9128"</span><span class="p">,</span> <span class="s">"maonhzpqm8xp2ydssovf"</span><span class="p">);</span>
<span class="n">Subscription</span> <span class="n">request</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">Subscription</span><span class="p">();</span>
<span class="n">request</span><span class="p">.</span><span class="n">PlanId</span> <span class="p">=</span> <span class="s">"idPlan-01001"</span><span class="p">;</span>
<span class="n">request</span><span class="p">.</span><span class="n">TrialEndDate</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">Datetime</span><span class="p">(</span><span class="m">2014</span><span class="p">,</span> <span class="m">5</span><span class="p">,</span> <span class="m">1</span><span class="p">);;</span>
<span class="n">request</span><span class="p">.</span><span class="n">CardId</span> <span class="p">=</span> <span class="s">"ktrpvymgatocelsciak7"</span><span class="p">;</span>

<span class="n">request</span> <span class="p">=</span> <span class="n">api</span><span class="p">.</span><span class="n">SubscriptionService</span><span class="p">.</span><span class="nf">Create</span><span class="p">(</span><span class="s">"a9pvykxz4g5rg0fplze0"</span><span class="p">,</span> <span class="n">request</span><span class="p">);</span>
</pre><pre class="highlight javascript"><span class="kd">var</span> <span class="nx">subscriptionRequest</span> <span class="o">=</span> <span class="p">{</span>
   <span class="s1">'card'</span><span class="err">:</span><span class="p">{</span>
      <span class="s1">'card_number'</span><span class="err">:</span><span class="s1">'4111111111111111'</span><span class="p">,</span>
      <span class="s1">'holder_name'</span><span class="err">:</span><span class="s1">'Juan Perez Ramirez'</span><span class="p">,</span>
      <span class="s1">'expiration_year'</span><span class="err">:</span><span class="s1">'20'</span><span class="p">,</span>
      <span class="s1">'expiration_month'</span><span class="err">:</span><span class="s1">'12'</span><span class="p">,</span>
      <span class="s1">'cvv2'</span><span class="err">:</span><span class="s1">'110'</span>
   <span class="p">},</span>
   <span class="s1">'plan_id'</span><span class="err">:</span><span class="s1">'pbi4kb8hpb64x0uud2eb'</span>
<span class="p">};</span>

<span class="nx">openpay</span><span class="p">.</span><span class="nx">customers</span><span class="p">.</span><span class="nx">subscriptions</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="nx">customerId</span><span class="p">,</span> <span class="nx">subscriptionRequest</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">subscription</span><span class="p">){</span>
  <span class="c1">// ...
</span><span class="p">});</span>
</pre><pre class="highlight ruby"><span class="vi">@openpay</span><span class="o">=</span><span class="no">OpenpayApi</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="s2">"mzdtln0bmtms6o3kck8f"</span><span class="p">,</span><span class="s2">"sk_e568c42a6c384b7ab02cd47d2e407cab"</span><span class="p">)</span>
<span class="vi">@subscriptions</span><span class="o">=</span><span class="vi">@openpay</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span><span class="ss">:subscriptions</span><span class="p">)</span>
<span class="n">request_hash</span><span class="o">=</span><span class="p">{</span>
     <span class="s2">"plan_id"</span> <span class="o">=&gt;</span> <span class="s2">"pbi4kb8hpb64x0uud2eb"</span><span class="p">,</span>
     <span class="s2">"trial_end_date"</span> <span class="o">=&gt;</span> <span class="s2">"2014-06-20"</span><span class="p">,</span>
     <span class="s2">"source_id"</span> <span class="o">=&gt;</span> <span class="s2">"ktrpvymgatocelsciak7"</span>
   <span class="p">}</span>

<span class="n">response_hash</span><span class="o">=</span><span class="vi">@subscriptions</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span><span class="n">request_hash</span><span class="p">.</span><span class="nf">to_hash</span><span class="p">,</span> <span class="s2">"a9pvykxz4g5rg0fplze0"</span><span class="p">)</span>
</pre>
<blockquote>
<p>Ejemplo de respuesta</p>
</blockquote>
<pre class="highlight json"><span class="p">{</span><span class="w">
   </span><span class="s2">"id"</span><span class="p">:</span><span class="s2">"s0gmyor4yqtyv1miqwr0"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"status"</span><span class="p">:</span><span class="s2">"trial"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"card"</span><span class="p">:{</span><span class="w">
      </span><span class="s2">"type"</span><span class="p">:</span><span class="s2">"debit"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"brand"</span><span class="p">:</span><span class="s2">"visa"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"address"</span><span class="p">:</span><span class="err">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"card_number"</span><span class="p">:</span><span class="s2">"411111XXXXXX1111"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"holder_name"</span><span class="p">:</span><span class="s2">"Juan Perez Ramirez"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"expiration_year"</span><span class="p">:</span><span class="s2">"20"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"expiration_month"</span><span class="p">:</span><span class="s2">"12"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"allows_charges"</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="s2">"allows_payouts"</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="s2">"bank_name"</span><span class="p">:</span><span class="s2">"Banamex"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"bank_code"</span><span class="p">:</span><span class="s2">"002"</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="s2">"cancel_at_period_end"</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span><span class="w">
   </span><span class="s2">"charge_date"</span><span class="p">:</span><span class="s2">"2014-06-21"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"creation_date"</span><span class="p">:</span><span class="s2">"2014-05-22T15:56:18-05:00"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"current_period_number"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w">
   </span><span class="s2">"period_end_date"</span><span class="p">:</span><span class="s2">"2014-06-20"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"trial_end_date"</span><span class="p">:</span><span class="s2">"2014-06-20"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"plan_id"</span><span class="p">:</span><span class="s2">"pbi4kb8hpb64x0uud2eb"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"customer_id"</span><span class="p">:</span><span class="s2">"ag4nktpdzebjiye1tlze"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></pre>
<p>Crea una suscripción para un cliente existente. Se puede ocupar una tarjeta previamente creada o se pueden enviar los datos de la tarjeta en donde se realizarán los cargos.</p>

<h3 id="petición">Petición</h3>

<table><thead>
<tr>
<th>Propiedad</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>plan_id</td>
<td><strong><em>string</em></strong> (requerido, longitud = 45) <br/> Identificador del plan sobre el que se crea la suscripción.</td>
</tr>
<tr>
<td>trial_end_date</td>
<td><strong><em>string</em></strong> (opcional, longitud = 10) <br/> Último día de prueba del cliente. Si no se indica se utilizará el valor de trial_days del plan para calcularlo. Si se indica una fecha anterior al día de hoy, se interpretará como una suscripción sin días de prueba. (Con formato yyy-mm-dd)</td>
</tr>
<tr>
<td>source_id</td>
<td><strong><em>string</em></strong> (requerido si no se envía card, longitud = 45) <br/> Identificador del token o la tarjeta previamente registrada al cliente con la que se cobrará la suscripción.</td>
</tr>
<tr>
<td>card </td>
<td><strong><em>object</em></strong> (requerido si no se envía source_id) <br/> Medio de pago con el cual se cobrará la suscripción. Ver <a href="#objeto-tarjeta">objeto tarjeta</a></td>
</tr>
</tbody></table>

<h3 id="respuesta">Respuesta</h3>

<p>Regresa el <a href="#objeto-suscripción">objeto suscripción</a> creado o una <a href="#objeto-error">respuesta de error</a> si ocurrió algún problema en la creación.</p>

<h2 id="actualizar-una-suscripción">Actualizar una suscripción</h2>

<blockquote>
<p>Definición</p>
</blockquote>
<pre class="highlight shell">PUT https://sandbox-api.openpay.mx/v1/<span class="o">{</span>MERCHANT_ID<span class="o">}</span>/customers/<span class="o">{</span>CUSTOMER_ID<span class="o">}</span>/subscriptions
</pre><pre class="highlight php"><span class="cp">&lt;?</span>
<span class="nv">$customer</span> <span class="o">=</span> <span class="nv">$openpay</span><span class="o">-&gt;</span><span class="na">customers</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="nx">customerId</span><span class="p">);</span>
<span class="nv">$subscription</span> <span class="o">=</span> <span class="nv">$customer</span><span class="o">-&gt;</span><span class="na">subscriptions</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="nx">subscriptionId</span><span class="p">);</span>
<span class="nv">$subscription</span><span class="o">-&gt;</span><span class="na">save</span><span class="p">();</span>
<span class="cp">?&gt;</span>
</pre><pre class="highlight java"><span class="n">openpayAPI</span><span class="o">.</span><span class="na">subscriptions</span><span class="o">().</span><span class="na">update</span><span class="o">(</span><span class="n">Subscription</span> <span class="n">request</span><span class="o">);</span>
</pre><pre class="highlight csharp"><span class="n">openpayAPI</span><span class="p">.</span><span class="n">SubscriptionService</span><span class="p">.</span><span class="nf">Update</span><span class="p">(</span><span class="kt">string</span> <span class="n">customer_id</span><span class="p">,</span> <span class="n">Subscription</span> <span class="n">subscription</span><span class="p">);</span>
</pre><pre class="highlight javascript"><span class="nx">openpay</span><span class="p">.</span><span class="nx">customers</span><span class="p">.</span><span class="nx">subscriptions</span><span class="p">.</span><span class="nx">update</span><span class="p">(</span><span class="nx">customerId</span><span class="p">,</span> <span class="nx">subscriptionId</span><span class="p">,</span> <span class="nx">subscriptionRequest</span><span class="p">,</span> <span class="nx">callback</span><span class="p">);</span>
</pre><pre class="highlight ruby"><span class="c1">#Cliente</span>
<span class="vi">@subscriptions</span><span class="o">=</span><span class="vi">@openpay</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span><span class="ss">:subscriptions</span><span class="p">)</span>
<span class="vi">@subscriptions</span><span class="p">.</span><span class="nf">update</span><span class="p">(</span><span class="n">request_hash</span><span class="p">,</span> <span class="n">customer_id</span><span class="p">)</span>
</pre>
<blockquote>
<p>Ejemplo de petición </p>
</blockquote>
<pre class="highlight shell">curl https://sandbox-api.openpay.mx/v1/mzdtln0bmtms6o3kck8f/customers/ag4nktpdzebjiye1tlze/subscriptions/s0gmyor4yqtyv1miqwr0 <span class="se">\</span>
   -u sk_e568c42a6c384b7ab02cd47d2e407cab: <span class="se">\</span>
   -H <span class="s2">"Content-type: application/json"</span> <span class="se">\</span>
   -X PUT -d <span class="s1">'{
  "trial_end_date": "2016-01-11",
   "card": {
        "card_number": "343434343434343",
        "holder_name": "Juan Perez Ramirez",
        "expiration_year": "20",
        "expiration_month": "12",
        "cvv2":"1234"
    }
}'</span> 
</pre><pre class="highlight php"><span class="cp">&lt;?</span>
<span class="nv">$openpay</span> <span class="o">=</span> <span class="nx">Openpay</span><span class="o">::</span><span class="na">getInstance</span><span class="p">(</span><span class="s1">'moiep6umtcnanql3jrxp'</span><span class="p">,</span> <span class="s1">'sk_3433941e467c1055b178ce26348b0fac'</span><span class="p">);</span>

<span class="nv">$customer</span> <span class="o">=</span> <span class="nv">$openpay</span><span class="o">-&gt;</span><span class="na">customers</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">'a9ualumwnrcxkl42l6mh'</span><span class="p">);</span>
<span class="nv">$subscription</span> <span class="o">=</span> <span class="nv">$customer</span><span class="o">-&gt;</span><span class="na">subscriptions</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">'s7ri24srbldoqqlfo4vp'</span><span class="p">);</span>
<span class="nv">$subscription</span><span class="o">-&gt;</span><span class="na">trial_end_date</span> <span class="o">=</span> <span class="s1">'2014-12-31'</span><span class="p">;</span>
<span class="nv">$subscription</span><span class="o">-&gt;</span><span class="na">save</span><span class="p">();</span>
<span class="cp">?&gt;</span>
</pre><pre class="highlight java"><span class="kd">final</span> <span class="n">Calendar</span> <span class="n">trialEndDate</span> <span class="o">=</span> <span class="n">Calendar</span><span class="o">.</span><span class="na">getInstance</span><span class="o">();</span>
<span class="n">trialEndDate</span><span class="o">.</span><span class="na">set</span><span class="o">(</span><span class="mi">2014</span><span class="o">,</span> <span class="mi">5</span><span class="o">,</span> <span class="mi">1</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span> <span class="mi">0</span><span class="o">);</span>

<span class="n">OpenpayAPI</span> <span class="n">api</span> <span class="o">=</span> <span class="k">new</span> <span class="n">OpenpayAPI</span><span class="o">(</span><span class="s">"https://sandbox-api.openpay.mx"</span><span class="o">,</span> <span class="s">"sk_b05586ec98454522ac7d4ccdcaec9128"</span><span class="o">,</span> <span class="s">"maonhzpqm8xp2ydssovf"</span><span class="o">);</span>
<span class="n">Subscription</span> <span class="n">request</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Subscription</span><span class="o">();</span>
<span class="n">request</span><span class="o">.</span><span class="na">planId</span><span class="o">(</span><span class="s">"idPlan-01001"</span><span class="o">);</span>
<span class="n">request</span><span class="o">.</span><span class="na">trialEndDate</span><span class="o">(</span><span class="n">trialEndDate</span><span class="o">.</span><span class="na">getTime</span><span class="o">());</span>
<span class="n">request</span><span class="o">.</span><span class="na">sourceId</span><span class="o">(</span><span class="s">"ktrpvymgatocelsciak7"</span><span class="o">);</span>

<span class="n">request</span> <span class="o">=</span> <span class="n">api</span><span class="o">.</span><span class="na">subscriptions</span><span class="o">().</span><span class="na">update</span><span class="o">(</span><span class="n">request</span><span class="o">);</span>
</pre><pre class="highlight csharp"><span class="n">OpenpayAPI</span> <span class="n">api</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">OpenpayAPI</span><span class="p">(</span><span class="s">"sk_b05586ec98454522ac7d4ccdcaec9128"</span><span class="p">,</span> <span class="s">"maonhzpqm8xp2ydssovf"</span><span class="p">);</span>
<span class="n">Subscription</span> <span class="n">request</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">Subscription</span><span class="p">();</span>
<span class="n">request</span><span class="p">.</span><span class="n">PlanId</span> <span class="p">=</span> <span class="s">"idPlan-01001"</span><span class="p">;</span>
<span class="n">request</span><span class="p">.</span><span class="n">TrialEndDate</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">Datetime</span><span class="p">(</span><span class="m">2014</span><span class="p">,</span> <span class="m">5</span><span class="p">,</span> <span class="m">1</span><span class="p">);;</span>
<span class="n">request</span><span class="p">.</span><span class="n">CardId</span> <span class="p">=</span> <span class="s">"ktrpvymgatocelsciak7"</span><span class="p">;</span>

<span class="n">request</span> <span class="p">=</span> <span class="n">api</span><span class="p">.</span><span class="n">SubscriptionService</span><span class="p">.</span><span class="nf">Update</span><span class="p">(</span><span class="s">"a9pvykxz4g5rg0fplze0"</span><span class="p">,</span> <span class="n">request</span><span class="p">);</span>
</pre><pre class="highlight javascript"><span class="kd">var</span> <span class="nx">subscriptionRequest</span> <span class="o">=</span> <span class="p">{</span>
<span class="s1">'trial_end_date'</span><span class="err">:</span> <span class="s1">'2016-01-11'</span><span class="p">,</span>
  <span class="s1">'card'</span><span class="err">:</span> <span class="p">{</span>
    <span class="s1">'card_number'</span><span class="err">:</span> <span class="s1">'343434343434343'</span><span class="p">,</span>
    <span class="s1">'holder_name'</span><span class="err">:</span> <span class="s1">'Juan Perez Ramirez'</span><span class="p">,</span>
    <span class="s1">'expiration_year'</span><span class="err">:</span> <span class="s1">'20'</span><span class="p">,</span>
    <span class="s1">'expiration_month'</span><span class="err">:</span> <span class="s1">'12'</span><span class="p">,</span>
    <span class="s1">'cvv2'</span><span class="err">:</span><span class="s1">'1234'</span>
  <span class="p">}</span>
<span class="p">};</span>

<span class="nx">openpay</span><span class="p">.</span><span class="nx">customers</span><span class="p">.</span><span class="nx">subscriptions</span><span class="p">.</span><span class="nx">update</span><span class="p">(</span><span class="s1">'ag4nktpdzebjiye1tlze'</span><span class="p">,</span> <span class="s1">'s0gmyor4yqtyv1miqwr0'</span><span class="p">,</span> <span class="nx">subscriptionRequest</span><span class="p">,</span> 
    <span class="kd">function</span><span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">subscription</span><span class="p">){</span>
  <span class="c1">// ...
</span><span class="p">});</span>
</pre><pre class="highlight ruby"><span class="vi">@openpay</span><span class="o">=</span><span class="no">OpenpayApi</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="s2">"mzdtln0bmtms6o3kck8f"</span><span class="p">,</span><span class="s2">"sk_e568c42a6c384b7ab02cd47d2e407cab"</span><span class="p">)</span>
<span class="vi">@subscriptions</span><span class="o">=</span><span class="vi">@openpay</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span><span class="ss">:subscriptions</span><span class="p">)</span>
<span class="n">request_hash</span><span class="o">=</span><span class="p">{</span>
     <span class="s2">"plan_id"</span> <span class="o">=&gt;</span> <span class="s2">"pbi4kb8hpb64x0uud2eb"</span><span class="p">,</span>
     <span class="s2">"cancel_at_period_end"</span> <span class="o">=&gt;</span> <span class="kp">true</span><span class="p">,</span>
     <span class="s2">"trial_end_date"</span> <span class="o">=&gt;</span> <span class="s2">"2014-06-20"</span><span class="p">,</span>
     <span class="s2">"source_id"</span> <span class="o">=&gt;</span> <span class="s2">"ktrpvymgatocelsciak7"</span>
   <span class="p">}</span>

<span class="n">response_hash</span><span class="o">=</span><span class="vi">@subscriptions</span><span class="p">.</span><span class="nf">update</span><span class="p">(</span><span class="n">request_hash</span><span class="p">.</span><span class="nf">to_hash</span><span class="p">,</span> <span class="s2">"pbi4kb8hpb64x0uud2eb"</span><span class="p">)</span>
</pre>
<blockquote>
<p>Ejemplo de respuesta</p>
</blockquote>
<pre class="highlight json"><span class="p">{</span><span class="w">
   </span><span class="s2">"id"</span><span class="p">:</span><span class="s2">"s0gmyor4yqtyv1miqwr0"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"status"</span><span class="p">:</span><span class="s2">"trial"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"card"</span><span class="p">:{</span><span class="w">
      </span><span class="s2">"type"</span><span class="p">:</span><span class="s2">"credit"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"brand"</span><span class="p">:</span><span class="s2">"american_express"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"address"</span><span class="p">:</span><span class="err">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"card_number"</span><span class="p">:</span><span class="s2">"343434XXXXX4343"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"holder_name"</span><span class="p">:</span><span class="s2">"Juan Perez Ramirez"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"expiration_year"</span><span class="p">:</span><span class="s2">"20"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"expiration_month"</span><span class="p">:</span><span class="s2">"12"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"allows_charges"</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="s2">"allows_payouts"</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="s2">"bank_name"</span><span class="p">:</span><span class="s2">"AMERICAN EXPRESS"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"bank_code"</span><span class="p">:</span><span class="s2">"103"</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="s2">"cancel_at_period_end"</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span><span class="w">
   </span><span class="s2">"charge_date"</span><span class="p">:</span><span class="s2">"2016-01-12"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"creation_date"</span><span class="p">:</span><span class="s2">"2014-05-22T15:56:18-05:00"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"current_period_number"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w">
   </span><span class="s2">"period_end_date"</span><span class="p">:</span><span class="s2">"2016-01-11"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"trial_end_date"</span><span class="p">:</span><span class="s2">"2016-01-11"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"plan_id"</span><span class="p">:</span><span class="s2">"pbi4kb8hpb64x0uud2eb"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"customer_id"</span><span class="p">:</span><span class="s2">"ag4nktpdzebjiye1tlze"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></pre>
<p>Actualiza la información de una suscripción activa.</p>

<h3 id="petición">Petición</h3>

<table><thead>
<tr>
<th>Propiedad</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>cancel_at_period_end</td>
<td><strong><em>booelan</em></strong> (opcional) <br/> Indica si se cancela la suscripción al terminar el periodo.</td>
</tr>
<tr>
<td>trial_end_date</td>
<td><strong><em>string</em></strong> (opcional, longitud = 10) <br/> Último día de prueba del cliente. Si no se indica se utilizará el valor de trial_days del plan para calcularlo. Si se indica una fecha anterior al día de hoy, se interpretará como una suscripción sin días de prueba. (Con formato yyy-mm-dd)</td>
</tr>
<tr>
<td>source_id</td>
<td><strong><em>string</em></strong> (opcional, longitud = 45) <br/> Identificador del token o la tarjeta previamente registrada al cliente con la que se cobrará la suscripción.</td>
</tr>
<tr>
<td>card </td>
<td><strong><em>object</em></strong> (opcional) <br/> Medio de pago con el cual se cobrará la suscripción. Ver <a href="#objeto-tarjeta">objeto tarjeta</a></td>
</tr>
</tbody></table>

<h3 id="respuesta">Respuesta</h3>

<p>Regresa el <a href="#objeto-suscripción">objeto suscripción</a> actualizado o una <a href="#objeto-error">respuesta de error</a> si ocurrió algún problema en la actualización.</p>

<h2 id="obtener-un-suscripción">Obtener un suscripción</h2>

<blockquote>
<p>Definición</p>
</blockquote>
<pre class="highlight shell">GET https://sandbox-api.openpay.mx/v1/<span class="o">{</span>MERCHANT_ID<span class="o">}</span>/customers/<span class="o">{</span>CUSTOMER_ID<span class="o">}</span>/subscriptions/<span class="o">{</span>SUBSCRIPTION_ID<span class="o">}</span>
</pre><pre class="highlight php"><span class="cp">&lt;?</span>
<span class="nv">$customer</span> <span class="o">=</span> <span class="nv">$openpay</span><span class="o">-&gt;</span><span class="na">customers</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="nx">customerId</span><span class="p">);</span>
<span class="nv">$subscription</span> <span class="o">=</span> <span class="nv">$customer</span><span class="o">-&gt;</span><span class="na">subscriptions</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="nx">subscriptionId</span><span class="p">);</span>
<span class="cp">?&gt;</span>
</pre><pre class="highlight java"><span class="n">openpayAPI</span><span class="o">.</span><span class="na">subscriptions</span><span class="o">().</span><span class="na">get</span><span class="o">(</span><span class="n">String</span> <span class="n">customerId</span><span class="o">,</span> <span class="n">String</span> <span class="n">customerId</span><span class="o">);</span>
</pre><pre class="highlight csharp"><span class="n">openpayAPI</span><span class="p">.</span><span class="n">SubscriptionService</span><span class="p">.</span><span class="nf">Get</span><span class="p">(</span><span class="kt">string</span> <span class="n">customer_id</span><span class="p">,</span> <span class="kt">string</span> <span class="n">subscription_id</span><span class="p">);</span>
</pre><pre class="highlight javascript"><span class="nx">openpay</span><span class="p">.</span><span class="nx">customers</span><span class="p">.</span><span class="nx">subscriptions</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="nx">customerId</span><span class="p">,</span> <span class="nx">subscriptionId</span><span class="p">,</span> <span class="nx">callback</span><span class="p">);</span>
</pre><pre class="highlight ruby"><span class="c1">#Cliente</span>
<span class="vi">@subscriptions</span><span class="o">=</span><span class="vi">@openpay</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span><span class="ss">:subscriptions</span><span class="p">)</span>
<span class="vi">@subscriptions</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="n">subscription_id</span><span class="p">,</span><span class="n">customer_id</span><span class="p">)</span>
</pre>
<blockquote>
<p>Ejemplo de petición </p>
</blockquote>
<pre class="highlight shell">curl https://sandbox-api.openpay.mx/v1/mzdtln0bmtms6o3kck8f/customers/ag4nktpdzebjiye1tlze/subscriptions/s0gmyor4yqtyv1miqwr0 <span class="se">\</span>
   -u sk_e568c42a6c384b7ab02cd47d2e407cab:
</pre><pre class="highlight php"><span class="cp">&lt;?</span>
<span class="nv">$openpay</span> <span class="o">=</span> <span class="nx">Openpay</span><span class="o">::</span><span class="na">getInstance</span><span class="p">(</span><span class="s1">'moiep6umtcnanql3jrxp'</span><span class="p">,</span> <span class="s1">'sk_3433941e467c1055b178ce26348b0fac'</span><span class="p">);</span>

<span class="nv">$customer</span> <span class="o">=</span> <span class="nv">$openpay</span><span class="o">-&gt;</span><span class="na">customers</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">'a9ualumwnrcxkl42l6mh'</span><span class="p">);</span>
<span class="nv">$subscription</span> <span class="o">=</span> <span class="nv">$customer</span><span class="o">-&gt;</span><span class="na">subscriptions</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">'s7ri24srbldoqqlfo4vp'</span><span class="p">);</span>
<span class="cp">?&gt;</span>
</pre><pre class="highlight java"><span class="n">OpenpayAPI</span> <span class="n">api</span> <span class="o">=</span> <span class="k">new</span> <span class="n">OpenpayAPI</span><span class="o">(</span><span class="s">"https://sandbox-api.openpay.mx"</span><span class="o">,</span> <span class="s">"sk_b05586ec98454522ac7d4ccdcaec9128"</span><span class="o">,</span> <span class="s">"maonhzpqm8xp2ydssovf"</span><span class="o">);</span>
<span class="n">Subscription</span> <span class="n">subscription</span> <span class="o">=</span> <span class="n">api</span><span class="o">.</span><span class="na">subscriptions</span><span class="o">().</span><span class="na">get</span><span class="o">(</span><span class="s">"a9pvykxz4g5rg0fplze0"</span><span class="o">,</span> <span class="s">"s0gmyor4yqtyv1miqwr0"</span><span class="o">);</span>
</pre><pre class="highlight csharp"><span class="n">OpenpayAPI</span> <span class="n">api</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">OpenpayAPI</span><span class="p">(</span><span class="s">"sk_b05586ec98454522ac7d4ccdcaec9128"</span><span class="p">,</span> <span class="s">"maonhzpqm8xp2ydssovf"</span><span class="p">);</span>
<span class="n">Subscription</span> <span class="n">subscription</span> <span class="p">=</span> <span class="n">api</span><span class="p">.</span><span class="n">SubscriptionService</span><span class="p">.</span><span class="nf">Get</span><span class="p">(</span><span class="s">"a9pvykxz4g5rg0fplze0"</span><span class="p">,</span> <span class="s">"s0gmyor4yqtyv1miqwr0"</span><span class="p">);</span>
</pre><pre class="highlight javascript"><span class="nx">openpay</span><span class="p">.</span><span class="nx">customers</span><span class="p">.</span><span class="nx">subscriptions</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">'ag4nktpdzebjiye1tlze'</span><span class="p">,</span> <span class="s1">'s0gmyor4yqtyv1miqwr0'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">subscription</span><span class="p">){</span>
  <span class="c1">// ...
</span><span class="p">});</span>
</pre><pre class="highlight ruby"><span class="vi">@openpay</span><span class="o">=</span><span class="no">OpenpayApi</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="s2">"mzdtln0bmtms6o3kck8f"</span><span class="p">,</span><span class="s2">"sk_e568c42a6c384b7ab02cd47d2e407cab"</span><span class="p">)</span>
<span class="vi">@subscriptions</span><span class="o">=</span><span class="vi">@openpay</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span><span class="ss">:subscriptions</span><span class="p">)</span>

<span class="n">response_hash</span><span class="o">=</span><span class="vi">@subscriptions</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="s2">"s0gmyor4yqtyv1miqwr0"</span><span class="p">,</span> <span class="s2">"pbi4kb8hpb64x0uud2eb"</span><span class="p">)</span>
</pre>
<blockquote>
<p>Ejemplo de respuesta</p>
</blockquote>
<pre class="highlight json"><span class="p">{</span><span class="w">
   </span><span class="s2">"id"</span><span class="p">:</span><span class="s2">"s0gmyor4yqtyv1miqwr0"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"status"</span><span class="p">:</span><span class="s2">"trial"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"card"</span><span class="p">:{</span><span class="w">
      </span><span class="s2">"type"</span><span class="p">:</span><span class="s2">"credit"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"brand"</span><span class="p">:</span><span class="s2">"american_express"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"address"</span><span class="p">:</span><span class="err">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"card_number"</span><span class="p">:</span><span class="s2">"343434XXXXX4343"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"holder_name"</span><span class="p">:</span><span class="s2">"Juan Perez Ramirez"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"expiration_year"</span><span class="p">:</span><span class="s2">"20"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"expiration_month"</span><span class="p">:</span><span class="s2">"12"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"allows_charges"</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="s2">"allows_payouts"</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="s2">"bank_name"</span><span class="p">:</span><span class="s2">"AMERICAN EXPRESS"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"bank_code"</span><span class="p">:</span><span class="s2">"103"</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="s2">"cancel_at_period_end"</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span><span class="w">
   </span><span class="s2">"charge_date"</span><span class="p">:</span><span class="s2">"2016-01-12"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"creation_date"</span><span class="p">:</span><span class="s2">"2014-05-22T15:56:18-05:00"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"current_period_number"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w">
   </span><span class="s2">"period_end_date"</span><span class="p">:</span><span class="s2">"2016-01-11"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"trial_end_date"</span><span class="p">:</span><span class="s2">"2016-01-11"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"plan_id"</span><span class="p">:</span><span class="s2">"pbi4kb8hpb64x0uud2eb"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"customer_id"</span><span class="p">:</span><span class="s2">"ag4nktpdzebjiye1tlze"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></pre>
<p>Obtiene los detalles de la suscripción de un cliente.</p>

<h3 id="petición">Petición</h3>

<table><thead>
<tr>
<th>Propiedad</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td><strong><em>string</em></strong> (requerido, longitud = 45) <br/> Identificador de la suscripción</td>
</tr>
</tbody></table>

<h3 id="respuesta">Respuesta</h3>

<p>Regresa un <a href="#objeto-suscripción">objeto suscripción</a></p>

<h2 id="cancelar-suscripción">Cancelar suscripción</h2>

<blockquote>
<p>Definición</p>
</blockquote>
<pre class="highlight shell">DELETE https://sandbox-api.openpay.mx/v1/<span class="o">{</span>MERCHANT_ID<span class="o">}</span>/customers/<span class="o">{</span>CUSTOMER_ID<span class="o">}</span>/subscriptions/<span class="o">{</span>SUBSCRIPTION_ID<span class="o">}</span>
</pre><pre class="highlight php"><span class="cp">&lt;?</span>
<span class="nv">$customer</span> <span class="o">=</span> <span class="nv">$openpay</span><span class="o">-&gt;</span><span class="na">customers</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="nx">customerId</span><span class="p">);</span>
<span class="nv">$subscription</span> <span class="o">=</span> <span class="nv">$customer</span><span class="o">-&gt;</span><span class="na">subscriptions</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="nx">subscriptionId</span><span class="p">);</span>
<span class="nv">$subscription</span><span class="o">-&gt;</span><span class="na">delete</span><span class="p">();</span>
<span class="cp">?&gt;</span>
</pre><pre class="highlight java"><span class="n">openpayAPI</span><span class="o">.</span><span class="na">subscriptions</span><span class="o">().</span><span class="na">delete</span><span class="o">(</span><span class="n">String</span> <span class="n">customerId</span><span class="o">,</span> <span class="n">String</span> <span class="n">subscriptionId</span><span class="o">);</span>
</pre><pre class="highlight csharp"><span class="n">openpayAPI</span><span class="p">.</span><span class="n">SubscriptionService</span><span class="p">.</span><span class="nf">Delete</span><span class="p">(</span><span class="kt">string</span> <span class="n">customer_id</span><span class="p">,</span> <span class="kt">string</span> <span class="n">subscription_id</span><span class="p">);</span>
</pre><pre class="highlight javascript"><span class="nx">openpay</span><span class="p">.</span><span class="nx">customers</span><span class="p">.</span><span class="nx">subscriptions</span><span class="p">.</span><span class="k">delete</span><span class="p">(</span><span class="nx">customerId</span><span class="p">,</span> <span class="nx">subscriptionId</span><span class="p">,</span> <span class="nx">callback</span><span class="p">);</span>
</pre><pre class="highlight ruby"><span class="c1">#Cliente</span>
<span class="vi">@subscriptions</span><span class="o">=</span><span class="vi">@openpay</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span><span class="ss">:subscriptions</span><span class="p">)</span>
<span class="vi">@subscriptions</span><span class="p">.</span><span class="nf">delete</span><span class="p">(</span><span class="n">subscription_id</span><span class="p">,</span> <span class="n">customer_id</span><span class="p">)</span>
</pre>
<blockquote>
<p>Ejemplo de petición </p>
</blockquote>
<pre class="highlight shell">curl https://sandbox-api.openpay.mx/v1/mzdtln0bmtms6o3kck8f/customers/ag4nktpdzebjiye1tlze/subscriptions/s0gmyor4yqtyv1miqwr0 <span class="se">\</span>
   -u sk_e568c42a6c384b7ab02cd47d2e407cab: <span class="se">\</span>
   -X DELETE
</pre><pre class="highlight php"><span class="cp">&lt;?</span>
<span class="nv">$openpay</span> <span class="o">=</span> <span class="nx">Openpay</span><span class="o">::</span><span class="na">getInstance</span><span class="p">(</span><span class="s1">'moiep6umtcnanql3jrxp'</span><span class="p">,</span> <span class="s1">'sk_3433941e467c1055b178ce26348b0fac'</span><span class="p">);</span>

<span class="nv">$customer</span> <span class="o">=</span> <span class="nv">$openpay</span><span class="o">-&gt;</span><span class="na">customers</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">'a9ualumwnrcxkl42l6mh'</span><span class="p">);</span>
<span class="nv">$subscription</span> <span class="o">=</span> <span class="nv">$customer</span><span class="o">-&gt;</span><span class="na">subscriptions</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">'s7ri24srbldoqqlfo4vp'</span><span class="p">);</span>
<span class="nv">$subscription</span><span class="o">-&gt;</span><span class="na">delete</span><span class="p">();</span>
<span class="cp">?&gt;</span>
</pre><pre class="highlight java"><span class="n">OpenpayAPI</span> <span class="n">api</span> <span class="o">=</span> <span class="k">new</span> <span class="n">OpenpayAPI</span><span class="o">(</span><span class="s">"https://sandbox-api.openpay.mx"</span><span class="o">,</span> <span class="s">"sk_b05586ec98454522ac7d4ccdcaec9128"</span><span class="o">,</span> <span class="s">"maonhzpqm8xp2ydssovf"</span><span class="o">);</span>
<span class="n">api</span><span class="o">.</span><span class="na">subscriptions</span><span class="o">().</span><span class="na">delete</span><span class="o">(</span><span class="s">"a9pvykxz4g5rg0fplze0"</span><span class="o">,</span> <span class="s">"s0gmyor4yqtyv1miqwr0"</span><span class="o">);</span>
</pre><pre class="highlight csharp"><span class="n">OpenpayAPI</span> <span class="n">api</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">OpenpayAPI</span><span class="p">(</span><span class="s">"sk_b05586ec98454522ac7d4ccdcaec9128"</span><span class="p">,</span> <span class="s">"maonhzpqm8xp2ydssovf"</span><span class="p">);</span>
<span class="n">api</span><span class="p">.</span><span class="n">SubscriptionService</span><span class="p">.</span><span class="nf">Delete</span><span class="p">(</span><span class="s">"a9pvykxz4g5rg0fplze0"</span><span class="p">,</span> <span class="s">"s0gmyor4yqtyv1miqwr0"</span><span class="p">);</span>
</pre><pre class="highlight javascript"><span class="nx">openpay</span><span class="p">.</span><span class="nx">customers</span><span class="p">.</span><span class="nx">subscriptions</span><span class="p">.</span><span class="k">delete</span><span class="p">(</span><span class="s1">'ag4nktpdzebjiye1tlze'</span><span class="p">,</span> <span class="s1">'s0gmyor4yqtyv1miqwr0'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">error</span><span class="p">){</span>
  <span class="c1">// ...
</span><span class="p">});</span>
</pre><pre class="highlight ruby"><span class="vi">@openpay</span><span class="o">=</span><span class="no">OpenpayApi</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="s2">"mzdtln0bmtms6o3kck8f"</span><span class="p">,</span><span class="s2">"sk_e568c42a6c384b7ab02cd47d2e407cab"</span><span class="p">)</span>
<span class="vi">@subscriptions</span><span class="o">=</span><span class="vi">@openpay</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span><span class="ss">:subscriptions</span><span class="p">)</span>

<span class="vi">@subscriptions</span><span class="p">.</span><span class="nf">detele</span><span class="p">(</span><span class="s2">"s0gmyor4yqtyv1miqwr0"</span><span class="p">,</span> <span class="s2">"pbi4kb8hpb64x0uud2eb"</span><span class="p">)</span>
</pre>
<p>Cancela inmediatamente la suscrupción del cliente. Ya no se realizarán mas cargos a la tarjeta y todos cargos pendientes se cancelarán.</p>

<h3 id="petición">Petición</h3>

<table><thead>
<tr>
<th>Propiedad</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td><strong><em>string</em></strong> (requerido, longitud = 45) <br/> Identificador del plan a eliminar</td>
</tr>
</tbody></table>

<h3 id="respuesta">Respuesta</h3>

<p>Si la suscripción se cancelo correctamente la respuesta es vacía, si no se regresa un <a href="#objeto-error">objeto error</a> indicando el motivo. </p>

<h2 id="listado-de-suscripciones">Listado de suscripciones</h2>

<blockquote>
<p>Definición</p>
</blockquote>
<pre class="highlight shell">GET https://sandbox-api.openpay.mx/v1/<span class="o">{</span>MERCHANT_ID<span class="o">}</span>/customers/<span class="o">{</span>CUSTOMER_ID<span class="o">}</span>/subscriptions
</pre><pre class="highlight php"><span class="cp">&lt;?</span>
<span class="nv">$customer</span> <span class="o">=</span> <span class="nv">$openpay</span><span class="o">-&gt;</span><span class="na">customers</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="nx">customerId</span><span class="p">);</span>
<span class="nv">$subscriptionList</span> <span class="o">=</span> <span class="nv">$customer</span><span class="o">-&gt;</span><span class="na">subscriptions</span><span class="o">-&gt;</span><span class="na">getList</span><span class="p">(</span><span class="nx">findDataRequest</span><span class="p">);</span>
<span class="cp">?&gt;</span>
</pre><pre class="highlight java"><span class="n">openpayAPI</span><span class="o">.</span><span class="na">subscriptions</span><span class="o">().</span><span class="na">list</span><span class="o">(</span><span class="n">String</span> <span class="n">customerId</span><span class="o">,</span> <span class="n">SearchParams</span> <span class="n">request</span><span class="o">);</span>
</pre><pre class="highlight csharp"><span class="n">openpayAPI</span><span class="p">.</span><span class="n">SubscriptionService</span><span class="p">.</span><span class="nf">List</span><span class="p">(</span><span class="kt">string</span> <span class="n">customer_id</span><span class="p">,</span> <span class="n">SearchParams</span> <span class="n">request</span> <span class="p">=</span> <span class="k">null</span><span class="p">);</span>
</pre><pre class="highlight javascript"><span class="nx">openpay</span><span class="p">.</span><span class="nx">customers</span><span class="p">.</span><span class="nx">subscriptions</span><span class="p">.</span><span class="nx">list</span><span class="p">(</span><span class="nx">customerId</span><span class="p">,</span> <span class="nx">callback</span><span class="p">);</span>
<span class="nx">openpay</span><span class="p">.</span><span class="nx">customers</span><span class="p">.</span><span class="nx">subscriptions</span><span class="p">.</span><span class="nx">list</span><span class="p">(</span><span class="nx">customerId</span><span class="p">,</span> <span class="nx">searchParams</span><span class="p">,</span> <span class="nx">callback</span><span class="p">);</span>
</pre><pre class="highlight ruby"><span class="c1">#Cliente</span>
<span class="vi">@subscriptions</span><span class="o">=</span><span class="vi">@openpay</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span><span class="ss">:subscriptions</span><span class="p">)</span>
<span class="vi">@subscriptions</span><span class="p">.</span><span class="nf">all</span><span class="p">(</span><span class="n">customer_id</span><span class="p">)</span>
</pre>
<blockquote>
<p>Ejemplo de petición </p>
</blockquote>
<pre class="highlight shell">curl -g <span class="s2">"https://sandbox-api.openpay.mx/v1/mzdtln0bmtms6o3kck8f/customers/ag4nktpdzebjiye1tlze/subscriptions?limit=10"</span> <span class="se">\</span>
   -u sk_e568c42a6c384b7ab02cd47d2e407cab: 
</pre><pre class="highlight php"><span class="cp">&lt;?</span>
<span class="nv">$openpay</span> <span class="o">=</span> <span class="nx">Openpay</span><span class="o">::</span><span class="na">getInstance</span><span class="p">(</span><span class="s1">'moiep6umtcnanql3jrxp'</span><span class="p">,</span> <span class="s1">'sk_3433941e467c1055b178ce26348b0fac'</span><span class="p">);</span>

<span class="nv">$findData</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">'creation[gte]'</span> <span class="o">=&gt;</span> <span class="s1">'2013-01-01'</span><span class="p">,</span>
    <span class="s1">'creation[lte]'</span> <span class="o">=&gt;</span> <span class="s1">'2013-12-31'</span><span class="p">,</span>
    <span class="s1">'offset'</span> <span class="o">=&gt;</span> <span class="mi">0</span><span class="p">,</span>
    <span class="s1">'limit'</span> <span class="o">=&gt;</span> <span class="mi">5</span><span class="p">);</span>

<span class="nv">$customer</span> <span class="o">=</span> <span class="nv">$openpay</span><span class="o">-&gt;</span><span class="na">customers</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">'a9ualumwnrcxkl42l6mh'</span><span class="p">);</span>
<span class="nv">$subscriptionList</span> <span class="o">=</span> <span class="nv">$customer</span><span class="o">-&gt;</span><span class="na">subscriptions</span><span class="o">-&gt;</span><span class="na">getList</span><span class="p">(</span><span class="nv">$findData</span><span class="p">);</span>
<span class="cp">?&gt;</span>
</pre><pre class="highlight java"><span class="kd">final</span> <span class="n">Calendar</span> <span class="n">dateGte</span> <span class="o">=</span> <span class="n">Calendar</span><span class="o">.</span><span class="na">getInstance</span><span class="o">();</span>
<span class="kd">final</span> <span class="n">Calendar</span> <span class="n">dateLte</span> <span class="o">=</span> <span class="n">Calendar</span><span class="o">.</span><span class="na">getInstance</span><span class="o">();</span>
<span class="n">dateGte</span><span class="o">.</span><span class="na">set</span><span class="o">(</span><span class="mi">2014</span><span class="o">,</span> <span class="mi">5</span><span class="o">,</span> <span class="mi">1</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span> <span class="mi">0</span><span class="o">);</span>
<span class="n">dateLte</span><span class="o">.</span><span class="na">set</span><span class="o">(</span><span class="mi">2014</span><span class="o">,</span> <span class="mi">5</span><span class="o">,</span> <span class="mi">15</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span> <span class="mi">0</span><span class="o">);</span>

<span class="n">OpenpayAPI</span> <span class="n">api</span> <span class="o">=</span> <span class="k">new</span> <span class="n">OpenpayAPI</span><span class="o">(</span><span class="s">"https://sandbox-api.openpay.mx"</span><span class="o">,</span> <span class="s">"sk_b05586ec98454522ac7d4ccdcaec9128"</span><span class="o">,</span> <span class="s">"maonhzpqm8xp2ydssovf"</span><span class="o">);</span>
<span class="n">SearchParams</span> <span class="n">request</span> <span class="o">=</span> <span class="k">new</span> <span class="n">SearchParams</span><span class="o">();</span>
<span class="n">request</span><span class="o">.</span><span class="na">creationGte</span><span class="o">(</span><span class="n">dateGte</span><span class="o">.</span><span class="na">getTime</span><span class="o">());</span>
<span class="n">request</span><span class="o">.</span><span class="na">creationLte</span><span class="o">(</span><span class="n">dateLte</span><span class="o">.</span><span class="na">getTime</span><span class="o">());</span>
<span class="n">request</span><span class="o">.</span><span class="na">offset</span><span class="o">(</span><span class="mi">0</span><span class="o">);</span>
<span class="n">request</span><span class="o">.</span><span class="na">limit</span><span class="o">(</span><span class="mi">100</span><span class="o">);</span>

<span class="n">List</span><span class="o">&lt;</span><span class="n">Subscription</span><span class="o">&gt;</span> <span class="n">subscriptions</span> <span class="o">=</span> <span class="n">api</span><span class="o">.</span><span class="na">subscriptions</span><span class="o">().</span><span class="na">list</span><span class="o">(</span><span class="s">"a9pvykxz4g5rg0fplze0"</span><span class="o">,</span> <span class="n">request</span><span class="o">);</span>
</pre><pre class="highlight csharp"><span class="n">OpenpayAPI</span> <span class="n">api</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">OpenpayAPI</span><span class="p">(</span><span class="s">"sk_b05586ec98454522ac7d4ccdcaec9128"</span><span class="p">,</span> <span class="s">"maonhzpqm8xp2ydssovf"</span><span class="p">);</span>
<span class="n">SearchParams</span> <span class="n">request</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">SearchParams</span><span class="p">();</span>
<span class="n">request</span><span class="p">.</span><span class="n">CreationGte</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">Datetime</span><span class="p">(</span><span class="m">2014</span><span class="p">,</span> <span class="m">5</span><span class="p">,</span> <span class="m">1</span><span class="p">);</span>
<span class="n">request</span><span class="p">.</span><span class="n">CreationLte</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">DateTime</span><span class="p">(</span><span class="m">2014</span><span class="p">,</span> <span class="m">5</span><span class="p">,</span> <span class="m">15</span><span class="p">);</span>
<span class="n">request</span><span class="p">.</span><span class="n">Offset</span> <span class="p">=</span> <span class="m">0</span><span class="p">;</span>
<span class="n">request</span><span class="p">.</span><span class="n">Limit</span> <span class="p">=</span> <span class="m">100</span><span class="p">;</span>

<span class="n">List</span><span class="p">&lt;</span><span class="n">Subscription</span><span class="p">&gt;</span> <span class="n">subscriptions</span> <span class="p">=</span> <span class="n">api</span><span class="p">.</span><span class="n">SubscriptionService</span><span class="p">.</span><span class="nf">List</span><span class="p">(</span><span class="s">"a9pvykxz4g5rg0fplze0"</span><span class="p">,</span> <span class="n">request</span><span class="p">);</span>
</pre><pre class="highlight javascript"><span class="kd">var</span> <span class="nx">searchParams</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s1">'limit'</span> <span class="err">:</span> <span class="mi">2</span>
<span class="p">};</span>

<span class="nx">openpay</span><span class="p">.</span><span class="nx">customers</span><span class="p">.</span><span class="nx">subscriptions</span><span class="p">.</span><span class="nx">list</span><span class="p">(</span><span class="s1">'ag4nktpdzebjiye1tlze'</span><span class="p">,</span> <span class="nx">searchParams</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">list</span><span class="p">){</span>
  <span class="c1">// ...
</span><span class="p">});</span>
</pre><pre class="highlight ruby"><span class="vi">@openpay</span><span class="o">=</span><span class="no">OpenpayApi</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="s2">"mzdtln0bmtms6o3kck8f"</span><span class="p">,</span><span class="s2">"sk_e568c42a6c384b7ab02cd47d2e407cab"</span><span class="p">)</span>
<span class="vi">@subscriptions</span><span class="o">=</span><span class="vi">@openpay</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span><span class="ss">:subscriptions</span><span class="p">)</span>

<span class="vi">@subscriptions</span><span class="p">.</span><span class="nf">all</span><span class="p">(</span><span class="s2">"pbi4kb8hpb64x0uud2eb"</span><span class="p">)</span>
</pre>
<blockquote>
<p>Ejemplo de respuesta</p>
</blockquote>
<pre class="highlight json"><span class="p">[</span><span class="w">
   </span><span class="p">{</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="s2">"s0gmyor4yqtyv1miqwr0"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"status"</span><span class="p">:</span><span class="s2">"trial"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"card"</span><span class="p">:{</span><span class="w">
         </span><span class="s2">"type"</span><span class="p">:</span><span class="s2">"credit"</span><span class="p">,</span><span class="w">
         </span><span class="s2">"brand"</span><span class="p">:</span><span class="s2">"american_express"</span><span class="p">,</span><span class="w">
         </span><span class="s2">"address"</span><span class="p">:</span><span class="err">null</span><span class="p">,</span><span class="w">
         </span><span class="s2">"card_number"</span><span class="p">:</span><span class="s2">"343434XXXXX4343"</span><span class="p">,</span><span class="w">
         </span><span class="s2">"holder_name"</span><span class="p">:</span><span class="s2">"Juan Perez Ramirez"</span><span class="p">,</span><span class="w">
         </span><span class="s2">"expiration_year"</span><span class="p">:</span><span class="s2">"20"</span><span class="p">,</span><span class="w">
         </span><span class="s2">"expiration_month"</span><span class="p">:</span><span class="s2">"12"</span><span class="p">,</span><span class="w">
         </span><span class="s2">"allows_charges"</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span><span class="w">
         </span><span class="s2">"allows_payouts"</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span><span class="w">
         </span><span class="s2">"bank_name"</span><span class="p">:</span><span class="s2">"AMERICAN EXPRESS"</span><span class="p">,</span><span class="w">
         </span><span class="s2">"bank_code"</span><span class="p">:</span><span class="s2">"103"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="s2">"cancel_at_period_end"</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="s2">"charge_date"</span><span class="p">:</span><span class="s2">"2016-01-12"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"creation_date"</span><span class="p">:</span><span class="s2">"2014-05-22T15:56:18-05:00"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"current_period_number"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w">
      </span><span class="s2">"period_end_date"</span><span class="p">:</span><span class="s2">"2016-01-11"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"trial_end_date"</span><span class="p">:</span><span class="s2">"2016-01-11"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"plan_id"</span><span class="p">:</span><span class="s2">"pbi4kb8hpb64x0uud2eb"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"customer_id"</span><span class="p">:</span><span class="s2">"ag4nktpdzebjiye1tlze"</span><span class="w">
   </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></pre>
<p>Regresa los detalles de todas las suscripciones activas para un cliente en específico.</p>

<h3 id="petición">Petición</h3>

<p>Se puede realizar búsquedas utilizando los siguiente parámetros.</p>

<table><thead>
<tr>
<th>Propiedad</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>creation</td>
<td><strong><em>date</em></strong> <br/>Igual a la fecha de creación. Formato yyyy-mm-dd</td>
</tr>
<tr>
<td>creation[gte]</td>
<td><strong><em>date</em></strong> <br/>Mayor a la fecha de creación. Formato yyyy-mm-dd</td>
</tr>
<tr>
<td>creation[lte]</td>
<td><strong><em>date</em></strong> <br/>Menor a la fecha de creación. Formato yyyy-mm-dd</td>
</tr>
<tr>
<td>offset</td>
<td><strong><em>numeric</em></strong> <br/>Número de registros a omitir al inicio, por defecto 0.</td>
</tr>
<tr>
<td>limit</td>
<td><strong><em>numeric</em></strong> <br/>Número de registros que se requieren, por defecto 10.</td>
</tr>
</tbody></table>

<h3 id="respuesta">Respuesta</h3>

<p>Listado de <a href="#objeto-suscripción">objetos suscripción</a> que tiene el cliente. Ordenados por fecha de creación en orden descendente.</p>

<h1 id="comisiones">Comisiones</h1>

<p>Si las cuentas de los clientes fueron creadas para que manejarán su propio saldo, se puede realizar el cobro de una comisión el cual se verá reflejado en la cuenta del comercio.</p>

<p><aside class="notice">
Para que las cuentas de los clientes manejen saldo debieron ser creadas con la propiedad <strong><em>requires_account = true</em></strong>. Ver <a href="#crear-un-nuevo-cliente">creación de un cliente</a>
</aside></p>

<h2 id="cobrar-comisión">Cobrar Comisión</h2>

<blockquote>
<p>Definición</p>
</blockquote>
<pre class="highlight shell">POST https://sandbox-api.openpay.mx/v1/<span class="o">{</span>MERCHANT_ID<span class="o">}</span>/fees
</pre><pre class="highlight php"><span class="cp">&lt;?</span>
<span class="nv">$fee</span> <span class="o">=</span> <span class="nv">$openpay</span><span class="o">-&gt;</span><span class="na">fees</span><span class="o">-&gt;</span><span class="na">create</span><span class="p">(</span><span class="nx">feeDataRequest</span><span class="p">);</span>
<span class="cp">?&gt;</span>
</pre><pre class="highlight java"><span class="n">openpayAPI</span><span class="o">.</span><span class="na">fees</span><span class="o">().</span><span class="na">create</span><span class="o">(</span><span class="n">CreateFeeParams</span> <span class="n">request</span><span class="o">);</span>
</pre><pre class="highlight csharp"><span class="n">openpayAPI</span><span class="p">.</span><span class="n">FeeService</span><span class="p">.</span><span class="nf">Create</span><span class="p">(</span><span class="n">FeeRequest</span> <span class="n">request</span><span class="p">);</span>
</pre><pre class="highlight javascript"><span class="nx">openpay</span><span class="p">.</span><span class="nx">fees</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="nx">feeRequest</span><span class="p">,</span> <span class="nx">callback</span><span class="p">);</span>
</pre><pre class="highlight ruby"><span class="c1">#Cliente</span>
<span class="vi">@fees</span><span class="o">=</span><span class="vi">@openpay</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span><span class="ss">:fees</span><span class="p">)</span>
<span class="vi">@fees</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span><span class="n">request_hash</span><span class="p">)</span>
</pre>
<blockquote>
<p>Ejemplo de petición </p>
</blockquote>
<pre class="highlight shell">curl https://sandbox-api.openpay.mx/v1/mzdtln0bmtms6o3kck8f/fees <span class="se">\</span>
   -u sk_e568c42a6c384b7ab02cd47d2e407cab: <span class="se">\</span>
   -H <span class="s2">"Content-type: application/json"</span> <span class="se">\</span>
   -X POST -d <span class="s1">'{                                            
     "customer_id" : "dvocf97jd20es3tw5laz",
     "amount" : 12.50,          
     "description" : "Cobro de Comisión",
     "order_id" : "oid-1245"
}'</span> 
</pre><pre class="highlight php"><span class="cp">&lt;?</span>
<span class="nv">$openpay</span> <span class="o">=</span> <span class="nx">Openpay</span><span class="o">::</span><span class="na">getInstance</span><span class="p">(</span><span class="s1">'moiep6umtcnanql3jrxp'</span><span class="p">,</span> <span class="s1">'sk_3433941e467c1055b178ce26348b0fac'</span><span class="p">);</span>

<span class="nv">$feeDataRequest</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">'customer_id'</span> <span class="o">=&gt;</span> <span class="s1">'a9ualumwnrcxkl42l6mh'</span><span class="p">,</span>
    <span class="s1">'amount'</span> <span class="o">=&gt;</span> <span class="mf">12.50</span><span class="p">,</span>
    <span class="s1">'description'</span> <span class="o">=&gt;</span> <span class="s1">'Cobro de Comisión'</span><span class="p">,</span>
    <span class="s1">'order_id'</span> <span class="o">=&gt;</span> <span class="s1">'ORDEN-00063'</span><span class="p">);</span>

<span class="nv">$fee</span> <span class="o">=</span> <span class="nv">$openpay</span><span class="o">-&gt;</span><span class="na">fees</span><span class="o">-&gt;</span><span class="na">create</span><span class="p">(</span><span class="nv">$feeDataRequest</span><span class="p">);</span>
<span class="cp">?&gt;</span>
</pre><pre class="highlight java"><span class="n">OpenpayAPI</span> <span class="n">api</span> <span class="o">=</span> <span class="k">new</span> <span class="n">OpenpayAPI</span><span class="o">(</span><span class="s">"https://sandbox-api.openpay.mx"</span><span class="o">,</span> <span class="s">"sk_b05586ec98454522ac7d4ccdcaec9128"</span><span class="o">,</span> <span class="s">"maonhzpqm8xp2ydssovf"</span><span class="o">);</span>
<span class="n">CreateFeeParams</span> <span class="n">request</span> <span class="o">=</span> <span class="k">new</span> <span class="n">CreateFeeParams</span><span class="o">();</span>
<span class="n">request</span><span class="o">.</span><span class="na">customerId</span><span class="o">(</span><span class="s">"a9pvykxz4g5rg0fplze0"</span><span class="o">);</span>
<span class="n">request</span><span class="o">.</span><span class="na">amount</span><span class="o">(</span><span class="k">new</span> <span class="n">BigDecimal</span><span class="o">(</span><span class="s">"100.00"</span><span class="o">));</span>
<span class="n">request</span><span class="o">.</span><span class="na">description</span><span class="o">(</span><span class="s">"Cobro de comisión"</span><span class="o">);</span>
<span class="n">request</span><span class="o">.</span><span class="na">orderId</span><span class="o">(</span><span class="s">"oid-1245"</span><span class="o">);</span>

<span class="n">Fee</span> <span class="n">fee</span> <span class="o">=</span> <span class="n">api</span><span class="o">.</span><span class="na">fees</span><span class="o">().</span><span class="na">create</span><span class="o">(</span><span class="n">request</span><span class="o">);</span>
</pre><pre class="highlight csharp"><span class="n">OpenpayAPI</span> <span class="n">api</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">OpenpayAPI</span><span class="p">(</span><span class="s">"sk_b05586ec98454522ac7d4ccdcaec9128"</span><span class="p">,</span> <span class="s">"maonhzpqm8xp2ydssovf"</span><span class="p">);</span>
<span class="n">FeeRequest</span> <span class="n">request</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">FeeRequest</span><span class="p">();</span>
<span class="n">request</span><span class="p">.</span><span class="n">CustomerId</span> <span class="p">=</span> <span class="s">"a9pvykxz4g5rg0fplze0"</span><span class="p">;</span>
<span class="n">request</span><span class="p">.</span><span class="n">Amount</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">Decimal</span><span class="p">(</span><span class="m">100.00</span><span class="p">);</span>
<span class="n">request</span><span class="p">.</span><span class="n">Description</span> <span class="p">=</span> <span class="s">"Cobro de comisión"</span><span class="p">;</span>
<span class="n">request</span><span class="p">.</span><span class="n">OrderId</span> <span class="p">=</span> <span class="s">"oid-1245;
</span>
<span class="n">Fee</span> <span class="n">fee</span> <span class="p">=</span> <span class="n">api</span><span class="p">.</span><span class="n">FeeService</span><span class="p">.</span><span class="nf">Create</span><span class="p">(</span><span class="n">request</span><span class="p">);</span>
</pre><pre class="highlight javascript"><span class="kd">var</span> <span class="nx">feeRequest</span> <span class="o">=</span> <span class="p">{</span>                                            
     <span class="s1">'customer_id'</span> <span class="err">:</span> <span class="s1">'dvocf97jd20es3tw5laz'</span><span class="p">,</span>
     <span class="s1">'amount'</span> <span class="err">:</span> <span class="mf">12.50</span><span class="p">,</span>          
     <span class="s1">'description'</span> <span class="err">:</span> <span class="s1">'Cobro de Comisión'</span><span class="p">,</span>
     <span class="s1">'order_id'</span> <span class="err">:</span> <span class="s1">'oid-1245'</span>
<span class="p">};</span>

<span class="nx">openpay</span><span class="p">.</span><span class="nx">fees</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="nx">feeRequest</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">fee</span><span class="p">){</span>
  <span class="c1">// ...
</span><span class="p">});</span>
</pre><pre class="highlight ruby"><span class="vi">@openpay</span><span class="o">=</span><span class="no">OpenpayApi</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="s2">"mzdtln0bmtms6o3kck8f"</span><span class="p">,</span><span class="s2">"sk_e568c42a6c384b7ab02cd47d2e407cab"</span><span class="p">)</span>
<span class="vi">@fees</span><span class="o">=</span><span class="vi">@openpay</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span><span class="ss">:fees</span><span class="p">)</span>
<span class="n">request_hash</span><span class="o">=</span><span class="p">{</span>
     <span class="s2">"customer_id"</span> <span class="o">=&gt;</span> <span class="s2">"dvocf97jd20es3tw5laz"</span><span class="p">,</span>
     <span class="s2">"amount"</span> <span class="o">=&gt;</span> <span class="mi">12</span><span class="o">.</span><span class="mi">50</span><span class="p">,</span>
     <span class="s2">"description"</span> <span class="o">=&gt;</span> <span class="s2">"Cobro de Comisión"</span><span class="p">,</span>
     <span class="s2">"order_id"</span> <span class="o">=&gt;</span> <span class="s2">"oid-1245"</span>
   <span class="p">}</span>

<span class="n">response_hash</span><span class="o">=</span><span class="vi">@fees</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span><span class="n">request_hash</span><span class="p">.</span><span class="nf">to_hash</span><span class="p">)</span>
</pre>
<blockquote>
<p>Ejemplo de respuesta</p>
</blockquote>
<pre class="highlight json"><span class="p">{</span><span class="w">
   </span><span class="s2">"amount"</span><span class="p">:</span><span class="mf">12.50</span><span class="p">,</span><span class="w">
   </span><span class="s2">"authorization"</span><span class="p">:</span><span class="err">null</span><span class="p">,</span><span class="w">
   </span><span class="s2">"method"</span><span class="p">:</span><span class="s2">"customer"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"operation_type"</span><span class="p">:</span><span class="s2">"out"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"currency"</span><span class="p">:</span><span class="s2">"MXN"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"transaction_type"</span><span class="p">:</span><span class="s2">"fee"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"status"</span><span class="p">:</span><span class="s2">"completed"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"id"</span><span class="p">:</span><span class="s2">"th8tafyrkakdbyry3kxi"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"creation_date"</span><span class="p">:</span><span class="s2">"2013-11-18T10:33:03-06:00"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"description"</span><span class="p">:</span><span class="s2">"Cobro de comisión"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"error_message"</span><span class="p">:</span><span class="err">null</span><span class="p">,</span><span class="w">
   </span><span class="s2">"order_id"</span><span class="p">:</span><span class="s2">"oid-1245"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"customer_id"</span><span class="p">:</span><span class="s2">"dvocf97jd20es3tw5laz"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></pre>
<p>Cobra una comisión a la cuenta de un cliente.</p>

<h3 id="petición">Petición</h3>

<table><thead>
<tr>
<th>Propiedad</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>customer_id</td>
<td><strong><em>string</em></strong> (requerido, longitud = 45) <br/>El identificador único del cliente al que deseas cobrarle la comisión.</td>
</tr>
<tr>
<td>amount</td>
<td><strong><em>numeric</em></strong> (requerido) <br/>Cantidad del cargo. Debe ser una cantidad mayor a cero, con hasta dos dígitos decimales.</td>
</tr>
<tr>
<td>description</td>
<td><strong><em>string</em></strong> (requerido, longitud = 250) <br/>Una descripción asociada al cobro comisión.</td>
</tr>
<tr>
<td>order_id</td>
<td><strong><em>string</em></strong> (opcional, longitud = 100) <br/>Identificador único de la comisión. Debe ser único para todas las transacciones.</td>
</tr>
</tbody></table>

<h3 id="regresa">Regresa</h3>

<p>El <a href="#objeto-transacción">objeto de transacción</a> de la comisión, con su fecha de creación y su id o una <a href="#objeto-error">respuesta de error</a>.</p>

<h2 id="listado-de-comisiones">Listado de comisiones</h2>

<blockquote>
<p>Definición</p>
</blockquote>
<pre class="highlight shell">GET https://sandbox-api.openpay.mx/v1/<span class="o">{</span>MERCHANT_ID<span class="o">}</span>/fees
</pre><pre class="highlight php"><span class="cp">&lt;?</span>
<span class="nv">$feeList</span> <span class="o">=</span> <span class="nv">$openpay</span><span class="o">-&gt;</span><span class="na">fees</span><span class="o">-&gt;</span><span class="na">getList</span><span class="p">(</span><span class="nx">findDataRequest</span><span class="p">);</span>
<span class="cp">?&gt;</span>
</pre><pre class="highlight java"><span class="n">openpayAPI</span><span class="o">.</span><span class="na">fees</span><span class="o">().</span><span class="na">list</span><span class="o">(</span><span class="n">SearchParams</span> <span class="n">request</span><span class="o">);</span>
</pre><pre class="highlight csharp"><span class="n">openpayAPI</span><span class="p">.</span><span class="n">FeeService</span><span class="p">.</span><span class="nf">List</span><span class="p">(</span><span class="n">SearchParams</span> <span class="n">request</span> <span class="p">=</span> <span class="k">null</span><span class="p">);</span>
</pre><pre class="highlight javascript"><span class="nx">openpay</span><span class="p">.</span><span class="nx">fees</span><span class="p">.</span><span class="nx">list</span><span class="p">(</span><span class="nx">callback</span><span class="p">);</span>
<span class="nx">openpay</span><span class="p">.</span><span class="nx">fees</span><span class="p">.</span><span class="nx">list</span><span class="p">(</span><span class="nx">searchParams</span><span class="p">,</span> <span class="nx">callback</span><span class="p">);</span>
</pre><pre class="highlight ruby"><span class="c1">#Cliente</span>
<span class="vi">@fees</span><span class="o">=</span><span class="vi">@openpay</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span><span class="ss">:fees</span><span class="p">)</span>
<span class="vi">@fees</span><span class="p">.</span><span class="nf">all</span>
</pre>
<blockquote>
<p>Ejemplo de petición </p>
</blockquote>
<pre class="highlight shell">curl -g <span class="s2">"https://sandbox-api.openpay.mx/v1/mzdtln0bmtms6o3kck8f/fees?limit=10"</span> <span class="se">\</span>
   -u sk_e568c42a6c384b7ab02cd47d2e407cab: 
</pre><pre class="highlight php"><span class="cp">&lt;?</span>
<span class="nv">$openpay</span> <span class="o">=</span> <span class="nx">Openpay</span><span class="o">::</span><span class="na">getInstance</span><span class="p">(</span><span class="s1">'moiep6umtcnanql3jrxp'</span><span class="p">,</span> <span class="s1">'sk_3433941e467c1055b178ce26348b0fac'</span><span class="p">);</span>

<span class="nv">$findData</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">'creation[gte]'</span> <span class="o">=&gt;</span> <span class="s1">'2013-01-01'</span><span class="p">,</span>
    <span class="s1">'creation[lte]'</span> <span class="o">=&gt;</span> <span class="s1">'2013-12-31'</span><span class="p">,</span>
    <span class="s1">'offset'</span> <span class="o">=&gt;</span> <span class="mi">0</span><span class="p">,</span>
    <span class="s1">'limit'</span> <span class="o">=&gt;</span> <span class="mi">5</span><span class="p">);</span>

<span class="nv">$feeList</span> <span class="o">=</span> <span class="nv">$openpay</span><span class="o">-&gt;</span><span class="na">fees</span><span class="o">-&gt;</span><span class="na">getList</span><span class="p">(</span><span class="nv">$findDataRequest</span><span class="p">);</span>
<span class="cp">?&gt;</span>
</pre><pre class="highlight java"><span class="kd">final</span> <span class="n">Calendar</span> <span class="n">dateGte</span> <span class="o">=</span> <span class="n">Calendar</span><span class="o">.</span><span class="na">getInstance</span><span class="o">();</span>
<span class="kd">final</span> <span class="n">Calendar</span> <span class="n">dateLte</span> <span class="o">=</span> <span class="n">Calendar</span><span class="o">.</span><span class="na">getInstance</span><span class="o">();</span>
<span class="n">dateGte</span><span class="o">.</span><span class="na">set</span><span class="o">(</span><span class="mi">2014</span><span class="o">,</span> <span class="mi">5</span><span class="o">,</span> <span class="mi">1</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span> <span class="mi">0</span><span class="o">);</span>
<span class="n">dateLte</span><span class="o">.</span><span class="na">set</span><span class="o">(</span><span class="mi">2014</span><span class="o">,</span> <span class="mi">5</span><span class="o">,</span> <span class="mi">15</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span> <span class="mi">0</span><span class="o">);</span>

<span class="n">OpenpayAPI</span> <span class="n">api</span> <span class="o">=</span> <span class="k">new</span> <span class="n">OpenpayAPI</span><span class="o">(</span><span class="s">"https://sandbox-api.openpay.mx"</span><span class="o">,</span> <span class="s">"sk_b05586ec98454522ac7d4ccdcaec9128"</span><span class="o">,</span> <span class="s">"maonhzpqm8xp2ydssovf"</span><span class="o">);</span>
<span class="n">SearchParams</span> <span class="n">request</span> <span class="o">=</span> <span class="k">new</span> <span class="n">SearchParams</span><span class="o">();</span>
<span class="n">request</span><span class="o">.</span><span class="na">creationGte</span><span class="o">(</span><span class="n">dateGte</span><span class="o">.</span><span class="na">getTime</span><span class="o">());</span>
<span class="n">request</span><span class="o">.</span><span class="na">creationLte</span><span class="o">(</span><span class="n">dateLte</span><span class="o">.</span><span class="na">getTime</span><span class="o">());</span>
<span class="n">request</span><span class="o">.</span><span class="na">offset</span><span class="o">(</span><span class="mi">0</span><span class="o">);</span>
<span class="n">request</span><span class="o">.</span><span class="na">limit</span><span class="o">(</span><span class="mi">100</span><span class="o">);</span>

<span class="n">List</span><span class="o">&lt;</span><span class="n">Fee</span><span class="o">&gt;</span> <span class="n">fees</span> <span class="o">=</span> <span class="n">api</span><span class="o">.</span><span class="na">fees</span><span class="o">().</span><span class="na">list</span><span class="o">(</span><span class="n">request</span><span class="o">);</span>
</pre><pre class="highlight csharp"><span class="n">OpenpayAPI</span> <span class="n">api</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">OpenpayAPI</span><span class="p">(</span><span class="s">"sk_b05586ec98454522ac7d4ccdcaec9128"</span><span class="p">,</span> <span class="s">"maonhzpqm8xp2ydssovf"</span><span class="p">);</span>
<span class="n">SearchParams</span> <span class="n">request</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">SearchParams</span><span class="p">();</span>
<span class="n">request</span><span class="p">.</span><span class="n">CreationGte</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">Datetime</span><span class="p">(</span><span class="m">2014</span><span class="p">,</span> <span class="m">5</span><span class="p">,</span> <span class="m">1</span><span class="p">);</span>
<span class="n">request</span><span class="p">.</span><span class="n">CreationLte</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">DateTime</span><span class="p">(</span><span class="m">2014</span><span class="p">,</span> <span class="m">5</span><span class="p">,</span> <span class="m">15</span><span class="p">);</span>
<span class="n">request</span><span class="p">.</span><span class="n">Offset</span> <span class="p">=</span> <span class="m">0</span><span class="p">;</span>
<span class="n">request</span><span class="p">.</span><span class="n">Limit</span> <span class="p">=</span> <span class="m">100</span><span class="p">;</span>

<span class="n">List</span><span class="p">&lt;</span><span class="n">Fee</span><span class="p">&gt;</span> <span class="n">fees</span> <span class="p">=</span> <span class="n">api</span><span class="p">.</span><span class="n">FeeService</span><span class="p">.</span><span class="nf">List</span><span class="p">(</span><span class="n">request</span><span class="p">);</span>
</pre><pre class="highlight javascript"><span class="kd">var</span> <span class="nx">searchParams</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s1">'limit'</span> <span class="err">:</span> <span class="mi">10</span>
<span class="p">};</span>

<span class="nx">openpay</span><span class="p">.</span><span class="nx">fees</span><span class="p">.</span><span class="nx">list</span><span class="p">(</span><span class="nx">searchParams</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">list</span><span class="p">){</span>
  <span class="c1">// ...
</span><span class="p">});</span>
</pre><pre class="highlight ruby"><span class="vi">@openpay</span><span class="o">=</span><span class="no">OpenpayApi</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="s2">"mzdtln0bmtms6o3kck8f"</span><span class="p">,</span><span class="s2">"sk_e568c42a6c384b7ab02cd47d2e407cab"</span><span class="p">)</span>
<span class="vi">@fees</span><span class="o">=</span><span class="vi">@openpay</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span><span class="ss">:fees</span><span class="p">)</span>

<span class="n">response_hash</span><span class="o">=</span><span class="vi">@fees</span><span class="p">.</span><span class="nf">all</span>
</pre>
<blockquote>
<p>Ejemplo de respuesta</p>
</blockquote>
<pre class="highlight json"><span class="p">[</span><span class="w">
   </span><span class="p">{</span><span class="w">
      </span><span class="s2">"amount"</span><span class="p">:</span><span class="mf">30.00</span><span class="p">,</span><span class="w">
      </span><span class="s2">"authorization"</span><span class="p">:</span><span class="err">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"method"</span><span class="p">:</span><span class="s2">"customer"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"operation_type"</span><span class="p">:</span><span class="s2">"out"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"currency"</span><span class="p">:</span><span class="s2">"MXN"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"transaction_type"</span><span class="p">:</span><span class="s2">"fee"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"status"</span><span class="p">:</span><span class="s2">"completed"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="s2">"th8tafyrkakdbyry3kxi"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"creation_date"</span><span class="p">:</span><span class="s2">"2013-11-18T10:33:03-06:00"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"description"</span><span class="p">:</span><span class="s2">"Cobro de comisión"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"error_message"</span><span class="p">:</span><span class="err">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"order_id"</span><span class="p">:</span><span class="s2">"oid-1367"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"customer_id"</span><span class="p">:</span><span class="s2">"dvocf97jd20es3tw5laz"</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="p">{</span><span class="w">
      </span><span class="s2">"amount"</span><span class="p">:</span><span class="mf">12.00</span><span class="p">,</span><span class="w">
      </span><span class="s2">"authorization"</span><span class="p">:</span><span class="err">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"method"</span><span class="p">:</span><span class="s2">"customer"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"operation_type"</span><span class="p">:</span><span class="s2">"out"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"currency"</span><span class="p">:</span><span class="s2">"MXN"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"transaction_type"</span><span class="p">:</span><span class="s2">"fee"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"status"</span><span class="p">:</span><span class="s2">"completed"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="s2">"tdzottaaohuhosf4cdv9"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"creation_date"</span><span class="p">:</span><span class="s2">"2013-11-17T05:35:00-06:00"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"description"</span><span class="p">:</span><span class="s2">"Cobro de comisión"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"error_message"</span><span class="p">:</span><span class="err">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"order_id"</span><span class="p">:</span><span class="s2">"oid-1366"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"customer_id"</span><span class="p">:</span><span class="s2">"afk4csrazjp1udezj1po"</span><span class="w">
   </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></pre>
<p>Regresa los detalles de todas las comisiones cobradas del comercio.</p>

<h3 id="petición">Petición</h3>

<p>Se puede realizar búsquedas utilizando los siguiente parámetros.</p>

<table><thead>
<tr>
<th>Propiedad</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>creation</td>
<td><strong><em>date</em></strong> <br/>Igual a la fecha de creación. Formato yyyy-mm-dd</td>
</tr>
<tr>
<td>creation[gte]</td>
<td><strong><em>date</em></strong> <br/>Mayor a la fecha de creación. Formato yyyy-mm-dd</td>
</tr>
<tr>
<td>creation[lte]</td>
<td><strong><em>date</em></strong> <br/>Menor a la fecha de creación. Formato yyyy-mm-dd</td>
</tr>
<tr>
<td>offset</td>
<td><strong><em>numeric</em></strong> <br/>Número de registros a omitir al inicio, por defecto 0.</td>
</tr>
<tr>
<td>limit</td>
<td><strong><em>numeric</em></strong> <br/>Número de registros que se requieren, por defecto 10.</td>
</tr>
</tbody></table>

<h3 id="respuesta">Respuesta</h3>

<p>Regresa un arreglo de <a href="#objeto-transacción">objetos transacción</a> de las comisiones cobradas en orden descendente por fecha, cada uno con el identificador del cliente al que se le realizó.</p>

<h1 id="tokens">Tokens</h1>

<p>El objetivo de generar tokens es que se capture la información de la tarjeta desde el navegador o dispositivo del usuario final para que dicha información no viaje a través de tu servidor y así puede evitar o reducir certificaciones PCI.</p>

<p>Para usar esta funcionalidad de la API, te recomendamos usar nuestra librería en JavaScript para cuando tu aplicación este en Web y nuestros SDK&rsquo;s de Android o iOS para cuando este en móvil.</p>

<p><strong>Características</strong></p>

<ul>
<li>Se crean a nivel comercio</li>
<li>No se ligan a ningún cliente</li>
<li>Después de crearse solo se puede usar una sola vez, para hacer un cargo con token</li>
</ul>

<h2 id="objeto-token">Objeto Token</h2>

<blockquote>
<p>Ejemplo de objeto </p>
</blockquote>
<pre class="highlight json"><span class="p">{</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="s2">"tokfa4swch8gr4icy2ma"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"card"</span><span class="p">:{</span><span class="w">
         </span><span class="s2">"card_number"</span><span class="p">:</span><span class="s2">"1111"</span><span class="p">,</span><span class="w">
         </span><span class="s2">"holder_name"</span><span class="p">:</span><span class="s2">"Juan Perez Ramirez"</span><span class="p">,</span><span class="w">
         </span><span class="s2">"expiration_year"</span><span class="p">:</span><span class="s2">"20"</span><span class="p">,</span><span class="w">
         </span><span class="s2">"expiration_month"</span><span class="p">:</span><span class="s2">"04"</span><span class="p">,</span><span class="w">
         </span><span class="s2">"address"</span><span class="p">:{</span><span class="w">
            </span><span class="s2">"line1"</span><span class="p">:</span><span class="s2">"Av 5 de febrero"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"line2"</span><span class="p">:</span><span class="s2">"Roble 207"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"line3"</span><span class="p">:</span><span class="s2">"Queretaro"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"state"</span><span class="p">:</span><span class="s2">"Queretaro"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"city"</span><span class="p">:</span><span class="s2">"Queretaro"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"postal_code"</span><span class="p">:</span><span class="s2">"76900"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"country_code"</span><span class="p">:</span><span class="s2">"MX"</span><span class="w">
         </span><span class="p">},</span><span class="w">
         </span><span class="s2">"creation_date"</span><span class="p">:</span><span class="s2">"2014-01-30T13:53:11-06:00"</span><span class="p">,</span><span class="w">
         </span><span class="s2">"brand"</span><span class="p">:</span><span class="s2">"visa"</span><span class="w">
      </span><span class="p">}</span><span class="w">
   </span><span class="p">}</span><span class="w">
</span></pre>
<table><thead>
<tr>
<th>Propiedad</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td><strong><em>string</em></strong> <br/>Identificador del token. Esté es el que deberás usar para posteriormente hacer un cargo.</td>
</tr>
<tr>
<td>card</td>
<td><strong><em>object</em></strong> <br/>Datos de la tarjeta asociada al token. Ver <a href="#objeto-tarjeta">objeto tarjeta</a></td>
</tr>
</tbody></table>

<h2 id="crear-un-nuevo-token">Crear un nuevo token</h2>

<blockquote>
<p>Definición</p>
</blockquote>
<pre class="highlight plaintext">POST https://sandbox-api.openpay.mx/v1/{MERCHANT_ID}/tokens
</pre>
<blockquote>
<p>Ejemplo de petición </p>
</blockquote>
<pre class="highlight shell">curl https://sandbox-api.openpay.mx/v1/mzdtln0bmtms6o3kck8f/tokens <span class="se">\</span>
   -u sk_e568c42a6c384b7ab02cd47d2e407cab: <span class="se">\</span>
   -H <span class="s2">"Content-type: application/json"</span> <span class="se">\</span>
   -X POST -d <span class="s1">'{
   "card_number":"4111111111111111",
   "holder_name":"Juan Perez Ramirez",
   "expiration_year":"20",
   "expiration_month":"12",
   "cvv2":"110",
   "address":{
      "city":"Querétaro",
      "country_code":"MX",
      "postal_code":"76900",
      "line1":"Av 5 de Febrero",
      "line2":"Roble 207",
      "line3":"col carrillo",
      "state":"Queretaro"
   }
}'</span> 
</pre>
<blockquote>
<p>Ejemplo de respuesta</p>
</blockquote>
<pre class="highlight json"><span class="p">{</span><span class="w">
   </span><span class="s2">"id"</span><span class="p">:</span><span class="s2">"k1n0mscnjwhxqia8q7cm"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"card"</span><span class="p">:{</span><span class="w">
      </span><span class="s2">"card_number"</span><span class="p">:</span><span class="s2">"411111XXXXXX1111"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"holder_name"</span><span class="p">:</span><span class="s2">"Juan Perez Ramirez"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"expiration_year"</span><span class="p">:</span><span class="s2">"20"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"expiration_month"</span><span class="p">:</span><span class="s2">"12"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"address"</span><span class="p">:{</span><span class="w">
         </span><span class="s2">"line1"</span><span class="p">:</span><span class="s2">"Av 5 de Febrero"</span><span class="p">,</span><span class="w">
         </span><span class="s2">"line2"</span><span class="p">:</span><span class="s2">"Roble 207"</span><span class="p">,</span><span class="w">
         </span><span class="s2">"line3"</span><span class="p">:</span><span class="s2">"col carrillo"</span><span class="p">,</span><span class="w">
         </span><span class="s2">"state"</span><span class="p">:</span><span class="s2">"Queretaro"</span><span class="p">,</span><span class="w">
         </span><span class="s2">"city"</span><span class="p">:</span><span class="s2">"Querétaro"</span><span class="p">,</span><span class="w">
         </span><span class="s2">"postal_code"</span><span class="p">:</span><span class="s2">"76900"</span><span class="p">,</span><span class="w">
         </span><span class="s2">"country_code"</span><span class="p">:</span><span class="s2">"MX"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="s2">"creation_date"</span><span class="p">:</span><span class="err">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"brand"</span><span class="p">:</span><span class="s2">"visa"</span><span class="w">
   </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></pre>
<p>Para la creación de un token en Openpay es necesario enviar el objeto con la información a registrar. Una vez guardado el token no se puede obtener el número y código de seguridad ya que esta información es encriptada.</p>

<h3 id="petición">Petición</h3>

<table><thead>
<tr>
<th>Propiedad</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>holder_name</td>
<td><strong><em>string</em></strong> (requerido) <br/>Nombre del tarjeta habiente.</td>
</tr>
<tr>
<td>card_number</td>
<td><strong><em>numeric</em></strong> (requerido) <br/>Numero de tarjeta puede ser de 16 o 19 dígitos.</td>
</tr>
<tr>
<td>cvv2</td>
<td><strong><em>numeric</em></strong> (requerido) <br/>Código de seguridad como aparece en la parte de atrás de la tarjeta. Generalmente 3 dígitos.</td>
</tr>
<tr>
<td>expiration_month</td>
<td><strong><em>numeric</em></strong> (requerido) <br/>Mes de expiración tal como aparece en la tarjeta.</td>
</tr>
<tr>
<td>expiration_year</td>
<td><strong><em>numeric</em></strong> (requerido) <br/>Año de expiración tal como aparece en la tarjeta.</td>
</tr>
<tr>
<td>address</td>
<td><strong><em>object</em></strong> (opcional)<br/>Dirección de facturación del tarjeta habiente.</td>
</tr>
</tbody></table>

<h3 id="repuesta">Repuesta</h3>

<p>Regresa el <a href="#objeto-token">objeto token</a> creado o una <a href="#objeto-error">respuesta de error</a> si ocurrió algún problema en la creación.</p>

<h2 id="obtener-un-token">Obtener un token</h2>

<blockquote>
<p>Definición</p>
</blockquote>
<pre class="highlight plaintext">GET https://sandbox-api.openpay.mx/v1/{MERCHANT_ID}/tokens/{TOKEN_ID}
</pre>
<blockquote>
<p>Ejemplo de petición </p>
</blockquote>
<pre class="highlight shell">curl https://sandbox-api.openpay.mx/v1/mzdtln0bmtms6o3kck8f/tokens/k1n0mscnjwhxqia8q7cm <span class="se">\</span>
   -u sk_e568c42a6c384b7ab02cd47d2e407cab:
</pre>
<blockquote>
<p>Ejemplo de respuesta</p>
</blockquote>
<pre class="highlight json"><span class="p">{</span><span class="w">
   </span><span class="s2">"id"</span><span class="p">:</span><span class="s2">"k1n0mscnjwhxqia8q7cm"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"card"</span><span class="p">:{</span><span class="w">
      </span><span class="s2">"card_number"</span><span class="p">:</span><span class="s2">"411111XXXXXX1111"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"holder_name"</span><span class="p">:</span><span class="s2">"Juan Perez Ramirez"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"expiration_year"</span><span class="p">:</span><span class="s2">"20"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"expiration_month"</span><span class="p">:</span><span class="s2">"12"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"address"</span><span class="p">:{</span><span class="w">
         </span><span class="s2">"line1"</span><span class="p">:</span><span class="s2">"Av 5 de Febrero"</span><span class="p">,</span><span class="w">
         </span><span class="s2">"line2"</span><span class="p">:</span><span class="s2">"Roble 207"</span><span class="p">,</span><span class="w">
         </span><span class="s2">"line3"</span><span class="p">:</span><span class="s2">"col carrillo"</span><span class="p">,</span><span class="w">
         </span><span class="s2">"state"</span><span class="p">:</span><span class="s2">"Queretaro"</span><span class="p">,</span><span class="w">
         </span><span class="s2">"city"</span><span class="p">:</span><span class="s2">"Querétaro"</span><span class="p">,</span><span class="w">
         </span><span class="s2">"postal_code"</span><span class="p">:</span><span class="s2">"76900"</span><span class="p">,</span><span class="w">
         </span><span class="s2">"country_code"</span><span class="p">:</span><span class="s2">"MX"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="s2">"creation_date"</span><span class="p">:</span><span class="err">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"brand"</span><span class="p">:</span><span class="s2">"visa"</span><span class="w">
   </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></pre>
<p>Obtiene los detalles de un token. Es necesario tener el id. </p>

<p><aside class="notice">
<strong>Nota:</strong> Nunca se regresarán datos sensibles como son el código de seguridad y del número de tarjeta.
</aside></p>

<h3 id="petición">Petición</h3>

<table><thead>
<tr>
<th>Propiedad</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td><strong><em>string</em></strong> (requerido, longitud = 45) <br/> Identificador de token.</td>
</tr>
</tbody></table>

<h3 id="respuesta">Respuesta</h3>

<p>Regresa un <a href="#objeto-token">objeto token</a></p>

<h1 id="comercio">Comercio</h1>

<p>El objeto comercio permite consultar la información de tu cuenta a través de la API.</p>

<h2 id="objeto-comercio">Objeto Comercio</h2>

<blockquote>
<p>Ejemplo de Objeto:</p>
</blockquote>
<pre class="highlight json"><span class="p">{</span><span class="w"> 
   </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"m9lrykwsmljagrfb38rs"</span><span class="p">,</span><span class="w"> 
   </span><span class="s2">"creationDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2013-11-13T16:58:40-06:00"</span><span class="p">,</span><span class="w"> 
   </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Promociones en linea"</span><span class="p">,</span><span class="w"> 
   </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"contacto@enlinea.com.mx"</span><span class="p">,</span><span class="w"> 
   </span><span class="s2">"phone"</span><span class="p">:</span><span class="w"> </span><span class="s2">"(321) 222-2222"</span><span class="p">,</span><span class="w"> 
   </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"active"</span><span class="p">,</span><span class="w"> 
   </span><span class="s2">"balance"</span><span class="p">:</span><span class="w"> </span><span class="mi">1000</span><span class="p">,</span><span class="w"> 
   </span><span class="s2">"clabe"</span><span class="p">:</span><span class="w"> </span><span class="s2">"646180109400000542"</span><span class="w"> 
</span><span class="p">}</span><span class="w"> 
</span></pre>
<table><thead>
<tr>
<th>Propiedad</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td><strong><em>string</em></strong> <br/>Identificador único asignado al momento de su creación.</td>
</tr>
<tr>
<td>creation_date</td>
<td><strong><em>datetime</em></strong> <br/>Fecha de creación de la transacción en formato ISO 8601.</td>
</tr>
<tr>
<td>name</td>
<td><strong><em>string</em></strong> <br/>Nombre del comercio con el que se registró el comercio.</td>
</tr>
<tr>
<td>email</td>
<td><strong><em>string</em></strong> <br/>Cuenta de correo electrónico registrada para el comercio.</td>
</tr>
<tr>
<td>phone</td>
<td><strong><em>string</em></strong> <br/>Número teléfonico registrado del comercio.</td>
</tr>
<tr>
<td>status</td>
<td><strong><em>string</em></strong> <br/>Estatus de la cuenta del Comercio puede ser active o deleted. Si la cuenta se encuentra en estatus deleted no se permite realizar ninguna transacción.</td>
</tr>
<tr>
<td>balance</td>
<td><strong><em>numeric</em></strong> <br/>Saldo en la cuenta con dos decimales.</td>
</tr>
<tr>
<td>clabe</td>
<td><strong><em>numeric</em></strong>   <br/>Cuenta CLABE asociada con la que puede recibir fondos realizando una transferencia desde cualquier banco en México vía SPEI.</td>
</tr>
</tbody></table>

<h2 id="obtener-un-comercio">Obtener un comercio</h2>

<blockquote>
<p>Definición</p>
</blockquote>
<pre class="highlight shell">GET https://sandbox-api.openpay.mx/v1/<span class="o">{</span>MERCHANT_ID<span class="o">}</span>
</pre><pre class="highlight php"><span class="cp">&lt;?</span>
<span class="c1">// =============================
// Funcionalidad no implementada
// =============================
</span><span class="cp">?&gt;</span>
</pre><pre class="highlight java"><span class="n">openpayAPI</span><span class="o">.</span><span class="na">merchant</span><span class="o">().</span><span class="na">get</span><span class="o">();</span>
</pre><pre class="highlight csharp"><span class="c1">// =============================
// Funcionalidad no implementada
// =============================
</span></pre><pre class="highlight javascript"><span class="nx">openpay</span><span class="p">.</span><span class="nx">merchant</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="nx">callback</span><span class="p">);</span>
</pre><pre class="highlight ruby"><span class="c1"># =============================</span>
<span class="c1"># Funcionalidad no implementada</span>
<span class="c1"># =============================</span>
</pre>
<blockquote>
<p>Ejemplo de petición</p>
</blockquote>
<pre class="highlight shell">curl https://sandbox-api.openpay.mx/v1/mzdtln0bmtms6o3kck8f <span class="se">\</span>
   -u sk_e568c42a6c384b7ab02cd47d2e407cab:
</pre><pre class="highlight java"><span class="n">OpenpayAPI</span> <span class="n">api</span> <span class="o">=</span> <span class="k">new</span> <span class="n">OpenpayAPI</span><span class="o">(</span><span class="s">"https://sandbox-api.openpay.mx"</span><span class="o">,</span> <span class="s">"sk_b05586ec98454522ac7d4ccdcaec9128"</span><span class="o">,</span> <span class="s">"maonhzpqm8xp2ydssovf"</span><span class="o">);</span>
<span class="n">Merchant</span> <span class="n">merchant</span> <span class="o">=</span> <span class="n">api</span><span class="o">.</span><span class="na">merchant</span><span class="o">().</span><span class="na">get</span><span class="o">();</span>
</pre><pre class="highlight javascript"><span class="nx">openpay</span><span class="p">.</span><span class="nx">merchant</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">merchant</span><span class="p">){</span>
  <span class="c1">// ...
</span><span class="p">});</span>
</pre>
<blockquote>
<p>Ejemplo de respuesta</p>
</blockquote>
<pre class="highlight json"><span class="p">{</span><span class="w">
   </span><span class="s2">"name"</span><span class="p">:</span><span class="s2">"Demo Openpay"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"email"</span><span class="p">:</span><span class="s2">"demo@openpay.mx"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"phone"</span><span class="p">:</span><span class="s2">"(442) 258-1039"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"status"</span><span class="p">:</span><span class="s2">"active"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"balance"</span><span class="p">:</span><span class="mf">218.73</span><span class="p">,</span><span class="w">
   </span><span class="s2">"clabe"</span><span class="p">:</span><span class="s2">"646180109400135624"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"id"</span><span class="p">:</span><span class="s2">"mzdtln0bmtms6o3kck8f"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"creation_date"</span><span class="p">:</span><span class="s2">"2014-01-23T10:45:53-06:00"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></pre>
<p>Obtiene los detalles la cuenta del comercio. Solo se requiere indicar el id unico del comercio que se quiere obtener.</p>

<h3 id="petición">Petición</h3>

<table><thead>
<tr>
<th>Propiedad</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td><strong><em>string</em></strong> (requerido, longitud = 45) <br>identificador único del comercio.</td>
</tr>
</tbody></table>

<h3 id="respuesta">Respuesta</h3>

<p>Si el identificador es correcto regresa un objeto comercio. </p>

<h1 id="objetos-comunes">Objetos Comunes</h1>

<p>Información de objetos compartidos en peticiones y respuestas.</p>

<h2 id="objeto-transacción">Objeto Transacción</h2>

<blockquote>
<p>Ejemplo de Objeto:</p>
</blockquote>
<pre class="highlight json"><span class="p">{</span><span class="w">
   </span><span class="s2">"id"</span><span class="p">:</span><span class="s2">"trehwr2zarltvae56vxl"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"authorization"</span><span class="p">:</span><span class="err">null</span><span class="p">,</span><span class="w">
   </span><span class="s2">"transaction_type"</span><span class="p">:</span><span class="s2">"payout"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"operation_type"</span><span class="p">:</span><span class="s2">"out"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"currency"</span><span class="p">:</span><span class="s2">"MXN"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"method"</span><span class="p">:</span><span class="s2">"bank"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"creation_date"</span><span class="p">:</span><span class="s2">"2013-11-14T18:29:35-06:00"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"order_id"</span><span class="p">:</span><span class="s2">"000001"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"status"</span><span class="p">:</span><span class="s2">"in_progress"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"amount"</span><span class="p">:</span><span class="mi">500</span><span class="p">,</span><span class="w">
   </span><span class="s2">"description"</span><span class="p">:</span><span class="s2">"Pago de ganancias"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"error_message"</span><span class="p">:</span><span class="err">null</span><span class="p">,</span><span class="w">
   </span><span class="s2">"customer_id"</span><span class="p">:</span><span class="s2">"afk4csrazjp1udezj1po"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"bank_account"</span><span class="p">:{</span><span class="w">
      </span><span class="s2">"alias"</span><span class="p">:</span><span class="err">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"bank_name"</span><span class="p">:</span><span class="s2">"BANCOMER"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"creation_date"</span><span class="p">:</span><span class="s2">"2013-11-14T18:29:34-06:00"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"clabe"</span><span class="p">:</span><span class="s2">"012298026516924616"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"holder_name"</span><span class="p">:</span><span class="s2">"Juan Tapia Trejo"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"bank_code"</span><span class="p">:</span><span class="s2">"012"</span><span class="w">
   </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></pre>
<table><thead>
<tr>
<th>Propiedad</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td><em><strong>string</strong></em> <br/> Identificador único asignado por Openpay al momento de su creación.</td>
</tr>
<tr>
<td>authorization</td>
<td><strong><em>string</em></strong> <br/>Número de autorización generado por el procesador.</td>
</tr>
<tr>
<td>transaction_type</td>
<td><strong><em>string</em></strong> <br/>Tipo de transacción que fue creada: fee, charge, payout, transfer.</td>
</tr>
<tr>
<td>operation_type</td>
<td><strong><em>string</em></strong> <br/>Tipo de afectación en la cuenta: in, out.</td>
</tr>
<tr>
<td>method</td>
<td><strong><em>string</em></strong> <br/>Tipo de método usado en la transacción: card, bank o customer.</td>
</tr>
<tr>
<td>creation_date</td>
<td><strong><em>datetime</em></strong>  <br/>Fecha de creación de la transacción en formato ISO 8601.</td>
</tr>
<tr>
<td>order_id</td>
<td><strong><em>string</em></strong> <br/>Referencia única o número de orden/transacción.</td>
</tr>
<tr>
<td>status</td>
<td><strong><em>string</em></strong> <br/>Estatus actual de la transacción. Posibles valores: completed, in_progress, failed.</td>
</tr>
<tr>
<td>amount</td>
<td><strong><em>numeric</em></strong> <br/>Cantidad de la transacción a dos decimales.</td>
</tr>
<tr>
<td>description</td>
<td><strong><em>string</em></strong> <br/>Descripción de la transacción.</td>
</tr>
<tr>
<td>error_message</td>
<td><strong><em>string</em></strong> <br/>Si la transacción está en status: failed, en este campo se mostrará la razón del fallo.</td>
</tr>
<tr>
<td>customer_id</td>
<td><strong><em>string</em></strong> <br/>Identificar único del cliente al cual pertence la transacción. Si es valor es nulo, la transacción pertenece a la cuenta del comercio.</td>
</tr>
<tr>
<td>currency</td>
<td><strong><em>string</em></strong> <br/>Moneda usada en la operación, por default es MXN.</td>
</tr>
<tr>
<td>bank_account</td>
<td><strong><em>objeto</em></strong> <br/>Datos de la cuenta bancaria usada en la transacción. Ver objeto BankAccoount</td>
</tr>
<tr>
<td>card</td>
<td><strong><em>objeto</em></strong> <br/>Datos de la tarjeta usada en la transacción. Ver objeto Card</td>
</tr>
</tbody></table>

<h2 id="objeto-dirección">Objeto Dirección</h2>

<blockquote>
<p>Ejemplo de Objeto:</p>
</blockquote>
<pre class="highlight json"><span class="p">{</span><span class="w">
   </span><span class="s2">"line1"</span><span class="p">:</span><span class="s2">"Av 5 de Febrero"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"line2"</span><span class="p">:</span><span class="s2">"Roble 207"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"line3"</span><span class="p">:</span><span class="s2">"col carrillo"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"state"</span><span class="p">:</span><span class="s2">"Queretaro"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"city"</span><span class="p">:</span><span class="s2">"Querétaro"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"postal_code"</span><span class="p">:</span><span class="s2">"76900"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"country_code"</span><span class="p">:</span><span class="s2">"MX"</span><span class="w"> 
</span><span class="p">}</span><span class="w">
</span></pre>
<table><thead>
<tr>
<th>Propiedad</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>line1</td>
<td><strong><em>string</em></strong> (requerido) <br/>Primera línea de dirección del tarjeta habiente. Usada comúnmente para indicar la calle y número exterior e interior.</td>
</tr>
<tr>
<td>line2</td>
<td><strong><em>string</em></strong> <br/>Segunda línea de la dirección del tarjeta habiente. Usada comúnmente para indicar condominio, suite o delegación.</td>
</tr>
<tr>
<td>line3</td>
<td><strong><em>string</em></strong> <br/>Tercer línea de la dirección del tarjeta habiente. Usada comúnmente para indicar la colonia.</td>
</tr>
<tr>
<td>postal_code</td>
<td><strong><em>string</em></strong> (requerido) <br/>Código postal del tarjeta habiente</td>
</tr>
<tr>
<td>state</td>
<td><strong><em>string</em></strong> (requerido) <br/>Estado del tarjeta habiente</td>
</tr>
<tr>
<td>city</td>
<td><strong><em>string</em></strong> (requerido) <br/>Ciudad del tarjeta habiente</td>
</tr>
<tr>
<td>country_code</td>
<td><strong><em>string</em></strong> (requerido) <br/>Código del país del tarjeta habiente a dos caracteres en formato ISO_3166-1</td>
</tr>
</tbody></table>

      </div>
      <div class="dark-box">
        <div id="lang-selector">
          
            
              
                <a href="#" data-language-name="shell">cURL</a>
              
            
              
                <a href="#" data-language-name="php">PHP</a>
              
            
              
                <a href="#" data-language-name="java">JAVA</a>
              
            
              
                <a href="#" data-language-name="csharp">C#</a>
              
            
              
                <a href="#" data-language-name="javascript">Node.js</a>
              
            
              
                <a href="#" data-language-name="ruby">Ruby</a>
              
            
          
        </div>
      </div>
    </div>
    <!-- ClickDesk Live Chat Service for websites -->
  <script type='text/javascript'>
  var _glc =_glc || []; _glc.push('all_ag9zfmNsaWNrZGVza2NoYXRyDgsSBXVzZXJzGKiezXcM');
  var glcpath = (('https:' == document.location.protocol) ? 'https://my.clickdesk.com/clickdesk-ui/browser/' : 
  'http://my.clickdesk.com/clickdesk-ui/browser/');
  var glcp = (('https:' == document.location.protocol) ? 'https://' : 'http://');
  var glcspt = document.createElement('script'); glcspt.type = 'text/javascript'; 
  glcspt.async = true; glcspt.src = glcpath + 'livechat-new.js';
  var s = document.getElementsByTagName('script')[0];s.parentNode.insertBefore(glcspt, s);
  </script>
  <!-- End of ClickDesk -->
  <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-46051555-1', 'openpay.mx');
  ga('send', 'pageview');

</script>
  </body>
</html>